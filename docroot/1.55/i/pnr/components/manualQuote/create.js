{xtype:"form",border:false,width:440,beforeSubmit:function(d){;var c=0;if(d.type=="ACCOMMODATION"){c=1}else{if(d.type=="TOUR"){c=2}else{if(d.type=="CAR"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(5).items.itemAt(1).items.itemAt(2).items.itemAt(0).getData();d.category=b.data}else{if(d.type=="TRANSFER"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(4).items.itemAt(0).getData();d.mode=b.data}else{if(d.type=="SIGHTSEEING"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(3).items.itemAt(1).getData();d.paxType=b.data}else{if(d.type=="RAIL"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(6).items.itemAt(2).getData();d.classType=b.data}}}}}}if(c>0){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(c).items.itemAt(3).getData();d.roomTypes=b.data}var g=this.items.itemAt(0).items.itemAt(3).items.itemAt(1).items.itemAt(0).selModel.selections.items;var f=[];for(var e=0;e<g.length;e++){f.push(g[e].data.dataURI)}d.passengerURIs=f;return d},requireStores:[{dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]}],items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:510,width:440,items:[{title:"Quote Details",autoScroll:true,items:[{xtype:"fieldset",layout:"form",border:false,autoHeight:true,labelWidth:100,calculateCommission:function(){var c=this.items;var b=(c.itemAt(14).getValue()/100)*c.itemAt(11).getValue();if(!isNaN(b)){c.itemAt(15).setValue(b.toFixed(2))}},items:[{xtype:"combo",fieldLabel:"Component",name:"type",style:"margin-left: 5px;",mode:"local",width:280,triggerAction:"all",editable:true,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Component type",store:TDS.data.componentsList,listeners:{select:function(){this.ownerCt.items.itemAt(3).items.itemAt(1).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).enable(true);this.ownerCt.items.itemAt(4).enable(true);this.ownerCt.items.itemAt(5).enable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).enable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).enable(true);this.ownerCt.items.itemAt(7).enable(true);this.ownerCt.items.itemAt(7).items.itemAt(2).enable(true);this.ownerCt.ownerCt.items.itemAt(1).hide(true);this.ownerCt.ownerCt.items.itemAt(2).hide(true);this.ownerCt.ownerCt.items.itemAt(3).hide(true);this.ownerCt.ownerCt.items.itemAt(4).hide(true);this.ownerCt.ownerCt.items.itemAt(5).hide(true);this.ownerCt.ownerCt.items.itemAt(6).hide(true);this.ownerCt.ownerCt.items.itemAt(7).hide(true);this.ownerCt.ownerCt.items.itemAt(8).hide(true);this.ownerCt.ownerCt.items.itemAt(1).disable(true);this.ownerCt.ownerCt.items.itemAt(2).disable(true);this.ownerCt.ownerCt.items.itemAt(3).disable(true);this.ownerCt.ownerCt.items.itemAt(4).disable(true);this.ownerCt.ownerCt.items.itemAt(5).disable(true);this.ownerCt.ownerCt.items.itemAt(6).disable(true);this.ownerCt.ownerCt.items.itemAt(7).disable(true);this.ownerCt.ownerCt.items.itemAt(8).disable(true);if(this.getValue()==TDS.data.componentType.TYPE_ACCOMMODATION){this.ownerCt.ownerCt.items.itemAt(1).show(true);this.ownerCt.ownerCt.items.itemAt(1).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("")}else{if(this.getValue()==TDS.data.componentType.TYPE_RAIL){this.ownerCt.ownerCt.items.itemAt(6).show(true);this.ownerCt.ownerCt.items.itemAt(6).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(7).items.itemAt(2).disable(true)}else{if(this.getValue()==TDS.data.componentType.TYPE_TOUR){this.ownerCt.ownerCt.items.itemAt(2).show(true);this.ownerCt.ownerCt.items.itemAt(2).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(6).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(3).items.itemAt(2).show(true);this.ownerCt.items.itemAt(6).items.itemAt(2).show(true)}else{if(this.getValue()==TDS.data.componentType.TYPE_SIGHTSEEING||this.getValue()==TDS.data.componentType.TYPE_TRANSFER){if(this.getValue()==TDS.data.componentType.TYPE_SIGHTSEEING){this.ownerCt.ownerCt.items.itemAt(3).show(true);this.ownerCt.ownerCt.items.itemAt(3).enable(true)}else{this.ownerCt.ownerCt.items.itemAt(4).show(true);this.ownerCt.ownerCt.items.itemAt(4).enable(true)}this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(4).disable(true);this.ownerCt.items.itemAt(5).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(7).disable(true)}else{if(this.getValue()==TDS.data.componentType.TYPE_CAR){this.ownerCt.ownerCt.items.itemAt(5).show(true);this.ownerCt.ownerCt.items.itemAt(5).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(6).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(3).items.itemAt(2).show(true);this.ownerCt.items.itemAt(6).items.itemAt(2).show(true)}else{if(this.getValue()==TDS.data.componentType.TYPE_AIR){this.ownerCt.ownerCt.items.itemAt(7).show(true);this.ownerCt.ownerCt.items.itemAt(7).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).hide(true);this.ownerCt.items.itemAt(6).items.itemAt(2).hide(true);this.ownerCt.items.itemAt(3).items.itemAt(1).show(true);this.ownerCt.items.itemAt(6).items.itemAt(1).show(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(7).disable(true)}else{if(this.getValue()==TDS.data.componentType.TYPE_CRUISE){this.ownerCt.ownerCt.items.itemAt(8).show(true);this.ownerCt.ownerCt.items.itemAt(8).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("")}}}}}}}},render:function(){var b=this.ownerCt.ownerCt.items;setTimeout(function(){b.itemAt(1).hide(true);b.itemAt(2).hide(true);b.itemAt(3).hide(true);b.itemAt(4).hide(true);b.itemAt(5).hide(true);b.itemAt(6).hide(true);b.itemAt(7).hide(true);b.itemAt(8).hide(true);b.itemAt(1).disable(true);b.itemAt(2).disable(true);b.itemAt(3).disable(true);b.itemAt(4).disable(true);b.itemAt(5).disable(true);b.itemAt(6).disable(true);b.itemAt(7).disable(true);b.itemAt(8).disable(true)},10)}}},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,width:390,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Start Country/City:",width:Ext.isIE?105:110},{xtype:"combo",name:"countryFromCode",emptyText:"Type a country...",excludeSubmit:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"isoCode",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","isoCode"]}),appendData:[{name:"",dataURI:""}]},{xtype:"locationcombo",name:"locationFromURI",style:"margin-left: 2px;",listeners:{beforesearch:function(c){var b=this.ownerCt;var a=b.items.itemAt(1);if(a.getValue()==""){a.markInvalid("Please select a country.");return false}c.searchURI=TDS.env.dataPath+"country/"+a.getValue()+"/locations/collection";c.searchIdentifier="country/"+a.getValue()+"/locations"}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"From/In Date:",width:Ext.isIE?105:110},{xtype:"datefield",name:"dateFrom",format:"dMy",width:125},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time:",width:70},{xtype:"combo",fieldLabel:"Time",name:"startTime",style:"margin-left: 5px;",mode:"local",width:80,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"numeric",valueField:"numeric",emptyText:"Time",store:TDS.data.time}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"P/U Location:",width:105},{xtype:"airportcombo",fieldLabel:"P/U Location",name:"airportFromURI",style:"margin-left: 5px;",hideTrigger:false,width:280,emptyText:"Location"},{xtype:"combo",fieldLabel:"D/O Location",name:"pickUp",style:"margin-left: 5px;",mode:"local",width:280,hidden:true,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Location",store:TDS.data.pickUpDropOffLocation}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"Finish Country/City:",width:Ext.isIE?105:110},{xtype:"combo",name:"countryToCode",emptyText:"Type a country...",excludeSubmit:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"isoCode",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","isoCode"]}),appendData:[{name:"",dataURI:""}]},{xtype:"locationcombo",name:"locationToURI",style:"margin-left: 2px;",listeners:{beforesearch:function(c){var b=this.ownerCt;var a=b.items.itemAt(1);if(a.getValue()==""){a.markInvalid("Please select a country.");return false}c.searchURI=TDS.env.dataPath+"country/"+a.getValue()+"/locations/collection";c.searchIdentifier="country/"+a.getValue()+"/locations"}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"To/Out Date:",width:Ext.isIE?105:110},{xtype:"datefield",name:"dateTo",format:"dMy",width:125},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time:",width:70},{xtype:"combo",fieldLabel:"Time",name:"finishTime",style:"margin-left: 5px;",mode:"local",width:80,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"numeric",valueField:"numeric",emptyText:"Time",store:TDS.data.time}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"D/O Location:",width:105},{xtype:"airportcombo",fieldLabel:"D/O Location",name:"airportToURI",style:"margin-left: 5px;",hideTrigger:false,width:280,emptyText:"Location"},{xtype:"combo",fieldLabel:"D/O Location",name:"dropOff",style:"margin-left: 5px;",mode:"local",width:280,hidden:true,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Location",store:TDS.data.pickUpDropOffLocation}]},{xtype:"panel",layout:"table",width:390,style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Duration:",width:Ext.isIE?105:110},{html:"Nights:",width:60},{xtype:"numberfield",name:"durationNights",width:65},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Days:",width:80},{xtype:"numberfield",name:"durationDays",width:75}]},{xtype:"panel",layout:"table",width:390,style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:7},items:[{html:"Adults:",width:Ext.isIE?105:110},{xtype:"omnicrementer",name:"noOfAdults",width:55},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child:",width:53},{xtype:"omnicrementer",name:"noOfChildren",width:55},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Infants:",width:62},{xtype:"omnicrementer",name:"noOfInfants",width:55}]}]},{xtype:"fieldset",autoHeight:true,labelWidth:105,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_ACCOMMODATION){this.enable(true);this.show(true)}}},items:[{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 2px;",border:false,hideBorders:false,layoutConfig:{columns:4},items:[{html:"Type:",border:false,hideBorders:false,width:110},{xtype:"combo",fieldLabel:"Type",name:"typeClassCategory",mode:"local",width:190,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]})},{xtype:"combo",fieldLabel:"Rating",name:"rating",style:"margin-left: 10px;",mode:"local",width:80,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Rating",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"accommodation/ratings/collection",identifier:"accommodation/ratings",fields:["name","dataURI"]})}]},{xtype:"textfield",fieldLabel:"Hotel",name:"name",width:280},{columnWidth:1,xtype:"editorgrid",clicksToEdit:1,enableRowExpander:false,sessionExpandedRows:false,style:"padding: 0; margin-bottom: 10px;margin-top: 10px;",autoHeight:true,width:390,autoScroll:true,border:true,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","roomType","plan","rooms","price","extras","status","paxType"]}),getData:function(){var b=this.selModel.selections;for(var a=(b.length-1),c=[];a>=0;a--){c.push({roomType:b.items[a].data.roomType,plan:b.items[a].data.plan,rooms:b.items[a].data.rooms,price:b.items[a].data.price,extras:b.items[a].data.extras,status:b.items[a].data.status})}return{data:c}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Room Type",dataIndex:"roomType",width:100},{header:"Plan",dataIndex:"plan",width:120,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]}),appendData:[{name:" ",dataURI:""}]})},{header:"Rooms",dataIndex:"rooms",width:50,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",hidden:true,width:60,fixed:true},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",hidden:true,width:60,fixed:true}],viewConfig:{forceFit:true},listeners:{beforerender:function(a){var b=this.ownerCt.findParentByType("tabpanel")},render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var d=this.ownerCt.findParentByType("tabpanel");var c=[{roomType:"Single",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Double",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Twin",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Triple",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Quad",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Apartment",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"B/B",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Hotel",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Villa",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Cabin",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"SelfContained",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Others",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""}];var a=this;var b=a.store;b.loadData(c);a.getView().refresh()}}}]},{xtype:"fieldset",autoHeight:true,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){this.enable(true);this.show(true)}}},style:"margin-top: 0px;  margin-right: 2px;",height:211,labelWidth:105,items:[{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 2px;margin-top: 2px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Type:",width:110},{xtype:"combo",fieldLabel:"Type",name:"typeClassCategory",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"tour/types/collection",identifier:"tour/types",fields:["name","dataURI"]})}]},{xtype:"textfield",fieldLabel:"Package Name",name:"name",width:280},{columnWidth:1,xtype:"editorgrid",clicksToEdit:1,enableRowExpander:false,sessionExpandedRows:false,style:"padding: 0; margin-bottom: 10px;margin-top: 10px;",autoHeight:true,width:390,autoScroll:true,border:true,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","roomType","plan","rooms","price","extras","status"]}),getData:function(){var b=this.selModel.selections;for(var a=(b.length-1),c=[];a>=0;a--){c.push(b.items[a].data)}return{data:c}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Room Type",dataIndex:"roomType",width:100},{header:"Plan",dataIndex:"plan",width:140,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]}),appendData:[{name:" ",dataURI:""}]})},{header:"Pax Type",dataIndex:"paxType",width:70,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})})},{header:"Pax No",dataIndex:"rooms",width:50,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",hidden:true,width:60,fixed:true},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",hidden:true,width:60,fixed:true}],viewConfig:{forceFit:true},listeners:{beforerender:function(a){var b=this.ownerCt.findParentByType("tabpanel")},render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var d=this.ownerCt.findParentByType("tabpanel");var c=[{roomType:"Single",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Double",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Twin",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Triple",plan:" ",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Quad",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""},{roomType:"Others",plan:"",rooms:"",price:"",extras:"",nett:"",markup:"",comm:""}];var a=this;var b=a.store;b.loadData(c);a.getView().refresh()}}}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_SIGHTSEEING){this.enable(true);this.show(true)}}},style:"margin-top: 0px;  margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})},{xtype:"editorgrid",height:120,width:390,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.CollectionStore({url:"",identifier:"",fields:["paxType","noOfPax","price","status"]}),viewConfig:{forceFit:true},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.mode;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Pax Type",dataIndex:"paxType",width:160,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})})},{header:"No Of Pax",dataIndex:"noOfPax",width:80,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",hidden:true,width:60,fixed:true},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",hidden:true,width:60,fixed:true}],bbar:[{xtype:"button",text:"Add",handler:function(){var a=this.ownerCt.items.itemAt(1);a.enable();var c=this.ownerCt.ownerCt;var b=c.getStore();b.add([new b.recordType({paxType:"",noOfPax:""})]);c.newRecordIndex=b.getCount()-1;c.startEditing(c.newRecordIndex,0)}},{xtype:"button",text:"Cancel",disabled:true,handler:function(){var b=this.ownerCt.items.itemAt(0);b.enable();var c=this.ownerCt.ownerCt;var a=c.getStore().getAt(c.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}c.getStore().remove(a);if(c.getStore().length<=0){this.disable()}}}]},{xtype:"textfield",fieldLabel:"Arrival Details",name:"arivalDetails",width:280},{xtype:"textfield",fieldLabel:"Departure Details",name:"departDetails",width:280},{xtype:"textfield",fieldLabel:"Service Name",name:"name",width:280}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TRANSFER){this.enable(true);this.show(true)}}},style:"margin-top: 0px;  margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"editorgrid",height:120,width:390,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.CollectionStore({url:"",identifier:"",fields:["mode","paxType","noOfPax","price","status"]}),viewConfig:{},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.mode;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Mode",dataIndex:"mode",width:140,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"transfer/modetypes/collection",identifier:"transfer/modetypes",fields:["name","dataURI"]})})},{header:"Pax Type",dataIndex:"paxType",width:160,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})})},{header:"No Of Pax",dataIndex:"noOfPax",width:80,fixed:true,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",hidden:true,width:60,fixed:true},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",hidden:true,width:60,fixed:true}],bbar:[{xtype:"button",text:"Add",handler:function(){var a=this.ownerCt.items.itemAt(1);a.enable();var c=this.ownerCt.ownerCt;var b=c.getStore();b.add([new b.recordType({mode:"",paxType:"",noOfPax:""})]);c.newRecordIndex=b.getCount()-1;c.startEditing(c.newRecordIndex,0)}},{xtype:"button",text:"Cancel",disabled:true,handler:function(){var b=this.ownerCt.items.itemAt(0);b.enable();var c=this.ownerCt.ownerCt;var a=c.getStore().getAt(c.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}c.getStore().remove(a);if(c.getStore().length<=0){this.disable()}}}]},{xtype:"textfield",fieldLabel:"Arrival Details",name:"arivalDetails",width:280},{xtype:"textfield",fieldLabel:"Departure Details",name:"departDetails",width:280},{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})}]},{border:false,layout:"column",autoHeight:true,autoWidth:true,items:[{xtype:"fieldset",layout:"table",style:"padding-bottom: 10px;  padding-top: 10px;, margin-bottom:10px",hidden:true,columnWidth:1,autoHeight:true,hideBorders:true,layoutConfig:{columns:3},defaults:{style:"padding:10px",xtype:"checkbox",width:250,bodyStyle:"padding: 0; padding-left: 14px; "},items:[{xtype:"label",value:"&nbsp;",width:30},{name:"navGPS",boxLabel:"Nav/GPS"},{boxLabel:"Collision Damage Waiver",name:"collisionDamageWaiver"},{xtype:"label",width:30},{boxLabel:"Infant Seat",name:"infantSeat"},{name:"oneWayRental",boxLabel:"One Way Rental"},{xtype:"label",width:30},{name:"toddlerSeat",boxLabel:"Toddler Seat"},{name:"additionalDrive",boxLabel:"Additional Drive"},{xtype:"label",width:30},{name:"childSeat",boxLabel:"Child Seat"},{name:"underAgeDrive",boxLabel:"Under Age Drivwe"}]},{xtype:"fieldset",columnWidth:1,style:"padding-bottom: 8px;  padding-top: 10px;, margin-bottom:10px",border:false,autoHeight:true,labelWidth:105,defaults:{style:"padding-left: 6px; margin-bottom: 6px;",bodyStyle:"padding: 0; padding-left: 6px; "},listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CAR){this.enable(true);this.show(true)}}},items:[{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:2},items:[{html:"Supplier:",border:false,hideBorders:false,width:107},{xtype:"combo",name:"supplierURI",mode:"local",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})}]},{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:4},items:[{html:"Driver's Age:",border:false,hideBorders:false,width:107},{xtype:"omnicrementer",name:"driverAge",width:70},{border:false,width:150},{xtype:"button",text:"Options",enableToggle:true,handler:function(){if(this.pressed){this.ownerCt.ownerCt.ownerCt.items.itemAt(0).show()}else{this.ownerCt.ownerCt.ownerCt.items.itemAt(0).hide()}}}]},{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:2},items:[{xtype:"editorgrid",height:120,width:390,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.CollectionStore({url:"",identifier:"",fields:["category","type","transMission","price","status"]}),viewConfig:{},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.category;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Category",dataIndex:"category",width:140,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.carRentalCategoryMQ})},{header:"Type",dataIndex:"type",width:160,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",emptyText:"Type",store:TDS.data.carRentalVehicleType})},{header:"T/mission",dataIndex:"transMission",width:80,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",emptyText:"Type",store:TDS.data.carRentalTransmission})},{header:"Price",dataIndex:"price",hidden:true,width:60,fixed:true},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",hidden:true,width:60,fixed:true}],bbar:[{xtype:"button",text:"Add",handler:function(){var a=this.ownerCt.items.itemAt(1);a.enable();var c=this.ownerCt.ownerCt;var b=c.getStore();b.add([new b.recordType({category:"",type:"",transMission:""})]);c.newRecordIndex=b.getCount()-1;c.startEditing(c.newRecordIndex,0)}},{xtype:"button",text:"Cancel",disabled:true,handler:function(){var b=this.ownerCt.items.itemAt(0);b.enable();var c=this.ownerCt.ownerCt;var a=c.getStore().getAt(c.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}c.getStore().remove(a);if(c.getStore().length<=0){this.disable()}}}]}]},{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:2},items:[{html:"Car Company",border:false,hideBorders:false,width:107},{xtype:"textfield",fieldLabel:"Car Company",name:"name",width:280}]}]}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){this.enable(true);this.show(true)}}},style:"margin-top: 0px;  margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})},{xtype:"textfield",fieldLabel:"Service Name",name:"name",width:280},{xtype:"editorgrid",height:120,width:390,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.CollectionStore({url:"",identifier:"",fields:["classType","seat","cabin","price","status"]}),viewConfig:{},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.classType;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Class",dataIndex:"classType",width:140,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"value",valueField:"value",emptyText:"Type",store:TDS.data.railClass})},{header:"Seat",dataIndex:"seat",width:160,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",emptyText:"Type",store:["Yes","No"]})},{header:"Cabin",dataIndex:"cabin",width:80,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"value",valueField:"value",emptyText:"Type",store:TDS.data.railCabinType})},{header:"Price",dataIndex:"price",hidden:true,width:60,fixed:true},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",hidden:true,width:60,fixed:true}],bbar:[{xtype:"button",text:"Add",handler:function(){var a=this.ownerCt.items.itemAt(1);a.enable();var c=this.ownerCt.ownerCt;var b=c.getStore();b.add([new b.recordType({classType:"",seat:"",cabin:""})]);c.newRecordIndex=b.getCount()-1;c.startEditing(c.newRecordIndex,0)}},{xtype:"button",text:"Cancel",disabled:true,handler:function(){var b=this.ownerCt.items.itemAt(0);b.enable();var c=this.ownerCt.ownerCt;var a=c.getStore().getAt(c.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}c.getStore().remove(a);if(c.getStore().length<=0){this.disable()}}}]}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){this.enable(true);this.show(true)}}},style:"margin-top: 0px;  margin-right: 2px;",height:150,labelWidth:105,items:[{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})},{xtype:"combo",fieldLabel:"Class",name:"typeClassCategory",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",displayField:"text",valueField:"value",store:TDS.data.airClassMQ},{xtype:"combo",fieldLabel:"No Of Seats",name:"noOfSeats",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"No Of Seats",store:[]},{xtype:"textfield",fieldLabel:"Special Food",name:"specialFood",width:280},{xtype:"textfield",fieldLabel:"Airline",name:"name",width:280}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){this.enable(true);this.show(true)}}},style:"margin-top: 0px;  margin-right: 2px;",height:265,labelWidth:105,items:[{xtype:"combo",name:"supplierURI",mode:"local",fieldLabel:"ARENA Supplier",width:280,triggerAction:"all",editable:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]})},{xtype:"combo",fieldLabel:"Category",name:"typeClassCategory",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"text",valueField:"value",emptyText:"Category",store:TDS.data.cruiseCategory},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 8px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{html:"Connect Cabins:",width:110},{xtype:"radio",name:"connectCabin",boxLabel:"No",inputValue:false,width:120},{xtype:"radio",name:"connectCabin",boxLabel:"Yes",inputValue:true,width:65}]},{xtype:"combo",name:"location",mode:"local",fieldLabel:"Location",width:280,triggerAction:"all",editable:true,displayField:"text",valueField:"value",store:TDS.data.cruiseLocation},{xtype:"combo",fieldLabel:"Deck",name:"deck",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"text",valueField:"value",emptyText:"Deck",store:TDS.data.cruiseDeck},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 8px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{html:"Obstruction:",width:110},{xtype:"radio",name:"obstruction",boxLabel:"No",inputValue:false,width:120},{xtype:"radio",name:"obstruction",boxLabel:"Yes",inputValue:false,width:65}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 8px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{html:"Configuration:",width:110},{xtype:"radio",name:"configType",boxLabel:"Twin",inputValue:"twin",width:120},{xtype:"radio",name:"configType",boxLabel:"Queen",inputValue:"queen",width:65},{xtype:"radio",name:"configType",boxLabel:"King",inputValue:"king",width:65},{html:" ",width:110},{xtype:"checkbox",boxLabel:"Rollaway",name:"rollaway",width:120},{xtype:"checkbox",boxLabel:"Crib",name:"crib",width:115}]},{xtype:"textfield",fieldLabel:"Cruise Line",name:"name",width:280}]}]},{title:"Additional Info",layout:"fit",items:{xtype:"textarea",name:"description",height:190,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:true,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}},{title:"Extras",layout:"fit",items:{xtype:"textarea",name:"extraNotes",height:200,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:true,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}},{title:"Passengers",items:[{xtype:"panel",border:false,style:"margin-bottom: 6px;",html:"<p>Please select the passengers for this booking below.</p>"},{xtype:"panel",border:false,layout:"fit",height:460,items:[{xtype:"editorgrid",store:new Ext.data.CollectionStore({url:"",identifier:"",fields:["type","code","nameFirst","nameLast","salutation","displayName","dateOfBirth","rateURI","paxAge"]}),viewConfig:{forceFit:true},getData:function(){var b=this.selModel.getSelections();var c=[];for(var a=0;a<b.length;a++){c[a]=b[a].get("dataURI")}return c},preselect:function(c,b){var a=[];this.getStore().each(function(d){if(a.length>=b){return false}if((!c||d.get("type")==c)&&d.get("nameFirst")&&d.get("nameLast")){a[a.length]=d}},this);if(a.length>0){this.getSelectionModel().selectRecords(a)}return a.length},validatePassenger:function(d,a,c,b){if(!b.get("nameFirst")&&!b.get("nameLast")){return false}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Type",dataIndex:"type",width:40,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",displayField:"text",valueField:"text",triggerAction:"all",tpl:'<tpl for="."><div class="x-combo-list-item">{text}, <span style="font-style: italic; font-size: 10px; color: #999;">{description}</span></div></tpl>',store:TDS.data.passengerType})},{header:"Title",dataIndex:"salutation",width:40,fixed:true,editor:new Ext.form.ComboBox({store:TDS.data.salutations,editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text"})},{header:"First name",dataIndex:"nameFirst",editor:new Ext.form.TextField({allowBlank:false})},{header:"Last name",dataIndex:"nameLast",editor:new Ext.form.TextField({allowBlank:false})},{header:"Age",dataIndex:"paxAge",width:40,renderer:function(c,b,a){if(c){return c}else{return TDS.util.Format.age(a.get("dateOfBirth"))}},editor:new Ext.form.NumberField({allowBlank:false})}],bbar:[{xtype:"button",text:"Add",handler:function(){var b=this.ownerCt.items.itemAt(1);var a=this.ownerCt.items.itemAt(2);a.enable();b.enable();this.disable();var d=this.ownerCt.ownerCt;var c=d.getStore();c.add([new c.recordType({type:"AD",nameFirst:"",nameLast:"",paxAge:""})]);d.newRecordIndex=c.getCount()-1;d.startEditing(d.newRecordIndex,2)}},{xtype:"button",text:"Cancel",disabled:true,handler:function(){var c=this.ownerCt.items.itemAt(0);var b=this.ownerCt.items.itemAt(2);c.enable();b.disable();var d=this.ownerCt.ownerCt;var a=d.getStore().getAt(d.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}d.getStore().remove(a);this.disable()}},{xtype:"button",text:"Save",disabled:true,handler:function(){var b=this.ownerCt.findParentByType("awesomewindow");var e=this.ownerCt.ownerCt;var d=this.ownerCt.items.itemAt(0);var c=this.ownerCt.items.itemAt(1);c.disable();this.disable();var a=e.getStore().getAt(e.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}Ext.Ajax.request({url:TDS.env.dataPath+b.aw.data.pnrDataURI+"/passengers",jsonData:a.data,method:"POST",callback:function(h,f,g){if(f){e.getStore().load();grid.getView().refresh();d.enable()}else{c.enable();this.enable()}},scope:this})}}],listeners:{beforeedit:function(a){},render:function(){var w=this.ownerCt.findParentByType("awesomewindow");this.getSelectionModel().on("beforerowselect",this.validatePassenger,this);with(this.store){reader.meta.identifier=w.aw.data.pnrDataURI+"/passengers";proxy.conn.url=TDS.env.dataPath+w.aw.data.pnrDataURI+"/passengers/concise";load()}}}}]}]}]}]}