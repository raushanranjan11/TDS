{xtype:"form",border:false,width:500,beforeSubmit:function(a){a.type="SIGHTSEEING";a.roomTypesWithPrice=this.items.itemAt(0).getData();return a},items:[{xtype:"editorgrid",height:120,width:530,clicksToEdit:1,store:new Ext.data.JsonStore({url:"",identifier:"",fields:["priceBaseSell","priceBaseCurrency","priceSell","priceCurrency","roomType","status","paxType","type","code","displayName"]}),viewConfig:{forceFit:true},getData:function(){var b=this.getStore().data;for(var a=0,c=[];a<b.length;a++){if(b.items[a].data.paxType==""){b.items[a].data.paxType=b.items[a].data.type}c.push(b.items[a].data)}return{data:c}},columns:[{header:"Name",dataIndex:"displayName",width:150,fixed:true,renderer:function(c,b,a){if(c){return c}}},{header:"Code",dataIndex:"code",width:90,fixed:true},{header:"Price Per Person",dataIndex:"priceSell",width:115,fixed:true,renderer:function(c,b,a){return TDS.util.Price.formatPrice(c,a.get("priceCurrency"))}},{header:"Status",dataIndex:"status",width:100,fixed:true,editor:new Ext.form.ComboBox({store:["Held","XX"],editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"value"})}],listeners:{render:function(){;var d=this;var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var e=Ext.util.JSON.decode(b.supplierParameters);Ext.Ajax.request({url:TDS.env.dataPath+c.aw.sourceDataURI+"/passengers/collection/concise",method:"GET",callback:function(l,f,h){if(f){var g=Ext.util.JSON.decode(h.responseText);var k=g[c.aw.sourceDataURI+"/passengers"];if(typeof k=="undefined"){return}var j=[];for(var a=0;a<k.length;a++){g[k[a]].dataURI=k[a];if(this.pinnable){if(this.isPinned(k[a])){g[k[a]].pinned="1"}else{g[k[a]].pinned="0"}}j.push(g[k[a]])}this.getStore().loadData(j)}},scope:this})}}}]}