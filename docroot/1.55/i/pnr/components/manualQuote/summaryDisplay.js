{xtype:"panel",bodyStyle:"padding: 0px;",border:false,requireStores:[{dataURI:TDS.env.dataPath+"accommodation/ratings/collection",identifier:"accommodation/ratings",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]}],width:750,items:[{xtype:"panel",border:false,height:460,width:750,layout:"form",autoScroll:true,items:[{border:false,html:'<br><center><u><b><font size="3">PRICE SUMMARY</font></b></u></center><br>'},{xtype:"label",border:false},{border:false},{xtype:"grid",enableRowExpander:false,sessionExpandedRows:false,height:382,autoScroll:true,border:false,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,updateGridData:function(f){var e=this;var d=e.getSelections();var c=d[0].data.dataURI;var b=this.findParentByType("awesomewindow");var g=b.aw.data.dataURI;Ext.Ajax.request({url:TDS.env.dataPath+c+"/acceptReject?accept="+f,method:"GET",callback:function(i,a,h){},scope:this})},tbar:["->",{xtype:"button",disabled:true,hidden:true,text:"Accept",handler:function(){var a=this.ownerCt.ownerCt;Ext.Msg.show({title:"Confirmation",msg:"Accept Manual Quote?",buttons:Ext.Msg.YESNO,fn:function(b){if(b=="yes"){a.updateGridData(true)}},animEl:"elId",icon:Ext.MessageBox.QUESTION})}}," ",{xtype:"button",disabled:true,hidden:true,text:"Reject",handler:function(){var a=this.ownerCt.ownerCt;Ext.Msg.show({title:"Confirmation",msg:"Reject Manual Quote?",buttons:Ext.Msg.YESNO,fn:function(b){if(b=="yes"){a.updateGridData(false)}},animEl:"elId",icon:Ext.MessageBox.QUESTION})}}],bbar:[{xtype:"button",text:"Hide",handler:function(){}},{xtype:"button",text:"Show All",disabled:true,handler:function(){}},"->"," ","Grand Total : AUD$ 0000.00"],store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI",,"PNRCode","agencyURI","airportFromIataString","airportFromString","airportFromURI","airportToIataString","airportToString","airportToURI","archived","countryFromCode","countryToCode","createdById","createdByURI","createdByUserFullNameString","createdDate","dataURI","dateFrom","dateTo","entryType","ledger","locationFromString","locationFromURI","locationToString","locationToURI","manualQuoteCanBeConfirmed","manualQuoteLastUpdatedBySupplier","name","offeringURI","parameters","passengerNameRecordURI","passengersTotal","paxDescriptionShortString","pricingPriceBaseCurrency","pricingPriceBaseModifier","pricingPriceBaseSell","pricingPriceCommission","pricingPriceCurrency","pricingPriceIsNett","pricingPriceSell","status","supplierName","supplierURI","transactionPaidAmount","transactionPaidExtraAmount","type","updatedById","updatedByURI","updatedByUserFullNameString","updatedDate"]}),sm:new Ext.grid.CheckboxSelectionModel({singleSelect:true,header:""}),columns:[new Ext.grid.CheckboxSelectionModel({singleSelect:true,header:""}),{header:"Date",dataIndex:"dateTo",sortable:true,width:60,fixed:true,renderer:function(c,b,a){var d=TDS.util.Format.dateSpecial(a.get("dateTo"),TDS.env.dateFormatDisplay);return d}},{header:"Supplier",dataIndex:"supplierName",sortable:true,renderer:function(e,d,a,f,c,b){d.attr='ext:qtip= "Click to view details"';return e}},{header:"Component",dataIndex:"type",width:100,fixed:true,renderer:function(c,b,a){if(c===TDS.data.componentType.TYPE_OWN){return"OA"}else{if(c===TDS.data.componentType.TYPE_MANUAL){return"Manual entry"}else{if(c===TDS.data.componentType.TYPE_SIGHTSEEING){return"Day Tours"}else{if(c===TDS.data.componentType.TYPE_ATTRACTION&&a.get("status")){return"Services"}}}}return c.substring(0,1).toUpperCase()+c.substring(1).toLowerCase()}},{header:"Total Price",dataIndex:"pricingPriceSell",width:80,renderer:function(e,d,a,f,c,b){Ext.getCmp("qwe1").setValue(Ext.getCmp("qwe1").getValue()+a.get("pricingPriceSell"));Ext.getCmp("qwe2").setValue(TDS.util.Price.formatPrice(Ext.getCmp("qwe1").getValue(),a.get("pricingPriceCurrency")));return TDS.util.Price.formatPrice(a.get("pricingPriceSell"),a.get("pricingPriceCurrency"))}},{header:"Status",dataIndex:"status",width:100,renderer:function(c,b,a){var d=a.get("entryType");if(c=="Quote"&&d!="Manual Quote"){Ext.getCmp("has_quotes_id").setValue(true)}if(d=="Manual Quote"&&c=="Quote"){c+=" (M)"}else{if(d=="OA"){c="OA"}}return c}}],viewConfig:{forceFit:true},listeners:{cellclick:function(a,d,b,c){},render:function(){function c(m){;var g=m.data.name;var o=m.data.supplierName;var i=m.data.locationFromString;var n=TDS.util.Format.dateSpecial(m.data.dateFrom,TDS.env.dateFormatDisplay);var q=TDS.util.Format.dateSpecial(m.data.dateTo,TDS.env.dateFormatDisplay);var k=m.data.pricingPriceCurrency;var j=m.data.pricingPriceBaseSell;var p=Ext.util.JSON.decode(m.data.parameters);var l=p.nights;var h=TDS.util.Format.displayResourceName(p.accommodationType);var f=document.getElementById("mq_details_div");f.innerHTML=" <table width=540px border=0> <tr> <td height=30px  colspan=7 ><u><b>"+o+"Travels</b></u><br></td> <td height=30px  colspan=1><u><b>ACCOMMODATION</b></u></td> </tr> <tr> <td height=30px >Property: </td> <td height=30px width=150px> "+g+"</td> <td height=30px ></td> <td height=30px >City: </td> <td height=30px  colspan=4> "+i+"</td>  </tr> <tr> <td height=30px >In: "+n+"</td> <td height=30px > OUT: "+q+"</td> <td height=30px  width=5px></td> <td height=30px >Nights</td> <td height=30px  width=75px> "+l+"</td> <td height=30px  width=5px></td> <td height=30px >Status: </td> <td height=30px > OK</td> </tr>  <tr> <td height=30px >Room Type:</td> <td height=30px  colspan=5>"+h+"</td> <td height=30px >Price P/N: </td> <td height=30px > "+TDS.util.Price.formatPrice(j,k)+"</td> </tr> </table>"}var e=this.topToolbar;this.getSelectionModel().on("rowselect",function(){if(this.getSelections().length>0){e.items.itemAt(1).setDisabled(false);e.items.itemAt(3).setDisabled(false)}},this);this.getSelectionModel().on("rowdeselect",function(){var f=document.getElementById("mq_details_div");if(this.getSelections().length==0){f.innerHTML="";e.items.itemAt(1).setDisabled(true);e.items.itemAt(3).setDisabled(true)}},this);this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var d=this.ownerCt.findParentByType("ajaxpanel");var b=this.findParentByType("awesomewindow");var a=b.aw.data.dataURI;Ext.Ajax.request({url:TDS.env.dataPath+a+"/manualQuotesFromSupplier",method:"GET",callback:function(j,p,g){if(p){var m=Ext.util.JSON.decode(g.responseText);var l=m[a+"/manualQuotesFromSupplier"];if(typeof l=="undefined"){return}var n=[];for(var k=0;k<l.length;k++){m[l[k]].dataURI=l[k];n.push(m[l[k]])}var h=this;var f=h.store;f.loadData(n)}},scope:this})}}},{xtype:"numberfield",id:"qwe1",value:0,hidden:true,fieldLabel:"Total"},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-right: 23px;",border:false,hidden:true,layoutConfig:{columns:2},items:[{xtype:"label",width:330,style:" margin-right: 375px;",html:' <font color="#cc0000"><b>Total Net Price:</b></font> '},{xtype:"textfield",id:"qwe2",width:90,fieldLabel:"Total"}]},{height:210,width:528,border:false,xtype:"label",html:'<div id="mq_details_div" width=  100%; style="border: 1px solid #ccc;"> </div>'}]}],listeners:{render:function(){var c=this.items.itemAt(0);var a=this.findParentByType("awesomewindow");var b=a.aw.data.pnrNo;c.items.itemAt(1).html='&nbsp;&nbsp;<font size="2"><b>PNR No: '+b+"</b> </font><br><br>"}}}