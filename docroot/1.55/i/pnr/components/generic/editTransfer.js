{xtype:"form",border:false,width:690,beforeSubmit:function(a){var b=this.items.itemAt(0).items.itemAt(1).items.itemAt(0).getData();return a},items:[{xtype:"panel",activeTab:0,layoutOnTabChange:true,height:310,width:690,items:[{xtype:"panel",border:false,defaults:{border:false},style:"margin-top: 16px;",items:[{xtype:"panel",items:[{xtype:"label",style:"padding-left:300px;font-size:large;",listeners:{render:function(){var a=this.ownerCt.findParentByType("awesomewindow");this.setText(a.aw.dataURI.componentName)}}}]},{xtype:"panel",layout:"table",style:"margin-bottom: 22px;margin-top: 22px;",border:false,hideBorders:false,layoutConfig:{columns:9},defaults:{border:false},items:[{html:"&nbsp;&nbsp;&nbsp;&nbsp;<b>Mode:</b>",width:50},{xtype:"label",width:200,style:"font-size: larger;font-weight: 800",text:"",listeners:{render:function(){this.setText(this.findParentByType("awesomewindow").initialConfig.scope.config.modetypes);if(this.findParentByType("awesomewindow").initialConfig.scope.config.modetypes==""){this.ownerCt.items.itemAt(0).hide()}}}}]}]},{xtype:"panel",border:false,layout:"fit",height:160,width:687,items:[{xtype:"editorgrid",clicksToEdit:1,height:200,width:570,store:new Ext.data.JsonStore({url:"",identifier:"",fields:["type","code","nameFirst","nameLast","salutation","displayName","dateOfBirth","rateURI","paxAge","roomType","status","priceSell","passengerDepDate","dataURI"]}),viewConfig:{forceFit:true},getData:function(){var b=this.getStore().data;var c=[];for(var a=0;a<b.length;a++){c[a]=b.items[a].data}return c},sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Type",dataIndex:"type",width:40,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",displayField:"text",valueField:"text",triggerAction:"all",tpl:'<tpl for="."><div class="x-combo-list-item">{text}, <span style="font-style: italic; font-size: 10px; color: #999;">{description}</span></div></tpl>',store:TDS.data.passengerType})},{header:"Last Name",dataIndex:"nameLast",width:220},{header:"First Name",dataIndex:"nameFirst",width:220},{header:"DOB",dataIndex:"dateOfBirth",width:100,fixed:true,renderer:function(a,d,c){if(typeof a!="undefined"){if(typeof a!="string"){var b=new Date();b.setTime(Ext.TimerMgr.getServerCalculatedTime());var e=Math.floor((b.getTime()-a.getTime())/(365.25*24*60*60*1000));c.set("paxAge",((e&&e>0)?e:""));return Ext.util.Format.date(a,TDS.env.dateBirthdayFormatDisplay)}else{if(c.get("paxAge")){var e=TDS.util.Format.age(a);c.set("paxAge",((e&&e>0)?e:""))}return TDS.util.Format.dateSpecial(a,TDS.env.dateBirthdayFormatDisplay)}}return TDS.util.Format.dateSpecial(a,TDS.env.dateBirthdayFormatDisplay)}},{header:"Age",dataIndex:"paxAge",width:40,fixed:true,renderer:function(c,b,a){if(c){return c}else{}}},{header:"Price Per Person",dataIndex:"priceSell",width:100,renderer:function(c,b,a){return c}},{header:"Date",dataIndex:"passengerDepDate",width:70},{header:"Status",dataIndex:"status",width:60,fixed:true}],listeners:{render:function(){var a=this.findParentByType("awesomewindow").initialConfig.dataURI.component;Ext.Ajax.request({url:TDS.env.dataPath+a+"/passengers/collection/concise",method:"GET",callback:function(e,k,c){if(k){var h=Ext.util.JSON.decode(c.responseText);var g=h[a+"/passengers"];if(typeof g=="undefined"){return}var j=[];for(var f=0;f<g.length;f++){h[g[f]].dataURI=g[f];j.push(h[g[f]])}var d=this;var b=d.store;b.loadData(j);d.getView().refresh()}},scope:this})}}}]},{xtype:"panel",layout:"table",style:" padding-left: 250px;padding-top:5px; ",border:false,hideBorders:true,layoutConfig:{columns:6},items:[{xtype:"radio",name:"status",boxLabel:"Accept",inputValue:TDS.data.componentStatus.STATUS_CONFIRMED,listeners:{render:function(a){var b=Ext.DomQuery.selectNode("LABEL",this.getEl().dom.parentNode);b.style.fontWeight="bold"}}},{width:50},{xtype:"radio",name:"status",boxLabel:"Reject",inputValue:TDS.data.componentStatus.STATUS_CANCELLED,listeners:{render:function(a){var b=Ext.DomQuery.selectNode("LABEL",this.getEl().dom.parentNode);b.style.fontWeight="bold"}}}]}]}]}