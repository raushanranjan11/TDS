{xtype:"form",border:false,markDataDirtyOnLoad:true,items:[{xtype:"panel",border:false,layout:"table",height:205,layoutConfig:{columns:2},defaults:{border:false,bodyStyle:"padding: 0 0 0 0;"},items:[{items:[{xtype:"panel",style:"padding: 0; margin-top: 0px;",border:true,layout:"table",height:50,width:450,autoScroll:true,layoutConfig:{columns:1},defaults:{border:true,height:50},items:[{xtype:"dataview",autoScroll:true,style:"overflow-y: auto;",width:450,border:true,store:new Ext.data.SimpleStore({fields:["paymentConditions"]}),tpl:new Ext.XTemplate('<tpl for=".">',"<div>",'<h3 class="restriction-item" style="margin-left: 5px;margin-bottom: 2px;"><center><b><u>Payment Conditions</u></b></center></h3>','<p style="margin-bottom: 6px; margin-left: 5px;"><font size="2"><center><b>{paymentConditions}</b></center></font></p>',"</div>","</tpl>"),itemSelector:"h3.restriction-item"}]},{xtype:"panel",style:"padding: 0; margin-top: 0px;",border:true,layout:"table",height:153,width:450,layoutConfig:{columns:1},defaults:{border:true,width:450},items:[{xtype:"dataview",style:"overflow-y: auto;",height:120,hidden:true,store:new Ext.data.SimpleStore({fields:["name","terms"]}),tpl:new Ext.XTemplate('<tpl for=".">',"<div>",'<h3 class="restriction-item" style="margin-left: 5px;margin-bottom: 2px;"><b><center><u>Terms & Conditions</u></center></b></h3>','<h3 class="restriction-item" style="margin-left: 5px;">{name}</h3>','<p style="mlargin-bottom: 6px; margin-left: 5px;">{terms}</p>',"</div>","</tpl>"),itemSelector:"h3.restriction-item",emptyText:"No terms and conditions to display."},{html:"",id:"hotusaterms",height:120}],listeners:{render:function(){;var d=this.ownerCt.ownerCt.findParentByType("ajaxpanel");var c=d.ownerCt.ownerCt.ownerCt.ownerCt.rowRecordData.supplierURI;var h=this.ownerCt.findParentByType("tabpanel");var a=h.getDetail("dataURI");var f=this.items.itemAt(0).store;var g=this.ownerCt.items.itemAt(0).items.itemAt(0).store;var b=this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(0).items.itemAt(0).store;var e=this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(1).items.itemAt(0).store;this.el.mask("","x-mask-loading");Ext.Ajax.request({method:"GET",url:TDS.env.dataPath+a+"/terms",callback:function(B,x,y){if(x){try{var t=Ext.decode(y.responseText)}catch(L){}if(t){;if(c!=TDS.util.Defaults.hotusaSupplier){var u=this.items.itemAt(0);u.show(true);var M=this.ownerCt.items.itemAt(0).html;var w=[],k=[],H=[],n=[],F=f.recordType,E=b.recordType,D=e.recordType,C=g.recordType;for(var I in t){var K=/(PAYMENT&&&&)/;var N=/(OFFERING&&&&)/;var J=/(RATE&&&&)/;var q=/(EXTRA&&&&)/;if(I.match(K)){k[k.length]=new C({paymentConditions:t[I]})}if(I.match(N)){w[w.length]=new F({name:I.replace(N,""),terms:t[I]})}else{if(I.match(J)){H[H.length]=new E({name:I.replace(J,""),terms:t[I]})}else{if(I.match(q)){n[n.length]=new D({name:I.replace(q,""),terms:t[I]})}}}}f.add(w);b.add(H);e.add(n);g.add(k)}else{var j=t.dateOfBook;var l=t.noOfDays;var A=t.hoursOfDay;var z=t.nightsCharged;var m=t.percentageDeduct;var G=t.description;var v=t.termsApply;var p=this.items.itemAt(1);p.show(true);if(v=="1"){v="applies";document.getElementById("hotusaterms").innerHTML="<div style='height:140px;  width:420px; margin-top:5px; margin-right:5px; margin-bottom:5px; margin-right:5px; margin-left:5px;  border:1px solid #ccc; overflow-x:auto ; overflow-y: auto; padding-left:15px;'> <br/><center><u><p><center><b><font size=4>Cancellation Terms</font></b></center></p></u></center><br/><b><p><font size=2>Cancellation fee "+v+" to this booking</font></p><br/><p><font size=2>A cancellation fee will apply to cancellations made <br>within<b> "+l+" days </b>of check in.</font></p><br/><p><font size=2>The hour of check-in is deemed to be "+A+"00 hours.</font></p><br/><p><font size=2>Cancellation Fee  -  "+z+" nights accommodation /"+m+"% of total stay </p></font><br/>"}if(v=="0"){v="not applies";document.getElementById("hotusaterms").innerHTML="<div style='height:125px;  width:410px; margin-top:5px; margin-right:5px; margin-bottom:5px; margin-right:5px; margin-left:5px;  border:1px solid #ccc; overflow-x:auto ; overflow-y: auto; padding-left:15px;'> <br/><center><u><p><center><b><font size=4>Cancellation Terms</font></b></center></p></u></center><br/><b><p><font size=2>Cancellation fee "+v+" to this booking</font></p></div>"}}}}this.el.unmask()},scope:this})}}}]},{xtype:"panel",style:"padding: 0; margin-top: 0px;",border:false,layout:"table",width:document.body.clientWidth-(475),height:203,layoutConfig:{columns:2},defaults:{width:(document.body.clientWidth-(480))/2,height:163},items:[{xtype:"panel",style:"padding: 0; margin-top: 0px;",border:true,layout:"table",height:171,autoScroll:true,layoutConfig:{columns:1},defaults:{border:true,width:(document.body.clientWidth-(480))/2,height:171},items:[{xtype:"dataview",autoScroll:true,style:"overflow-y: auto;",border:true,store:new Ext.data.SimpleStore({fields:["name","terms"]}),tpl:new Ext.XTemplate('<tpl for=".">',"<div>",'<h3 class="restriction-item" style="margin-left: 5px;margin-bottom: 2px;"><b><center><u>Rate Notes</u></center></b></h3>','<h3 class="restriction-item" style="margin-left: 5px;margin-bottom: 2px;">{name}</h3>','<p style="margin-bottom: 6px; margin-left: 5px;">{terms}</p>',"</div>","</tpl>"),itemSelector:"h3.restriction-item",emptyText:"RATE No terms and conditions  to display."}]},{xtype:"panel",style:"padding: 0; margin-top: 0px;",border:true,layout:"table",height:171,autoScroll:true,layoutConfig:{columns:1},defaults:{border:true,width:(document.body.clientWidth-(480))/2,height:171},items:[{xtype:"dataview",autoScroll:true,style:"overflow-y: auto;",store:new Ext.data.SimpleStore({fields:["name","terms"]}),tpl:new Ext.XTemplate('<tpl for=".">',"<div>",'<h3 class="restriction-item" style="margin-left: 5px;margin-bottom: 2px;"><b><center><u>Extra Notes</u></center></b></h3>','<h3 class="restriction-item" style="margin-left: 5px;margin-bottom: 2px;">{name}</h3>','<p style="margin-bottom: 6px; margin-left: 5px;">{terms}</p>',"</div>","</tpl>"),itemSelector:"h3.restriction-item",emptyText:"EXTRA No terms and conditions to display."}]}]}]}]}