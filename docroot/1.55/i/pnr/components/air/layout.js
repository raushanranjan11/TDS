{xtype:"panel",header:true,autoHeight:true,border:false,refreshGrid:function(){var a=this.ownerCt.findParentByType("awesomegrid");a.submitQuery(true)},items:{xtype:"tabpanel",border:false,activeTab:0,layoutOnTabChange:true,height:196,shared:{details:{}},setDetail:function(b,c){if(typeof b=="object"){for(var a in b){this.shared.details[a]=b[a]}}else{this.shared.details[b]=c}},getDetail:function(a){return this.shared.details[a]},items:[{title:"Details",items:{xtype:"panel",border:false,frame:false,layout:"column",autoHeight:true,bodyStyle:"padding: 4px;",items:[{columnWidth:1,border:false,style:"padding: 0px; margin-right: 8px;",xtype:"ajaxpanel",hideBorders:true,height:170,interfaceURI:"pnr/components/air/detail.js"},{width:150,xtype:"panel",autoHeight:true,border:false,bodyStyle:"padding: 4px;",defaults:{minWidth:100},invokeWindow:function(a,b){if(!b){b={}}var d=this.ownerCt.findParentByType("tabpanel");var c=d.ownerCt;Ext.apply(b,{title:"Amend",hidden:true,interfaceURI:"pnr/components/generic/editAir.js",destinationDataURI:d.getDetail("dataURI"),sourceDataURI:d.getDetail("dataURI"),dataURI:{pnr:d.getDetail("pnrDataURI"),offering:d.getDetail("offeringURI"),component:d.getDetail("dataURI")},params:{status:a,priceCurrency:d.getDetail("pricingPriceCurrency")},callback:{fn:function(e){if(e){c.refreshGrid()}},scope:this}});TDS.window.setWindow(b)},listeners:{render:function(){var c=this.items.itemAt(0);var g=this.items.itemAt(1);var d=this.items.itemAt(2);var b=this.items.itemAt(3);var e=this.items.itemAt(4);var f=this.ownerCt.findParentByType("tabpanel");var a=f.getDetail("status");if(a.toLowerCase()==TDS.data.componentStatus.STATUS_CANCELLED.toLowerCase()){c.disable()}if(a.toLowerCase()==TDS.data.componentStatus.STATUS_HELD.toLowerCase()){g.show()}else{if(a.toLowerCase()==TDS.data.componentStatus.STATUS_CONFIRMED.toLowerCase()){}else{if(a.toLowerCase()==TDS.data.componentStatus.STATUS_CANCEL_REQUESTED.toLowerCase()){b.show()}else{if(a.toLowerCase()==TDS.data.componentStatus.STATUS_REQUESTED.toLowerCase()){e.show()}else{if(a.toLowerCase()==TDS.data.componentStatus.STATUS_RELEASED.toLowerCase()){c.disable()}}}}}}},items:[{xtype:"button",text:"Amend",hidden:true,handler:function(){var a=this.ownerCt;a.invokeWindow("doNothing")}},{xtype:"button",text:"Confirm",hidden:true,handler:function(){var a=this.ownerCt;a.invokeWindow(TDS.data.componentStatus.STATUS_CONFIRMED)}},{xtype:"button",text:"Cancel",hidden:true,handler:function(){var b=this.ownerCt;var c=this.ownerCt.findParentByType("tabpanel");var a=c.getDetail("status");if(!a){return}b.invokeWindow(TDS.data.componentStatus.STATUS_CANCELLED)}},{xtype:"button",text:"Re-secure",hidden:true,handler:function(){var a=this.ownerCt;a.invokeWindow(TDS.data.componentStatus.STATUS_CONFIRMED)}},{xtype:"button",text:"Release",hidden:true,handler:function(){var a=this.ownerCt;a.invokeWindow(TDS.data.componentStatus.STATUS_RELEASED)}},{xtype:"button",text:"Note",handler:function(){var b=this.ownerCt.findParentByType("tabpanel");var a=b.getDetail("dataURI");TDS.window.setWindow({title:"Send a note",information:"Please enter your note below.",interfaceURI:"note.js",postDataURI:a+"/note",callback:{fn:function(c){},scope:this}})}},{xtype:"timerlabel",expire:function(){var a=this.ownerCt;a.items.itemAt(0).disable();a.items.itemAt(1).disable();this.setText("Expired.")},listeners:{render:function(){var d=this.ownerCt.findParentByType("tabpanel");var b=d.getDetail("dataURI");var a=d.getDetail("timeHeldUntil");if(!b||!a){this.hide();var c=Ext.TimerMgr.lookup(b);if(c){Ext.TimerMgr.stop(c)}return}var e=new Ext.Timer({id:b,expireTime:a});var c=Ext.TimerMgr.start(e);this.setTimer(c)},timerexpire:{fn:this.expire,scope:this}}}]}]}},{title:"Queues",items:{xtype:"ajaxpanel",height:190,interfaceURI:"pnr/components/generic/messages.js"}}]},listeners:{render:function(){var d=this.ownerCt;var b=this.ownerCt.ownerCt;var e=this.items.itemAt(0);var e=this.items.itemAt(0);e.setDetail(d.rowRecordData);e.setDetail("pnrDataURI",b.ownerCt.ownerCt.baseDataURI);var c=d.rowRecordData.supplierURI;if(c){var a=TDS.util.Format.displayResourceConciseName(c)}this.setTitle(d.rowRecordData.name+" ("+a+")")}}}