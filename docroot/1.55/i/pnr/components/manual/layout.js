{requireStores:[{dataURI:TDS.env.dataPath+"accommodation/ratings/collection",identifier:"accommodation/ratings",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]},{dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"tour/types/collection",identifier:"tour/types",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"transfer/modetypes/collection",identifier:"transfer/modetypes",fields:["name","dataURI"]}],xtype:"panel",border:false,header:true,height:320,layout:"column",bodyStyle:"padding: 2px;",refreshGrid:function(){var a=this.ownerCt.findParentByType("awesomegrid");a.submitQuery(true)},items:[{xtype:"panel",height:320,border:false,frame:false,layout:"column",columnWidth:1,items:[{columnWidth:0.5,xtype:"panel",height:320,border:false,items:[{tbar:[{xtype:"button",hidden:true,text:"Edit Pay By",handler:function(){if(this.menu==null){this.menu=new Ext.menu.DateMenu();Ext.apply(this.menu.picker,{format:TDS.env.dateFormatDisplay,showToday:false});this.menu.picker.setValue(new Date());this.menu.on("select",function(e,b){var d=this.ownerCt.findParentByType("ajaxpanel");var a=d.rowRecordData.dataURI;document.getElementById("ttlDate#"+a).innerHTML='<span style="font-size:12px">'+b.format(TDS.env.dateFormatDisplay)+"</span>";this.topToolbar.items.itemAt(1).setValue(b);this.topToolbar.items.itemAt(2).enable(true)},this.ownerCt.ownerCt)}this.menu.show(this.el,"tl-bl?")}},{xtype:"datefield",hidden:true},{xtype:"button",text:"Save",hidden:true,disabled:true,handler:function(){var c=this.ownerCt.findParentByType("ajaxpanel");var a=c.rowRecordData.dataURI;var b=this.ownerCt.ownerCt.topToolbar.items.itemAt(1).getValue();if(b!=null){Ext.Ajax.request({url:TDS.env.dataPath+a+"/updatePayBYDate?payByDate="+b.format(TDS.env.dateFormat)+"&payBYStringDate="+b.format(TDS.env.dateFormatDisplay),method:"PUT",scope:this,callback:function(f,d,e){if(d){p.refreshGrid()}}})}}},"->",{xtype:"button",buttonAlign:"right",text:"Additional Info",handler:function(){var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;if(!a){return}TDS.window.setWindow({title:"Accommodation PNR",interfaceURI:"pnr/components/generic/additionalInfo.js",sourceDataURI:a+"/additionalInfo",destinationDataURI:a+"/additionalInfo"})}}],xtype:"panel",border:false,autoHeight:true,minHeight:140,autoScroll:true}],listeners:{render:function(){;var b1=this.ownerCt.findParentByType("ajaxpanel");var G=b1.rowRecordData.status;var aZ=Ext.util.JSON.decode(b1.rowRecordData.parameters);var bm=b1.rowRecordData.type;var cr="";if(aZ.accommodationType){cr=TDS.util.Format.displayResourceName(aZ.accommodationType)}var cp=b1.rowRecordData.extraNotes;cp=cp.replace(/\n/g,"<br>");cp=cp.replace(/ /g,"&nbsp;");var aS="";var av="";aS='<div style="height:90px;"><div  style="height:90px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>'+cp+'</b></div><div  style="height:90px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>'+cp+"</b></div></div>";var bx='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Address:'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+cp+"</b></div></div>";var bT='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Descriptin:'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+cp+"</b></div></div>";var aU='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+"</b></div></div>";var co='<div style="height:90px;"><div  style="height:90px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+'</b></div><div  style="height:90px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+"</b></div></div>";var cl='<div style="height:90px;"><div  style="height:90px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>'+cp+'</b></div><div  style="height:90px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>'+cp+"</b></div></div>";var au='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Options:'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+cp+"</b></div></div>";var P='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Special Services:'+cp+"</b></div></div>";var bf='<div style="height:90px;"><div  style="height:94px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Dinning Preference & Table Size:'+cp+'</b></div><div  style="height:94px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+cp+"</b></div></div>";var ah='<div style="height:90px;"><div  style="height:90px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+'</b></div><div  style="height:90px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+"</b></div></div>";var w="";if(b1.rowRecordData.pricingPriceBaseSell){var bS="";if(aZ.baseTax){bS=parseInt(aZ.baseTax).toFixed(2);bS=b1.rowRecordData.pricingPriceBaseCurrency+bS}var E="";if(aZ.baseOptional){E=parseInt(aZ.baseOptional).toFixed(2);E=b1.rowRecordData.pricingPriceBaseCurrency+E}var bX="";var a7="Gross";if(b1.rowRecordData.pricingPriceIsNett){a7="Nett"}else{bX=(b1.rowRecordData.pricingPriceCommission*100/b1.rowRecordData.pricingPriceBaseSell);bX=bX.toFixed(2)+"%"}var b3="";b3+="<tr>";b3+="<td >"+b1.rowRecordData.pricingPriceBaseCurrency+b1.rowRecordData.pricingPriceBaseSell.toFixed(2);+"</td>",b3+="<td >"+bS+"</td>",b3+="<td >"+E+"</td>",b3+="<td >Person</td>",b3+="<td >"+b1.rowRecordData.passengersTotal+"</td>",b3+="<td >"+a7+"</td>",b3+="<td >"+bX+"</td>",b3+="</tr>";w='</br><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Price</th><th style="padding: 2px; width: 14%;">Tax</th><th style="padding: 2px; width: 14%;">Optional</th><th style="padding: 2px; width: 14%;">Per</th><th style="padding: 2px; width: 14%;">No.</th><th style="padding: 2px; width: 14%;">Gross/Nett</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+b3+"</table>"}var V="";var b5="";var bl="";var o="undefined";if(b1.rowRecordData.parameters!=""){o=Ext.util.JSON.decode(b1.rowRecordData.parameters)}var b8=b1.rowRecordData.pricingPriceCurrency;if(bm==TDS.data.componentType.TYPE_TOUR){;var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var aD="";var bw=TDS.util.Format.displayResourceName(br.tourTypeURI);var M="";if(typeof o!="undefined"&&typeof o.roomTypesWithPrice!="undefined"&&o.roomTypesWithPrice!=""){var cj=Ext.util.JSON.decode(o.roomTypesWithPrice);if(typeof cj!="undefined"){M=cj.data}}var G=b1.rowRecordData.status;var S=b1.rowRecordData.durationNights;var cu=b1.rowRecordData.durationDays;var aC=b1.rowRecordData.name;if(typeof o!="undefined"&&typeof o.durationNights!="undefined"){S=o.durationNights}if(typeof o!="undefined"&&typeof o.durationDays!="undefined"){cu=o.durationDays}if(typeof o!="undefined"&&typeof o.name!="undefined"){aC=o.name}var R=TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay);var k=TDS.util.Format.dateSpecial(b1.rowRecordData.dateTo,TDS.env.dateFormatDisplay);if(typeof o!="undefined"&&typeof o.dateFrom!="undefined"){R=TDS.util.Format.dateSpecial(o.dateFrom,TDS.env.dateFormatDisplay)}if(typeof o!="undefined"&&typeof o.dateTo!="undefined"){k=TDS.util.Format.dateSpecial(o.dateTo,TDS.env.dateFormatDisplay)}var a0="";if(R&&k){a0=R+" - "+k}else{if(k){a0=k}else{if(R){a0=R}}}var aq="<tr>";aq+='<td height="20" align=center><b>'+aC+"</b></td>";aq+="<td align=center> <b>"+bw+"</b></td>";aq+="<td align=center>;<b>"+b1.rowRecordData.locationFromString+"</b></td>";aq+="<td align=center><b>"+a0+"</b></td>";aq+="<td align=center > <b> "+b1.rowRecordData.locationToString+"</b></td>";aq+="<td align=center><b>"+S+" Nights "+cu+" Days</b></td>";aq+="</tr>";var aN=0,B=0,ad=0,b8=b1.rowRecordData.pricingPriceCurrency;var am="";var bs=0;var b6=Ext.util.JSON.decode(br.gridData).data;if(typeof M=="undefined"||M==""||M.length<0){am+="<tr>";am+='<td height="20"> </td>',am+='<td height="1"> </td>',am+='<td height="1"> </td>',am+='<td height="1"> </td>',am+='<td height="1"> </td>',am+="</tr>"}else{var bp=[];var T=0;for(var bJ=0;bJ<M.length;bJ++){var cr=cj.data[bJ].roomType;bp.push(cr);var bW=0;var cc=0;var W=0;for(var bI=0;bI<b6.length;bI++){if(b6[bI].roomType==cr){bW=b6[bI].a;cc=b6[bI].c;W=b6[bI].i}}var cb=cj.data[bJ].paxType;var I=cj.data[bJ].extras;var ce=0;if(cb=="AD"){ce=bW}if(cb=="CH"){ce=cc}if(cb=="IN"){ce=W}var b0=cj.data[bJ].priceSell;bs+=b0*ce;am+="<tr>";am+='<td height="20" align="center"><b>'+cr+"</b></td>",am+='<td height="1" align="center"> <b>'+cb+"</b></td>",am+='<td height="1" align="center"><b>'+ce+" </b></td>",am+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice(b0,b8)+"</b></td>",am+='<td height="1" align="center"><b>'+G+" </b></td>",am+="</tr>"}}var a2=0;var r=0;var a6=[];for(var bJ=0;bJ<b6.length;bJ++){var cr=b6[bJ].roomType;if(a6.indexOf(cr)!=-1){continue}a6.push(cr);var I=b6[bJ].extras;aD+=" <table border=0 cellpadding = 1 cellspacing=1 >";aD+="<tr>";aD+="<th>Room Type:&nbsp;&nbsp;&nbsp;"+cr+"</th>";aD+="</tr>";if(typeof o=="undefined"||typeof o.extrasWithPricing=="undefined"||o.extrasWithPricing==""){if(I!=" "){I=I.split(",");for(var bI=0;bI<I.length;bI++){var ct=I[bI];if(ct!=" "){aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>AUD 0.00</b> </td></table></td>',aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',aD+="</tr>"}}}}else{var bF=Ext.util.JSON.decode(o.extrasWithPricing).data;for(var by=0;by<bF.length;by++){var aW=bF[by].roomType;if(cr==aW){var ct=bF[by].extras;var G=bF[by].status;var K=bF[by].priceSell;if(!K||K==""){K=0}var x=bF[by].taxSell;if(!x||x==""){x=0}r+=K;a2+=(K+x);aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>'+TDS.util.Price.formatPrice((K+x),b8)+"</b> </td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",aD+="</tr>"}}}aD+="</table>"}var al="";var b9=b1.rowRecordData.pricingPriceCommission;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];if(typeof bg=="undefined"||bg==null||bg==""){bg=0}var al="";var ao=b1.rowRecordData.pricingPriceIsNett;if(b1.rowRecordData.pricingPriceSell||b1.rowRecordData.pricingPriceSell==0){al+="<tr>";al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(bs,b8)+"</b></td>",al+='<td height="1" align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>",al+='<td height="1" align="center"><b>'+TDS.util.Price.formatPrice(a2,b8)+"</b></td>";if(ao){al+='<td height="1" align="center"> <b>'+b9.toFixed(2)+"</b></td>"}else{al+='<td height="1"> </td><b></b></td>'}al+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice((bs+a2),b8)+"</b></td>";if(ao){al+='<td height="1"> </td><b></b></td>'}else{al+='<td height="1" align="center"> <b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}al+="</tr>"}else{al+="<tr>";al+='<td height="20"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+="</tr>"}bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 25%;">Tour Name</th>','<th style="padding: 2px; width: 22%;">Type</th>','<th style="padding: 2px; width: 20%;">Dep City</th>','<th style="padding: 2px; width: 33%;">Dep Date/Range</th>','<th style="padding: 2px; width: 18%;">Arr City</th>','<th style="padding: 2px; width: 20%;">Duration</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Room Type</th>','<th style="padding: 2px; width: 20%;">Passenger Type</th>','<th style="padding: 2px; width: 10%;">No</th>','<th style="padding: 2px; width: 20%;">Price Per Person</th>','<th style="padding: 2px; width: 10%;">Status</th>',"</tr>",am,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #C0D9D9;">','<th style="padding: 2px; width: 14%;">Tour Price</th>','<th style="padding: 2px; width: 13%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;">Extras(Nett)</th>','<th style="padding: 2px; width: 14%;">Markup</th>','<th style="padding: 2px; width: 20%;">Total Price (Gross)</th>','<th style="padding: 2px; width: 7%;">Comm</th>',"</tr>",al,"</table>","<br>",'<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Address: </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+aD+"</b></div></div>"]}else{if(bm==TDS.data.componentType.TYPE_SIGHTSEEING){;var aU='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+"</b></div></div>";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var bY=br.tourName;var cw=TDS.util.Format.displayResourceName(br.mainRooms);var cj=Ext.util.JSON.decode(br.gridData);var M="";if(typeof cj!="undefined"){M=cj.data}var G=b1.rowRecordData.status;var aL=b1.rowRecordData.durationNights;if(typeof aL=="undefined"){aL=""}else{aL=aL+" Nights "}var Q=b1.rowRecordData.durationDays;if(typeof Q=="undefined"){Q=""}else{Q=Q+" Days"}var aq="";var am="";var b2=0;if(typeof M!="undefined"){if(M.length=="0"&&M.length<1){am+="<tr>";am+='<td height="20" >&nbsp;</td>',am+="<td > </td>",am+="<td > </td>",am+="<td >  </td>",am+="<td > </td>",am+="</tr>"}var bC=0;var N=0;var a9=0;for(var bJ=0;bJ<M.length;bJ++){var bY=cj.data[bJ].tourName;var bV=cj.data[bJ].no;if(cj.data[bJ].a!=""){bC+=parseInt(cj.data[bJ].a)}if(cj.data[bJ].c!=""){N+=parseInt(cj.data[bJ].c)}if(cj.data[bJ].i!=""){a9+=parseInt(cj.data[bJ].i)}aq+="<tr>";aq+='<td height="20" align="center">&nbsp;<b>'+bY+"</b></td>";aq+='<td align="center"><b>'+cj.data[bJ].departs+"</b></td>";aq+='<td align="center"><b>'+cj.data[bJ].dateFrom+"</b></td>";aq+='<td align="center"><b>'+cj.data[bJ].duration+"</b></td>";aq+="</tr>"}var Y=0;var t=0;var ar=0;var cj="";if(o!="undefined"&&o!=""&&o.roomTypesWithPrice!="undefine"&&o.roomTypesWithPrice!=""){cj=Ext.util.JSON.decode(o.roomTypesWithPrice)}var a4="";if(typeof cj!="undefined"&&cj!=""){a4=cj.data}for(var bJ=0;bJ<a4.length;bJ++){if(a4[bJ].paxType=="AD"){Y=a4[bJ].priceSell}if(a4[bJ].paxType=="CH"){t=a4[bJ].priceSell}if(a4[bJ].paxType=="IN"){ar=a4[bJ].priceSell}}b2=(bC*Y)+(N*t)+(a9*ar);if(bC>0){am+="<tr>";am+='<td height="20" align="center"><b>Adult</b> </td>',am+='<td align="center"><b>'+bC+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(Y,b8)+"</b></td>",am+='<td align="center"><b> '+G+"</td>",am+="</tr>"}if(N>0){am+="<tr>";am+='<td height="20" align="center" ><b>Child</b></td>',am+='<td align="center"><b>'+N+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(t,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(a9>0){am+="<tr>";am+='<td height="20" align="center"><b>Infant</b></td>',am+='<td align="center"><b>'+a9+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(ar,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}}else{aq="<tr>";aq+='<td height="20" align="center"> </b></td>';aq+='<td align="center"><b>'+b1.rowRecordData.locationFromString+"</b></td>";aq+='<td align="center"><b>'+TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay)+"</b></td>";aq+='<td align="center"><b>'+aL+Q+"</b></td>";aq+="</tr>";am+="<tr>";am+='<td height="20" align="center"> </td>',am+='<td align="center"></td>',am+='<td align="center"></td>',am+='<td align="center"></td>',am+="</tr>"}var an=0;var al="<tr>";var b9=b1.rowRecordData.pricingPriceCommission;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];var ao=b1.rowRecordData.pricingPriceIsNett;if(typeof bg=="undefined"||bg==null||bg==""){bg=0}if(b1.rowRecordData.pricingPriceSell||b1.rowRecordData.pricingPriceSell==0){al+="<tr>";al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(b2,b8)+"</b></td>",al+='<td height="1" align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>";if(ao){al+='<td height="1" align="center"> <b>'+b9.toFixed(2)+"</b></td>"}else{al+='<td height="1"> </td><b></b></td>'}al+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice((b2),b8)+"</b></td>";if(!ao){al+='<td height="1" align="center"> <b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{al+='<td height="1"> </td><b></b></td>'}al+="</tr>"}else{al+="<tr>";al+='<td height="20"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+="</tr>"}bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 25%;">Tour Name</th>','<th style="padding: 2px; width: 18%;">City</th>','<th style="padding: 2px; width: 15%;">Dep Date</th>','<th style="padding: 2px; width: 15%;">Duration</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 20%;">Passenger Type</th>','<th style="padding: 2px; width: 14%;">No</th>','<th style="padding: 2px; width: 14%;">Price Per Person</th>','<th style="padding: 2px; width: 10%;">Status</th>',"</tr>",am,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Tour Price</th>','<th style="padding: 2px; width: 14%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;">Markup</th>','<th style="padding: 2px; width: 24%;">Total Price (Gross)</th>','<th style="padding: 2px; width: 14%;">Comm</th>',"</tr>",al,"</table>"]}else{if(bm==TDS.data.componentType.TYPE_TRANSFER){;var co='<div style="height:90px;"><div  style="height:90px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+'</b></div><div  style="height:90px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+cp+"</b></div></div>";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var aj=br.dropOffLocation;var bi=br.dropOffLocationDetails;var bc=br.pickUpLocation;var aI=br.pickUpLocationDetails;var R=TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay);var aF=br.startTimeHrs;var bj=br.startTimeMin;var aR=br.totalPax;var bO=TDS.util.Format.displayResourceName(br.typeClassCategory);var G=b1.rowRecordData.status;var cw=TDS.util.Format.displayResourceName(br.mainRooms);var cj=Ext.util.JSON.decode(cw);var M="";var al="";if(typeof cw!="undefined"){M=cj.data}if(M.length=="0"&&M.length<1){al+="<tr>";al+='<td height="20" align="center"><b></b></td>',al+='<td height="20" align="center"><b></b></td>',al+='<td height="20" align="center"><b></b></td>',al+='<td height="20" align="center"><b></b> </td>';al+="</tr>"}var Y=0;var t=0;var ar=0;var b2=0;if(typeof o!="undefined"&&typeof o.roomTypesWithPrice!="undefined"&&o.roomTypesWithPrice!=""){var cj=Ext.util.JSON.decode(o.roomTypesWithPrice)}var a4="";if(typeof cj!="undefined"){a4=cj.data}for(var bJ=0;bJ<a4.length;bJ++){if(a4[bJ].paxType=="AD"){Y=a4[bJ].priceSell}if(a4[bJ].paxType=="CH"){t=a4[bJ].priceSell}if(a4[bJ].paxType=="IN"){ar=a4[bJ].priceSell}}for(var bJ=0;bJ<M.length;bJ++){var bC=0;var N=0;var a9=0;if(typeof cw!="undefined"){var cw=Ext.util.JSON.decode(br.mainRooms);for(var bI=0;bI<cw.data.length;bI++){if(cw.data[bJ].a!=""){bC=parseInt(cw.data[bI].adult)}if(cw.data[bJ].c!=""){N=parseInt(cw.data[bI].child)}if(cw.data[bJ].i!=""){a9=parseInt(cw.data[bI].infant)}}}b2=(bC*Y)+(N*t)+(a9*ar);if(bC>0){al+="<tr>";al+='<td height="20" align="center"><b>Adult</b></td>',al+='<td height="20" align="center"><b>'+bC+"</b></td>",al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(Y,b8)+"</b></td>",al+='<td height="20" align="center"><b>'+G+"</b> </td>";al+="</tr>"}if(N>0){al+="<tr>";al+='<td height="20" align="center"><b>Child</b></td>',al+='<td height="20" align="center"><b>'+N+"</b></td>",al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(t,b8)+"</b></td>",al+='<td height="20" align="center"><b>'+G+"</b> </td>";al+="</tr>"}if(a9>0){al+="<tr>";al+='<td height="20" align="center"><b>Infant</b></td>',al+='<td height="20" align="center"><b>'+a9+"</b></td>",al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(ar,b8)+"</b></td>",al+='<td height="20" align="center"><b>'+G+"</b> </td>";al+="</tr>"}}var aq="<tr>";aq+='<td  height="20" align="center"><b> '+b1.rowRecordData.locationFromString+"</b></td>";aq+='<td align="center"> <b>'+bc+"</b></td>";aq+='<td align="center"> <b> '+aj+"</b></td>";aq+='<td align="center"> <b> '+R+"</b></td>";aq+='<td align="center"> <b> '+aF+bj+"</b></td>";aq+='<td align="center"> <b> '+bO+"</b></td>";aq+="</tr>";var am="<tr>";am+='<td style="padding: 2px; width: 14%; height:30px; align="center"><b>'+aI+" </b></td>";am+='<td style="padding: 2px; width: 14%; height:30px; align="center"><b>'+bi+"</b></td>";am+="</tr>";var b8=b1.rowRecordData.pricingPriceCurrency;var an=0;var ak="<tr>";var b9=b1.rowRecordData.pricingPriceCommission;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];var ao=b1.rowRecordData.pricingPriceIsNett;if(typeof bg=="undefined"||bg==null||bg==""){bg=0}if(b1.rowRecordData.pricingPriceSell||b1.rowRecordData.pricingPriceSell==0){ak+="<tr>";ak+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(b2,b8)+"</b></td>",ak+='<td height="1" align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>";if(ao){ak+='<td height="1" align="center"> <b>'+b9.toFixed(2)+"</b></td>"}else{ak+='<td height="1"> </td><b></b></td>'}ak+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice((b2),b8)+"</b></td>";if(!ao){ak+='<td height="1" align="center"> <b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{ak+='<td height="1"> </td><b></b></td>'}ak+="</tr>"}else{ak+="<tr>";ak+='<td height="20"> </td>',ak+='<td height="1"> </td>',ak+='<td height="1"> </td>',ak+='<td height="1"> </td>',ak+="</tr>"}bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 20%;">City </th>','<th style="padding: 2px; width: 20%;">Pick Up</th>','<th style="padding: 2px; width: 20%;">Drop off </th>','<th style="padding: 2px; width: 14%;">Date </th>','<th style="padding: 2px; width: 14%;">Time </th>','<th style="padding: 2px; width: 14%;">Mode </th>',"</tr>",aq,"</table>",' <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">P/U Details</th>','<th style="padding: 2px; width: 14%;">D/O Details</th>',"</tr>",am,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Passenger Type</th>','<th style="padding: 2px; width: 14%;">No</th>','<th style="padding: 2px; width: 14%;">Price Per Person</th>','<th style="padding: 2px; width: 14%;">Status</th>',"</tr>",al,"</table>",' <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Price</th>','<th style="padding: 2px; width: 10%;">Gross/Net</th>','<th style="padding: 2px; width: 10%;">Total Markup</th>','<th style="padding: 2px; width: 24%;">Total Price (Gross)</th>','<th style="padding: 2px; width: 14%;">Comm</th>',"</tr>",ak,"</table>"]}else{if(bm==TDS.data.componentType.TYPE_ACCOMMODATION){;var a2=0;var r=0;var bx="";var aD="";var aq="";var am="";var al="";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var bQ=Ext.util.JSON.decode(br.noOfNights);var aX="";var aR="";if(typeof br!="undefined"&&br!=""&&typeof br.totalPax!="undefined"&&br.totalPax!=""){aR=Ext.util.JSON.decode(br.totalPax)}if(typeof br!="undefined"&&br!=""&&typeof br.typeClassCategory!="undefined"&&br.typeClassCategory!=""){aX=TDS.util.Format.displayResourceName(br.typeClassCategory)}if(typeof o!="undefined"&&typeof o.roomTypesWithPrice!="undefined"&&o.roomTypesWithPrice!=""){var cj=Ext.util.JSON.decode(o.roomTypesWithPrice);if(typeof cj!="undefined"){M=cj.data}}var a5=TDS.util.Format.displayResourceName(br.rating);var v=br.address;var ai=br.city;var aC=b1.rowRecordData.name;if(typeof o!="undefined"&&typeof o.address!="undefined"){if(o.address!=v){v='<font color="red">'+o.address+"</font>"}}if(typeof o!="undefined"&&typeof o.city!="undefined"){if(o.city!=ai){ai='<font color="red">'+o.city+"</font>"}}if(typeof o!="undefined"&&typeof o.name!="undefined"){if(o.name!=aC){aC='<font color="red">'+o.name+"</font>"}}var bP=br.hotelPU;var cw=TDS.util.Format.displayResourceName(br.mainRooms);var G=b1.rowRecordData.status;if(typeof cw!="undefined"){var cw=Ext.util.JSON.decode(br.mainRooms);var bC=cw.data[0].adult;var N=cw.data[0].child;var n=cw.data[0].childAge;var a9=cw.data[0].infant;var aJ=cw.data[0].infantAge}aq="<tr>";aq+='<td  height="20" align="center"> <b> '+b1.rowRecordData.locationFromString+"</b></td>";aq+='<td height="2" align="center"> <b>'+aC+"</b></td>";aq+='<td height="2" align=center>&nbsp;<b>'+a5+"</b></td>";aq+='<td height="2" align=center><b>'+TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay)+"</td>";aq+='<td height="2" align=center><b>'+TDS.util.Format.dateSpecial(b1.rowRecordData.dateTo,TDS.env.dateFormatDisplay)+"</b> </td>";aq+='<td height="2" align=center><b>'+bQ+"</b></td>";aq+="</tr>";var aN=0,B=0,ad=0,b8=b1.rowRecordData.pricingPriceCurrency;var M="";if(typeof cj!="undefined"){M=cj.data}else{am+="<tr>";am+='<td height="20" > </td>',am+='<td height="1">  </td>',am+='<td height="1">  </td>',am+='<td height="1" >  </td>',am+='<td height="1">   </td>',am+='<td height="1">  </td>',am+='<td height="1"> </td>',am+="</tr>"}var cr="";if(typeof M!="undefined"||M==""){if(M.length<0){am+="<tr>";am+='<td height="20"> </td>',am+='<td height="20"> </td>',am+='<td height="1"> </td>',am+='<td height="1"> </td>',am+='<td height="1"> </td>',am+='<td height="1"> </td>',am+="</tr>"}else{var bp=[];var T=0;for(var bJ=0;bJ<M.length;bJ++){var cr=cj.data[bJ].roomType;if(bp.indexOf(cr)!=-1){continue}bp.push(cr);var g=0;for(var bI=0;bI<M.length;bI++){if(M[bI].roomType==cr){g++}}var aQ=0;var az=0;;if(typeof o!="undefined"&&typeof o.roomTypesWithPrice!="undefined"&&o.roomTypesWithPrice!=""){var cs=Ext.util.JSON.decode(o.roomTypesWithPrice).data;for(var bD=0;bD<cs.length;bD++){if(cr==cs[bD].roomType){aQ=cs[bD].priceSell*g*bQ;az=cs[bD].priceSell;T+=aQ}}}var bN=cj.data[bJ].a;var bM=cj.data[bJ].c;var U=cj.data[bJ].category;var I=cj.data[bJ].extras;var L=cj.data[bJ].plan;var l=cj.data[bJ].roomNo;var ae=cj.data[bJ].rooms;am+="<tr>";am+='<td height="20" align="center"><b>'+cr+"</b></td>",am+='<td height="1" align="center"> <b>'+U+"</b></td>",am+='<td height="1" align="center"><b>'+L+" </b></td>",am+='<td height="1" align="center"><b>'+g+"</b> </td>",am+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice(az,b8)+"</b></td>",am+='<td height="1" align="center"><b>'+G+" </b></td>",am+="</tr>";aD+=" <table border=0 cellpadding = 1 cellspacing=1 >";aD+="<tr>";aD+="<th>Room Type:&nbsp;&nbsp;&nbsp;"+cr+"</th>";aD+="</tr>";if(typeof o=="undefined"||typeof o.extrasWithPricing=="undefined"||o.extrasWithPricing==""){if(I!=" "&&ct=="undefined"){I=I.split(",");for(var bI=0;bI<I.length;bI++){var ct=I[bI];if(ct!=" "){aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=140 height="12"><b>AUD 0.00</b> </td></table></td>',aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',aD+="</tr>"}}}}else{var bF=Ext.util.JSON.decode(o.extrasWithPricing).data;for(var by=0;by<bF.length;by++){var aW=bF[by].roomType;if(cr==aW){var ct=bF[by].extras;var G=bF[by].status;var K=bF[by].priceSell;if(!K){K=0}var x=bF[by].taxSell;if(!x){x=0}r+=K;a2+=(K+x);aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=140 height="12"><b>'+TDS.util.Price.formatPrice((K+x),b8)+"</b> </td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",aD+="</tr>"}}}aD+="</table>"}}}else{am+="<tr>";am+='<td height="20" > </td>',am+='<td height="1">  </td>',am+='<td height="1">  </td>',am+='<td height="1" >  </td>',am+='<td height="1">   </td>',am+='<td height="1">  </td>',am+='<td height="1"> </td>',am+="</tr>"};var al="";var m=b1.rowRecordData.extrasAmount;if(typeof m=="undefined"||m==null||m==""){m=0}var b9=b1.rowRecordData.pricingPriceCommission;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];if(typeof bg=="undefined"||bg==null||bg==""){bg=0}var al="";var b8=b1.rowRecordData.pricingPriceCurrency;var ao=b1.rowRecordData.pricingPriceIsNett;if(b1.rowRecordData.pricingPriceSell||b1.rowRecordData.pricingPriceSell==0){al+="<tr>";al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(T,b8)+"</b></td>",al+='<td height="1" align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>",al+='<td height="1" align="center"><b>'+TDS.util.Price.formatPrice(a2,b8)+"</b></td>";if(ao){al+='<td height="1" align="center"><b>'+b9.toFixed(2)+"</b></td>"}else{al+='<td height="1" align="center"> </td>'}al+='<td height="1" align="center"><b>'+TDS.util.Price.formatPrice((T+a2),b8)+"</b></td>";if(!ao){al+='<td height="1" align="center"> <b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{al+='<td height="1" align="center"> </td>'}al+="</tr>"}else{al+="<tr>";al+='<td height="20"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+="</tr>"}bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #B2DFEE;">','<th style="padding: 2px; width: 44%;">City</th>','<th style="padding: 2px; width: 33%;">Property Name</th>','<th style="padding: 2px; width: 10%;">Rating</th>','<th style="padding: 2px; width: 16%;">In</th>','<th style="padding: 2px; width: 16%;">Out</th>','<th style="padding: 2px; width: 8%;">Nights</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #70DBDB;">','<th style="padding: 2px; width: 20%;">Room Type</th>','<th style="padding: 2px; width: 17%;">Category</th>','<th style="padding: 2px; width: 28%;"> Plan</th>','<th style="padding: 2px; width: 9%;">Rooms</th>','<th style="padding: 2px; width: 16%;">Price Per Night</th>','<th style="padding: 2px; width: 8%;">Status</th>',"</tr>",am,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #C0D9D9;">','<th style="padding: 2px; width: 14%;">Stay Price</th>','<th style="padding: 2px; width: 13%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;">Extras</th>','<th style="padding: 2px; width: 5%;">Markup</th>','<th style="padding: 2px; width: 14%;">Total Price (Gross)</th>','<th style="padding: 2px; width: 10%;">Comm</th>',"</tr>",al,"</table>","<br>",'<div style="height:90px; width:100%;"><div  style="height:100px; width:49.5%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Address: <br>'+v+"<br>"+ai+'</b></div><div  style="height:100px; width:49.5%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+aD+"</b></div></div>"]}else{if(bm==TDS.data.componentType.TYPE_CAR){;var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var aD="";var aq="";var am="";var al="";var ak="";var ax=0;var b4=0;var aj=br.dropOffLocation;var bc=br.pickUpLocation;var aF=br.startTimeHrs;var z=br.endTimeHrs;var bj=br.startTimeMin;var af=br.endTimeMin;var aR=br.totalPax;z+=":"+af;aF+=":"+bj;var aO=br.noOfDays;var aw=br.prefferedCompany;var aK=br.autoClubMember;var ck=br.autoClubMemberCount;var aB=br.airlineMember;var aY=br.airlineMemberCount;var aG=br.isCroprateNo;var b=br.croprateNo;var cj=Ext.util.JSON.decode(br.gridData);var M=[];if(typeof cj!="undefined"){M=cj.data;cj=cj.data}var cs=Ext.util.JSON.decode(o.roomTypesWithPrice);var a8=[];var be={};if(typeof cs!="undefined"){a8=cs.data}for(var bI=0;bI<a8.length;bI++){var aW=a8[bI].carsize+a8[bI].category;if(typeof be[aW]=="undefined"){be[aW]={}}var cf=be[aW];cf.priceSell=a8[bI].priceSell};var a2=0;var r=0;var cq=[];for(var bJ=0;bJ<M.length;bJ++){var U=M[bJ].category;var cd=M[bJ].carsize;var I=M[bJ].extras;var A=M[bJ].fuel;var L=M[bJ].plan;var l=M[bJ].roomNo;var cr=M[bJ].roomType;var ae=M[bJ].rooms;var at=M[bJ].transmission;var d=M[bJ].age;var s=cd+U;var aH=0;if(typeof be[s]!="undefined"){aH=be[s].priceSell}if(aH!=""){ax+=parseFloat((aH*parseInt(aO)))}aq+="<tr>";aq+='<td height="20" align="center"><b>'+cd+"</b></td>",aq+='<td height="20" align="center"><b>'+U+"</b></td>",aq+='<td height="20" align="center"><b></b></td>',aq+='<td height="20" align="center"><b>'+d+"</b></td>",aq+='<td height="20" align="center"><b>'+at+"</b></td>",aq+='<td height="20" align="center"><b>'+A+"</b></td>",aq+='<td height="20" align="center"><b>'+aO+"</b></td>",aq+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(aH,b8)+"</b></td>",aq+='<td height="20" align="center"><b>'+G+"</b></td>";aq+="</tr>";if(cq.indexOf(s)!=-1){}else{cq.push(s);var I=M[bJ].extras;aD+=" <table border=0 cellpadding = 1 cellspacing=1 >";aD+="<tr>";aD+="<th>Car size:&nbsp;&nbsp;&nbsp;"+cd+"<br>Category:&nbsp;&nbsp;&nbsp;"+U+"</th>";aD+="</tr>";if(typeof o=="undefined"||typeof o.extrasWithPricing=="undefined"||o.extrasWithPricing==""){if(I!=" "){I=I.split(",");for(var bI=0;bI<I.length;bI++){var ct=I[bI];if(ct!=" "){aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=170 height="12"  align="right"><b>AUD 0.00</b> </td></table></td>',aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',aD+="</tr>"}}}}else{var bF=Ext.util.JSON.decode(o.extrasWithPricing).data;for(var by=0;by<bF.length;by++){var aW=bF[by].carsize+bF[by].category;if(s==aW){var ct=bF[by].extras;var G=bF[by].status;var K=bF[by].priceSell;if(!K||K==""){K=0}var h=bF[by].taxBaseSell;if(!h||h==""){h=0}r+=K;a2+=(K+h);aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=170 height="12"  align="right"><b>'+TDS.util.Price.formatPrice((K+h),b8)+"</b> </td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",aD+="</tr>"}}}}aD+="</table>"}b5='<td height="0" align=center><b>Preferred Company: '+aw+"</b> </td>";var b9=b1.rowRecordData.pricingPriceCommission;var ao=b1.rowRecordData.pricingPriceIsNett;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];if(typeof bg=="undefined"||bg==null||bg==""){bg=0}am+="<tr>";am+='<td height="20" align="center">&nbsp;<b>'+TDS.util.Price.formatPrice(ax,b8)+"</b></td>";am+='<td align="center">&nbsp;<b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>";am+='<td align="center"><b>'+TDS.util.Price.formatPrice(a2,b8)+"</b> </td>";if(ao){am+="<td ><b>"+b9.toFixed(2)+"</b></td>"}else{am+="<td ><b></b></td>"}am+='<td align="center"><b> '+TDS.util.Price.formatPrice((ax+a2),b8)+"</b></td>";if(!ao){am+='<td height="1" align="center"> <b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{am+="<td ><b></b></td>"}am+="</tr>";al+="<tr>";al+='<td height="20" align="center"><b>'+b1.rowRecordData.locationFromString+"</b></td>",al+='<td height="20" align="center"><b>'+bc+"</b></td>",al+='<td height="20" align="center"><b>'+TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay)+"</b></td>",al+='<td height="20" align="center"><b>'+aF+"</b></td>";al+="</tr>";ak+="<tr>";ak+='<td height="20" align="center"><b>'+b1.rowRecordData.locationToString+"</b></td>",ak+='<td height="20" align="center"><b>'+aj+"</b></td>",ak+='<td height="20" align="center"><b>'+TDS.util.Format.dateSpecial(b1.rowRecordData.dateTo,TDS.env.dateFormatDisplay)+"</b></td>",ak+='<td height="20" align="center"><b>'+z+"</b></td>";ak+="</tr>";bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 22%;"> Car Size</th>','<th style="padding: 2px; width: 22%;"align=center>Category</th>','<th style="padding: 2px; width: 20%;">Made/Model</th>','<th style="padding: 2px; width: 16%;"> Driver Age</th>','<th style="padding: 2px; width: 18%;"align=center>Transmission</th>','<th style="padding: 2px; width: 10%;">Fuel</th>','<th style="padding: 2px; width: 8%;"align=center>Days</th>','<th style="padding: 2px; width: 14%;"align=center>Price P/D</th>','<th style="padding: 2px; width: 14%;"align=center>Status</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;"align=right>Total</th>','<th style="padding: 2px; width: 10%;"align=center>Gross/Net</th>','<th style="padding: 2px; width: 14%;"align=center>Options</th>','<th style="padding: 2px; width: 14%;"align=right>Markup</th>','<th style="padding: 2px; width: 24%;"align=right>Total Price (Gross)</th>','<th style="padding: 2px; width: 14%;"align=right>Comm</th>',"</tr>",am,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">From</th>','<th style="padding: 2px; width: 14%;">Pick-Up</th>','<th style="padding: 2px; width: 14%;" align=center>Date</th>','<th style="padding: 2px; width: 14%;" align=center>Time</th>',"</tr>",al,"</table>",' <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Return</th>','<th style="padding: 2px; width: 14%;">Drop-Off</th>','<th style="padding: 2px; width: 14%;">Date</th>','<th style="padding: 2px; width: 14%;">Time</th>',"</tr>",ak,"</table>","<br>",'<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b> </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Options:'+aD+"</b></div></div>"]}else{if(bm==TDS.data.componentType.TYPE_RAIL){var am="";var aD="";var f="";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var F=0;var y=Ext.util.JSON.decode(br.gridData1);var aA=[];if(typeof y!="undefined"){aA=y.data;y=y.data}var a1="";var ab="";var bo="";var bb="";var bV="";var bU="";var D="";var C="";var ba="";for(var bJ=0;bJ<aA.length;bJ++){a1=aA[bJ].departs;ab=aA[bJ].arrives;bo=aA[bJ].date;bb=aA[bJ].trainNo;bV=aA[bJ].no;bU=aA[bJ].deptimeHr;D=aA[bJ].deptimeMin;C=aA[bJ].noOfPax;ba=aA[bJ].cls}var bk=bU+":"+D;var cj=Ext.util.JSON.decode(br.gridData);var M=[];if(typeof cj!="undefined"){M=cj.data;cj=cj.data}var ci="";var b2=0;var bC=0;var N=0;var a9=0;var bA=0;var bB=0;var aa=0;for(var bJ=0;bJ<M.length;bJ++){var bY=M[bJ].tourName;if(typeof M[bJ].a!="undefined"&&M[bJ].a!=""){bC+=parseInt(M[bJ].a)}if(typeof M[bJ].c!="undefined"&&M[bJ].c!=""){N+=parseInt(M[bJ].c)}if(typeof M[bJ].i!="undefined"&&M[bJ].i!=""){a9+=parseInt(M[bJ].i)}if(typeof M[bJ].s!="undefined"&&M[bJ].s!=""){aa+=parseInt(M[bJ].s)}if(typeof M[bJ].s!="undefined"&&M[bJ].s!=""){bA+=parseInt(M[bJ].co)}if(typeof M[bJ].s!="undefined"&&M[bJ].s!=""){bB+=parseInt(M[bJ].y)}}var Y=0;var t=0;var ar=0;var a3=0;var cv=0;var bn=0;var cs="";if(typeof o!="undefined"&&typeof o.roomTypesWithPrice!="undefined"&&o.roomTypesWithPrice!=""){cs=Ext.util.JSON.decode(o.roomTypesWithPrice)}var a4=[];if(typeof cs!="undefined"){a4=cs.data}for(var bJ=0;bJ<a4.length;bJ++){if(a4[bJ].paxType=="AD"){Y=a4[bJ].priceSell}if(a4[bJ].paxType=="CH"){t=a4[bJ].priceSell}if(a4[bJ].paxType=="IN"){ar=a4[bJ].priceSell}if(a4[bJ].paxType=="Senior"){bn=a4[bJ].priceSell}if(a4[bJ].paxType=="CN"){a3=a4[bJ].priceSell}if(a4[bJ].paxType=="Youth"){cv=a4[bJ].priceSell}}b2=(bC*Y)+(N*t)+(a9*ar)+(a9*bn)+(bA*a3)+(bB*cv);if(bC>0){am+="<tr>";am+='<td align="center"><b>Adult</b></td>',am+='<td align="center"><b>'+bC+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(Y,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(N>0){am+="<tr>";am+='<td align="center"><b>Child</b></td>',am+='<td align="center"><b>'+N+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(t,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(a9>0){am+="<tr>";am+='<td align="center"><b>Infant</b></td>',am+='<td align="center"><b>'+a9+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(ar,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(bA>0){am+="<tr>";am+='<td align="center"><b>Consession</b></td>',am+='<td align="center"><b>'+bA+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(a3,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(bB>0){am+="<tr>";am+='<td align="center"><b>Youth</b></td>',am+='<td align="center"><b>'+bB+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(cv,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(aa>0){am+="<tr>";am+='<td align="center"><b>Senior</b></td>',am+='<td align="center"><b>'+aa+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(bn,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(bC==0&&N==0&&a9==0&&bA==0&&bB==0&&aa==0){am+="<tr>";am+='<td align="center"><b> </b></td>',am+='<td align="center"><b> </b></td>',am+='<td align="center"><b> </b></td>',am+='<td align="center"><b> </b></td>',am+="</tr>"}var a2=0;var r=0;var a6=[];for(var bJ=0;bJ<M.length;bJ++){var I=M[bJ].extras;var bE=M[bJ].optionService;aD+=" <table border=0 cellpadding = 1 cellspacing=1 >";aD+="<tr>";aD+="</tr>";f+=" <table border=0 cellpadding = 1 cellspacing=1 >";if(typeof o=="undefined"||typeof o.extrasWithPricing=="undefined"||o.extrasWithPricing==""){if(I!=" "){I=I.split(",");for(var bI=0;bI<I.length;bI++){var ct=I[bI];if(ct!=" "){aD+="<tr>";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>AUD 0.00</b> </td></table></td>',aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',aD+="</tr>"}}}if(bE!=" "){bE=bE.split(",");for(var bI=0;bI<bE.length;bI++){var aP=bE[bI];if(bE!=" "){f+="<tr>";f+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+aP+"</b></b></td></table></td>",f+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>AUD 0.00</b> </td></table></td>',f+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',f+="</tr>"}}}}else{;var bF=Ext.util.JSON.decode(o.extrasWithPricing).data;for(var by=0;by<bF.length;by++){var aW=bF[by].roomType;var ct=bF[by].extras;var aP=bF[by].option;var G=bF[by].status;var K=bF[by].priceSell;if(!K||K==""){K=0}var x=bF[by].taxSell;if(!x||x==""){taxBSell=0}r+=K;a2+=(K+x);if(ct!=""){aD+="<tr>";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>'+TDS.util.Price.formatPrice((K+x),b8)+"</b> </td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",aD+="</tr>"}else{if(aP!=" "){f+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+aP+"</b></b></td></table></td>",f+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>'+TDS.util.Price.formatPrice((K+x),b8)+"</b> </td></table></td>",f+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",f+="</tr>"}}}}aD+="</table>";f+="</table>"}var aq="<tr>";aq+='<td align="center"><b> '+bb+"</b> </td>";aq+='<td height="20" >&nbsp; <b>'+a1+"</b></td>";aq+='<td align="center" ><b>'+TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay)+"</b> </td>";aq+='<td align="center"> <b>'+bk+"</b> </td>";aq+='<td align="center"> <b>'+ba+"</b></td>";aq+='<td align="center"><b>'+ab+" </b> </td>";aq+="</tr>";var b9=b1.rowRecordData.pricingPriceCommission;var ao=b1.rowRecordData.pricingPriceIsNett;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];if(typeof bg=="undefined"||bg==null||bg==""){bg=0}var al="";al+="<tr>";al+='<td height="20" >&nbsp;<b>'+TDS.util.Price.formatPrice(b2,b8)+"</b></td>";al+="<td >&nbsp;<b>"+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>";al+='<td height="20" >&nbsp;<b>'+TDS.util.Price.formatPrice(a2,b8)+"</b></td>";if(ao){al+="<td ><b>"+b9.toFixed(2)+"</b></td>"}else{al+="<td ><b></b></td>"}al+="<td ><b> "+TDS.util.Price.formatPrice((b2+a2),b8)+"</b></td>";if(!ao){al+='<td  align="center"><b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{al+="<td ><b></b></td>"}al+="</tr>";bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 16%;">Train No</th>','<th style="padding: 2px; width: 24%;">Depart</th>','<th style="padding: 2px; width: 10%;">Date</th>','<th style="padding: 2px; width: 8%;">Time</th>','<th style="padding: 2px; width: 14%;">Class</th>','<th style="padding: 2px; width: 24%;">Arrives</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 16%;">Passenger Type</th>','<th style="padding: 2px; width: 5%;">No</th>','<th style="padding: 2px; width: 16%;">Price Per Person</th>','<th style="padding: 2px; width: 14%;">Status</th>',"</tr>",am,"</table>",' <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Trip Price</th>','<th style="padding: 2px; width: 14%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;">Extras</th>','<th style="padding: 2px; width: 14%;">Markup</th>','<th style="padding: 2px; width: 14%;">Total (Gross)</th>','<th style="padding: 2px; width: 14%;">Comm</th>',"</tr>",al,"</table>","<br>",'<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Options:'+f+' </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+aD+"</b></div></div>"]}else{if(bm==TDS.data.componentType.TYPE_AIR){var P='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>'+cp+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Special Services:'+cp+"</b></div></div>";var aq="";var am="";var al="";var f="";var aD="";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var O=br.flightNo;var b7="";var aR=br.totalPax;var aF=br.startTimeHrs;var bj=br.startTimeMin;var ca=data.class;var bh=br.hasPreferedAirline;var ag=br.preferedAirline;var bL=br.airlineMembership;var Z=br.airlineMembershipCount;var cj=Ext.util.JSON.decode(br.gridData);var M="";if(typeof cj!="undefined"){M=cj.data;cj=cj.data}var y=Ext.util.JSON.decode(br.gridData1);var aA="";if(typeof y!="undefined"){aA=y.data;y=y.data}var cs=Ext.util.JSON.decode(o.roomTypesWithPrice);var e="";if(typeof cs!="undefined"){e=cs.data}for(var bJ=0;bJ<aA.length;bJ++){aq="<tr>";aq+='<td height="20" align="center"><b>'+aA[bJ].flightNo+"</b></td>";aq+='<td  align="center"><b>'+aA[bJ].departs+"</b></td>";aq+='<td  align="center"><b>'+aA[bJ].arrives+"</b></td>";aq+='<td  align="center"><b>'+aA[bJ].date+"</b></td>";aq+='<td  align="center"><b> '+aA[bJ].deptimeHr+aA[bJ].deptimeMin+"</b></td>";aq+='<td  align="center"><b>'+ca+" </b></td>";aq+='<td  align="center"><b>'+aA[bJ].noOfPax+"</b></td>";aq+="</tr>"}var bv="";var bC=0;var N=0;var a9=0;for(var bI=0;bI<cj.length;bI++){if(bv!=""){bv+=", "}bv+=cj[bI].fairType;if(typeof cj[bI].a!="undefined"&&cj[bI].a!=""){bC+=cj[bI].a}if(typeof cj[bI].c!="undefined"&&cj[bI].c!=""){N+=cj[bI].c}if(typeof cj[bI].i!="undefined"&&cj[bI].i!=""){a9+=cj[bI].i}}var Y=0;var t=0;var ar=0;var b2=0;for(var bJ=0;bJ<e.length;bJ++){if(e[bJ].paxType=="AD"&&e[bJ].priceSell!=""){Y=e[bJ].priceSell}if(e[bJ].paxType=="CH"&&e[bJ].priceSell!=""){t=e[bJ].priceSell}if(e[bJ].paxType=="IN"&&e[bJ].priceSell!=""){ar=e[bJ].priceSell}}b2+=((Y*bC)+(t*N)+(ar*a9));if(bC>0){am+="<tr>";am+='<td align="center" height="20"><b>Adult</b></td>',am+='<td align="center"><b>'+bC+"</b> </td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(Y,b8)+"</b></td>",am+='<td align="center"> <b>'+G+"</b></td>",am+="</tr>"}if(N>0){am+="<tr>";am+='<td align="center" height="20"><b>Child</b></td>',am+='<td align="center"><b>'+N+"</b> </td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(t,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(a9>0){am+="<tr>";am+='<td align="center" height="20"><b>Infant</b></td>',am+='<td align="center"><b>'+a9+"</b> </td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(ar,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}var a2=0;var r=0;var a6=[];for(var bJ=0;bJ<cj.length;bJ++){var cr=cj[bJ].fairType;if(a6.indexOf(cr)!=-1){continue}a6.push(cr);var I=cj[bJ].extras;aD+=" <table border=0 cellpadding = 1 cellspacing=1 >";aD+="<tr>";aD+="<th>Fair Type:&nbsp;&nbsp;&nbsp;"+cr+"</th>";aD+="</tr>";if(typeof o=="undefined"||typeof o.extrasWithPricing=="undefined"||o.extrasWithPricing==""){if(I!=" "&&I!=""&&typeof I!="undefined"){I=I.split(",");for(var bI=0;bI<I.length;bI++){var ct=I[bI];if(ct!=" "){aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>AUD 0.00</b> </td></table></td>',aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',aD+="</tr>"}}}}else{var bF=Ext.util.JSON.decode(o.extrasWithPricing).data;for(var by=0;by<bF.length;by++){var aW=bF[by].roomType;if(cr==aW){var ct=bF[by].extras;var G=bF[by].status;var K=bF[by].priceSell;if(!K||K==""){K=0}var x=bF[by].taxSell;if(!h||h==""){x=0}r+=K;a2+=(K+x);aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>'+TDS.util.Price.formatPrice((K+x),b8)+"</b> </td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",aD+="</tr>"}}}aD+="</table>"}if(b7!=""){aD+=" <table border=0 cellpadding = 1 cellspacing=1 width=390>";aD+="<tr>";aD+='<td height="20" align="left"><table style="border-width:1px; border-style:solid;"> <td width=400> <b><b>'+b7+"</b></b></td> </table></td>",aD+='<td height="20" align="left"><table style="border-width:1px; border-style:solid">   <td width=100><b>AUD 0.00</b> </td> </table></td>',aD+="</tr>";aD+="</table>"}var b9=b1.rowRecordData.pricingPriceCommission;var ao=b1.rowRecordData.pricingPriceIsNett;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];if(typeof bg=="undefined"||bg==null||bg==""){bg=0}al+="<tr>";al+='<td height="20" align="center"><b>'+bv+"</b></td>",al+='<td  align="center"><b>'+TDS.util.Price.formatPrice(b2,b8)+"</b></td>";al+='<td  align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>";al+='<td  align="center"><b>'+TDS.util.Price.formatPrice(a2,b8)+"</b></td>";if(ao){al+='<td  align="center"><b> '+b9.toFixed(2)+"</b></td>"}else{al+='<td  align="center"><b> </b></td>'}al+='<td  align="center"><b>'+TDS.util.Price.formatPrice((b2+a2),b8)+"</b></td>";if(!ao){al+='<td  align="center"><b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{al+='<td  align="center"><b> </b></td>'}al+="</tr>";bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 10%;">Flt No</th>','<th style="padding: 2px; width: 14%;">Departs</th>','<th style="padding: 2px; width: 14%;">Arrives</th>','<th style="padding: 2px; width: 10%;">Date</th>','<th style="padding: 2px; width: 10%;">Time</th>','<th style="padding: 2px; width: 24%;">Class</th>','<th style="padding: 2px; width: 8%;">Seats</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Passenger Type</th>','<th style="padding: 2px; width: 14%;">No</th>','<th style="padding: 2px; width: 14%;">Price Per Person</th>','<th style="padding: 2px; width: 14%;">Status</th>',"</tr>",am,"</table>",' <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Fare Type</th>','<th style="padding: 2px; width: 14%;">Price</th>','<th style="padding: 2px; width: 12%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;">Extras</th>','<th style="padding: 2px; width: 14%;">Markup</th>','<th style="padding: 2px; width: 20%;">Total Price(Gross)</th>','<th style="padding: 2px; width: 14%;">Comm</th>',"</tr>",al,"</table>","<br>",'<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Notes:'+f+' </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Special Services:'+aD+"</b></div></div>"]}else{if(bm==TDS.data.componentType.TYPE_CRUISE){var aq="";var am="";var al="";var f="";var aD="";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var J=br.destination;var aR=br.totalPax;var ch=br.cruiseLines;var bd=br.deckName;var cg=br.deckNameString;var H=br.protStarboard;var bG=br.obstruction;var bz=br.acceptUpgrade;var bt=br.stateroomGuarantee;var bq=br.dinningPreference;var aV=br.tableSize;if(aV=="4to6"){aV="4 to 6"}else{if(aV=="6to8"){aV="6 to 8"}else{if(aV="8or more"){aV="8 or More"}}}var bK=br.cruiseMemberNo;var ay=br.cruiseMemberAdultNo;var bu=br.deckCount;var bH=br.cruiseMemberCount;var cj=Ext.util.JSON.decode(br.gridData);var M=[];if(typeof cj!="undefined"){M=cj.data;cj=cj.data}if(bG=="yesObstruction"){bG="Yes"}else{bG="no"}if(bz=="yesAcceptUpgrade"){bz="Yes"}else{bz="No"}if(bt=="yesStateroomGuarantee"){bt="Yes"}else{bt="No"}var b2=0;var bC=0;var N=0;var a9=0;var aa=0;for(var bJ=0;bJ<M.length;bJ++){var bY=M[bJ].tourName;if(typeof M[bJ].a!="undefined"&&M[bJ].a!=""){bC+=parseInt(M[bJ].a)}if(typeof M[bJ].c!="undefined"&&M[bJ].c!=""){N+=parseInt(M[bJ].c)}if(typeof M[bJ].i!="undefined"&&M[bJ].i!=""){a9+=parseInt(M[bJ].i)}if(typeof M[bJ].s!="undefined"&&M[bJ].s!=""){aa+=parseInt(M[bJ].s)}}var Y=0;var t=0;var ar=0;var bn=0;var cs=Ext.util.JSON.decode(o.roomTypesWithPrice);var a4=[];if(typeof cs!="undefined"){a4=cs.data}for(var bJ=0;bJ<a4.length;bJ++){if(a4[bJ].paxType=="AD"){Y=a4[bJ].priceSell}if(a4[bJ].paxType=="CH"){t=a4[bJ].priceSell}if(a4[bJ].paxType=="IN"){ar=a4[bJ].priceSell}if(a4[bJ].paxType=="Senior"){bn=a4[bJ].priceSell}}b2=(bC*Y)+(N*t)+(a9*ar)+(a9*bn);var I="";for(var bJ=0;bJ<M.length;bJ++){var aM=M[bJ].cabin;var ac=M[bJ].cabinNo;var U=M[bJ].category;var bR=M[bJ].location;var cr=M[bJ].roomType;var X=M[bJ].stateRoomType;var cr=M[bJ].roomType;I=M[bJ].extras;am+="<tr>";am+='<td height="20" align="center"><b>'+X+"</b></td>",am+='<td height="20" align="center"><b>'+U+"</b></td>",am+='<td height="20" align="center"><b>'+bR+"</b></td>",am+='<td height="20" align="center"><b>'+cg+"</b></td>",am+='<td height="20" align="center"><b>'+H+"</b></td>",am+='<td height="20" align="center"><b>'+bG+"</b></td>",am+='<td height="20" align="center"><b>'+G+"</b></td>",am+="</tr>"}var a2=0;var r=0;var a6=[];for(var bJ=0;bJ<M.length;bJ++){var cr=M[bJ].stateRoomType;if(a6.indexOf(cr)!=-1){continue}a6.push(cr);var I=M[bJ].extras;aD+=" <table border=0 cellpadding = 1 cellspacing=1 >";aD+="<tr>";aD+="<th>Room Type:&nbsp;&nbsp;&nbsp;"+cr+"</th>";aD+="</tr>";if(typeof o=="undefined"||typeof o.extrasWithPricing=="undefined"||o.extrasWithPricing==""){if(I!=" "){I=I.split(",");for(var bI=0;bI<I.length;bI++){var ct=I[bI];if(ct!=" "){aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>AUD 0.00</b> </td></table></td>',aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>QT</b> </td></table></td>',aD+="</tr>"}}}}else{var bF=Ext.util.JSON.decode(o.extrasWithPricing).data;for(var by=0;by<bF.length;by++){var aW=bF[by].roomType;if(cr==aW){var ct=bF[by].extras;var G=bF[by].status;var K=bF[by].priceSell;if(!K||K==""){K=0}var x=bF[by].taxSell;if(!x||x==""){x=0}r+=K;a2+=(K+x);aD+="<tr >";aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500 > <b><b>'+ct+"</b></b></td></table></td>",aD+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right"><b>'+TDS.util.Price.formatPrice((K+x),b8)+"</b> </td></table></td>",aD+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12"><b>'+G+"</b> </td></table></td>",aD+="</tr>"}}}aD+="</table>"}var R=TDS.util.Format.dateSpecial(b1.rowRecordData.dateFrom,TDS.env.dateFormatDisplay);var k=TDS.util.Format.dateSpecial(b1.rowRecordData.dateTo,TDS.env.dateFormatDisplay);var ao=b1.rowRecordData.pricingPriceIsNett;var b9=b1.rowRecordData.pricingPriceCommission;var a0="";if(R&&k){a0=R+" - "+k}else{if(k){a0=k}else{if(R){a0=R}}}var V='<td height="0" align=center><b>Destination: '+J+"</b> </td>";aq="<tr>";aq+='<td height="20" align="center"><b>'+ch+"</b></td>",aq+='<td height="20" align="center"><b>'+b1.rowRecordData.locationFromString+"</b></td>",aq+='<td height="20" align="center"><b>'+a0+"</b></td>",aq+='<td height="20" align="center"><b>'+b1.rowRecordData.locationToString+"</b></td>",aq+='<td height="20" align="center"><b>'+b1.rowRecordData.duration+"</b></td>",aq+="</tr>";al="";al+="<tr>";al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(b2,b8)+"</b></td>",al+='<td height="1" align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>",al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(a2,b8)+"</b></td>";if(ao){al+='<td height="20" align="center"><b>'+b9.toFixed(2)+"</b></td>"}else{al+='<td height="20" align="center"><b></b></td>'}al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice((b2+a2),b8)+"</b></td>";if(!ao){al+='<td height="20" align="center"><b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{al+='<td height="20" align="center"><b></b></td>'}al+="</tr>";f+="<br><br><table border=1 cellpadding = 1 cellspacing=0 width=100%>";f+="<tr>";f+='<td height="20" align="left"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+bq+"</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>",f+='<td height="20" align="left"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>'+aV+"</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>",f+="</tr>";f+="</table>";f+="<br> <table border=0 cellpadding = 1 cellspacing=0 width=100%>";f+="<tr>";f+='<td height="20" align="left">  <b>Accept Upgrade&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;'+bz+"</b></td>",f+='<td height="20" align="left">   <b>Cabin Guarantee&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;'+bt+"</b> </td>",f+="</tr>";f+="</table>";bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Ship</th>','<th style="padding: 2px; width: 14%;">Departs</th>','<th style="padding: 2px; width: 14%;">Date/Range</th>','<th style="padding: 2px; width: 14%;">Arrives</th>','<th style="padding: 2px; width: 14%;">Duration</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 20%;">Stateroom Type</th>','<th style="padding: 2px; width: 14%;">Category</th>','<th style="padding: 2px; width: 14%;">Location</th>','<th style="padding: 2px; width: 14%;">Deck</th>','<th style="padding: 2px; width: 18%;">Port/Starboard</th>','<th style="padding: 2px; width: 14%;">Obstruct</th>','<th style="padding: 2px; width: 10%;">Status</th>',"</tr>",am,"</table>",' <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Price</th>','<th style="padding: 2px; width: 14%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;"> Extras</th>','<th style="padding: 2px; width: 14%;">Markup</th>','<th style="padding: 2px; width: 24%;">Total Price(Gross)</th>','<th style="padding: 2px; width: 14%;">Comm</th>',"</tr>",al,"</table>","<br>",'<div style="height:90px;"><div  style="height:94px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"><b>Dinning Preference & Table Size:'+f+'</b></div><div  style="height:94px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;"><b>Extras:'+aD+"</b></div></div>"]}else{if(bm==TDS.data.componentType.TYPE_ATTRACTION){;var aq="";var am="";var al="";var br=Ext.util.JSON.decode(b1.rowRecordData.parameters);var G=b1.rowRecordData.status;var cj=Ext.util.JSON.decode(br.gridData);var M=[];if(typeof cj!="undefined"){M=cj.data}var ci="";var Y=0;var t=0;var ar=0;var b2=0;var cs="";if(typeof o!="undefined"&&typeof o.roomTypesWithPrice!="undefined"&&o.roomTypesWithPrice!=""){cs=Ext.util.JSON.decode(o.roomTypesWithPrice)}var a4=[];if(typeof cs!="undefined"&&cs!=""){a4=cs.data}for(var bJ=0;bJ<a4.length;bJ++){if(a4[bJ].paxType=="AD"){Y=a4[bJ].priceSell}if(a4[bJ].paxType=="CH"){t=a4[bJ].priceSell}if(a4[bJ].paxType=="IN"){ar=a4[bJ].priceSell}}for(var bJ=0;bJ<M.length;bJ++){var a1=M[bJ].departs;var R=M[bJ].dateFrom;var k=M[bJ].dateTo;var bZ=M[bJ].duration;var aT=M[bJ].serviceType;ci=M[bJ].serciceName;var a0="";if(R&&k){a0=R+" - "+k}else{if(k){a0=k}else{if(R){a0=R}}}var bC=0;var N=0;var a9=0;if(M[bJ].a!=""){bC=M[bJ].a}if(M[bJ].c!=""){N=M[bJ].c}if(M[bJ].i!=""){a9=M[bJ].i}b2+=(bC*Y)+(N*t)+(bC*ar);if(bC>0){am+="<tr>";am+='<td align="center" height="20"><b>'+ci+"</b></td>",am+='<td align="center"><b>Adult</b></td>',am+='<td align="center"><b>'+bC+"</b> </td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(Y,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(N>0){am+="<tr>";am+='<td align="center" height="20"><b>'+ci+"</b></td>",am+='<td align="center"><b>Child</b></td>',am+='<td align="center"><b>'+N+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(t,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}if(a9>0){am+="<tr>";am+='<td align="center" height="20"><b>'+ci+"</b></td>",am+='<td align="center"><b>Infant</b></td>',am+='<td align="center"><b>'+a9+"</b></td>",am+='<td align="center"><b>'+TDS.util.Price.formatPrice(ar,b8)+"</b></td>",am+='<td align="center"><b>'+G+"</b></td>",am+="</tr>"}aq="<tr>";aq+='<td height="20" align="center"><b>'+b1.rowRecordData.locationFromString+"</b></td>";aq+='<td align="center"><b>'+a0+"</b></td>";aq+='<td align="center"><b>'+aT+"</b></td>";aq+='<td align="center"><b>'+b1.rowRecordData.duration+"</b></td>";aq+="</tr>"}var b9=b1.rowRecordData.pricingPriceCommission;if(typeof b9=="undefined"||b9==null||b9==""){b9=0}var bg=b1.rowRecordData["priceCommission$"];var ao=b1.rowRecordData.pricingPriceIsNett;if(typeof bg=="undefined"||bg==null||bg==""){bg=0}if(b1.rowRecordData.pricingPriceSell||b1.rowRecordData.pricingPriceSell==0){al+="<tr>";al+='<td height="20" align="center"><b>'+TDS.util.Price.formatPrice(b2,b8)+"</b></td>",al+='<td height="1" align="center"><b>'+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+"</b></td>",al+='<td height="1" align="center"><b>'+TDS.util.Price.formatPrice(a2,b8)+"</b></td>";if(ao){al+='<td height="1" align="center"> <b>'+b9.toFixed(2)+"</b></td>"}else{al+='<td height="1"> </td>'}al+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice((b2),b8)+"</b></td>";if(!ao){al+='<td height="1" align="center"> <b>'+((bg==0)?(b9.toFixed(2)+"%"):TDS.util.Price.formatPrice(bg,""))+"</b></td>"}else{al+='<td height="1"> </td>'}al+="</tr>"}else{al+="<tr>";al+='<td height="20"> </td>',al+='<td height="1"> </td>',al+='<td height="1"> </td>',al+="</tr>"}bl=['<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 24%;">City</th>','<th style="padding: 2px; width: 24%;">Date/Range</th>','<th style="padding: 2px; width: 24%;">Service Type</th>','<th style="padding: 2px; width: 24%;">Duration</th>',"</tr>",aq,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 24%;">Service Name</th>','<th style="padding: 2px; width: 24%;">Passenger Type</th>','<th style="padding: 2px; width: 10%;">No</th>','<th style="padding: 2px; width: 24%;">Price Per Person</th>','<th style="padding: 2px; width: 14%;">Status</th>',"</tr>",am,"</table>",'<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  >','<tr style="background-color: #d0def0;">','<th style="padding: 2px; width: 14%;">Price</th>','<th style="padding: 2px; width: 12%;">Gross/Net</th>','<th style="padding: 2px; width: 14%;">Extras</th>','<th style="padding: 2px; width: 14%;">Markup</th>','<th style="padding: 2px; width: 20%;">Total Price('+(b1.rowRecordData.pricingPriceIsNett?"Nett":"Gross")+")</th>",'<th style="padding: 2px; width: 14%;">Comm</th>',"</tr>",al,"</table>"]}}}}}}}}}var aE=['<div style="height:270px; overflow-y: scroll; overflow-x: hidden;">','<table  width="100%">',"<tr>",'<td width="18%"><span style="font-size:12px"><b>Quote Ref :</b></span></td><td width="22%"><font color="red"><span style="font-size:12px"> <b>'+b1.rowRecordData.bookingReferenceNumber+'</b><span style="font-size:12px"></font></td>',V,b5,"<td></td>","</tr>","</table>",w,"<br/>",bl,"</div>"];this.items.itemAt(0).html=aE}}},{xtype:"panel",height:297,columnWidth:0.44,layout:"column",items:[{columnWidth:1,xtype:"grid",enableRowExpander:false,sessionExpandedRows:false,height:290,autoScroll:true,border:false,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,tbar:["->",{xtype:"button",disabled:true,text:"Cancel passenger",handler:function(){pGridPass=this.ownerCt.ownerCt;var c=this.ownerCt.findParentByType("ajaxpanel");var b=c.rowRecordData.dataURI;Ext.Msg.show({title:"Confirmation",msg:"Are you sure, want to cancel passenger?",buttons:Ext.Msg.YESNO,fn:a,animEl:"elId",icon:Ext.MessageBox.QUESTION});function a(k){if(k=="yes"){var f=pGridPass;var h=f.getSelections();var e=b;var d={};var g=new Array();for(var j=0;j<h.length;j++){g[j]=h[j].data.dataURI}d.passengerURIs=g;Ext.Ajax.request({url:TDS.env.dataPath+e+"/cancel",jsonData:d,callback:function(q,i,m){if(i){try{Ext.Msg.alert("Status","Changes saved successfully.");var l=f.ownerCt.findParentByType("awesomegrid");l.submitQuery(true)}catch(n){}}}})}}}}],store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","displayName","code","dateOfBirth","addressString","phoneNumber1","emailAddress","gender","status","paxAge"]}),sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Passenger",dataIndex:"displayName",width:200,sortable:true,renderer:function(e,d,a,f,c,b){d.attr='ext:qtip= "Click to view details"';return e}},{header:"Type",dataIndex:"code",width:80},{header:"Gender",dataIndex:"gender",renderer:TDS.util.Format.gender,width:100},{header:"DOB",dataIndex:"dateOfBirth",width:100,renderer:TDS.util.Format.dateSpecialRenderer(TDS.env.dateBirthdayFormatDisplay)},{header:"Age",dataIndex:"paxAge",renderer:function(c,b,a){if(c){return c}else{return TDS.util.Format.age(a.get("dateOfBirth"))}}},{header:"Room Type",dataIndex:"roomType",width:150,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]})})},{header:"Seat/Cabin",hidden:true,dataIndex:"roomType",width:150,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"dataURI",emptyText:"Type",store:[]})},{header:"Price",dataIndex:"price",width:80,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",store:[["OK","OK"],["WL","Waitlist"],["FS","Freesale"],["RQ","Requested"],["XX","Cancelled"]]})}],viewConfig:{forceFit:true},listeners:{beforerender:function(c){var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.type;cm=c.getColumnModel();if(typeof a!="undefined"&&a!=TDS.data.componentType.TYPE_ACCOMMODATION&&a!=TDS.data.componentType.TYPE_TOUR){cm.setHidden(6,true)}if(typeof a!="undefined"&&(a==TDS.data.componentType.TYPE_CRUISE||a==TDS.data.componentType.TYPE_RAIL||a==TDS.data.componentType.TYPE_AIR)){cm.setHidden(7,false)}},cellclick:function(c,g,d,f){if(d==1){var b=c.getStore().getAt(g);var a=b.get("dataURI");TDS.window.setWindow({buttonOK:false,title:"Passenger details",destinationDataURI:a,interfaceURI:"pnr/passenger/viewDetails.js",sourceDataURI:a})}},render:function(){var c=this.topToolbar;this.getSelectionModel().on("rowselect",function(){if(this.ownerCt.getSelections().length>0){c.items.itemAt(1).setDisabled(false)}},c);this.getSelectionModel().on("rowdeselect",function(){if(this.ownerCt.getSelections().length==0){c.items.itemAt(1).setDisabled(true)}},c);this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;Ext.Ajax.request({url:TDS.env.dataPath+a+"/passengers/collection/concise",method:"GET",callback:function(g,m,e){if(m){var k=Ext.util.JSON.decode(e.responseText);var j=k[a+"/passengers"];if(typeof j=="undefined"){return}var l=[];for(var h=0;h<j.length;h++){k[j[h]].dataURI=j[h];l.push(k[j[h]])}var f=this;var d=f.store;d.loadData(l);f.getView().refresh()}},scope:this})}}}]},{xtype:"panel",autoHeight:true,border:false,bodyStyle:"padding: 2px;",columnWidth:0.06,defaults:{minWidth:67},items:[{xtype:"button",text:"Confirm",disabled:true,handler:function(){var c=this.ownerCt.ownerCt.ownerCt;var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;if(!a){return}TDS.window.setWindow({title:"Confirm manual Quote",message:"Are you sure you want to Confirm this component?",destinationDataURI:a+"?confirm=true",buttonOK:"Submit",callback:{fn:function(d){if(d){c.refreshGrid()}},scope:this}})},listeners:{render:function(){var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.status;if(a=="Confirmed"){this.hide()}}}},{xtype:"button",text:"Edit",handler:function(){var f=this.ownerCt.ownerCt.ownerCt;var e=this.ownerCt.findParentByType("ajaxpanel");var a=e.rowRecordData.dataURI;if(!a){return}var b=e.ownerCt.ownerCt.ownerCt.ownerCt.findParentByType("ajaxpanel");var g=b.ownerCt.title;var d=this.ownerCt.ownerCt.ownerCt.ownerCt.ownerCt;var c=e.rowRecordData.type;var h=TDS.util.firstWordCapital(c+" Manual Quote & Entry");if(c==TDS.data.componentType.TYPE_TOUR){h=TDS.util.firstWordCapital("PACKAGE TOUR Manual Quote & Entry")}else{if(c==TDS.data.componentType.TYPE_CAR){h=TDS.util.firstWordCapital("CAR RENTAL Manual Quote & Entry")}else{if(c==TDS.data.componentType.TYPE_CRUISE){h=TDS.util.firstWordCapital("CRUISES Manual Quote & Entry")}else{if(c==TDS.data.componentType.TYPE_ATTRACTION){h=TDS.util.firstWordCapital("SERVICES Manual Quote & Entry")}}}}TDS.window.setWindow({title:"<table width=100% border=0> <tr> <td width=240px>"+h+'</td> <td align=right><font size="2"  ><b>'+g+"</b></font></td> </tr> </table>",information:"Please enter your required details.",interfaceURI:"pnr/components/manual/"+c.toLowerCase()+"Edit.js",sourceDataURI:a,destinationDataURI:a+"/update",buttonOK:"Save",disableSubmit:true,disableClose:true,data:{type:c,pnrDataURI:b.dataURI,MQ:true},callback:{fn:function(i){if(i){d.submitQuery(true)}},scope:d.ownerCt.ownerCt}})}},{xtype:"button",text:"Delete",handler:function(){var c=this.ownerCt.ownerCt.ownerCt;var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;if(!a){return}TDS.window.setWindow({title:"Remove manual entry",message:"Are you sure you want to remove this component?",destinationDataURI:a,data:{status:TDS.data.componentStatus.STATUS_DELETE},callback:{fn:function(d){if(d){c.refreshGrid()}},scope:this}})}},{xtype:"button",text:"Notes",handler:function(){var c=this.ownerCt.ownerCt.ownerCt;var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;if(!a){return}TDS.window.setWindow({title:"Send a notes",information:"Please enter your notes below.",interfaceURI:"note.js",postDataURI:a+"/note",callback:{fn:function(d){},scope:this}})}}]}]}],listeners:{render:function(){var b=this.ownerCt;var a=b.rowRecordData.manualQuoteCanBeConfirmed;if(a){this.items.itemAt(0).items.itemAt(2).items.itemAt(0).enable(true)}this.setTitle(b.rowRecordData.name+" ("+b.rowRecordData.supplierName+")   Manual Entry")}}}