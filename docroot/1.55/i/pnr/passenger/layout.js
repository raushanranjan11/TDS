{xtype:"panel",layout:"column",border:false,height:170,bodyStyle:"padding: 3px;",refreshGrid:function(){var a=this.ownerCt.findParentByType("awesomegrid");a.submitQuery(true)},items:[{xtype:"panel",border:false,height:190,columnWidth:1,defaults:{style:"padding: 2px;  "},layout:"column",items:[{xtype:"panel",height:163,columnWidth:0.33,border:true,tpl:new Ext.XTemplate('<div style="height:154px; overflow-y: auto;">','<table border="0" width="100%">',"<tr >","<td colspan= 3><font size=2px color=red><u><b>Contact:</b></u></font></td>","</tr>","<tr>",'<td  width="20px" height="10px"></td>',"<td></td>","<td></td>","<td></td>","<td></td>","</tr>","<tr>",'<td height="20px"><font size=2px><b>Address:</b></font></td>',"<td colspan= 4 ><font size=2px>{addressLine1}</font></td>","</tr>","<tr>",'<td  height="20px"><b> </b></td>',"<td colspan= 4 ><font size=2px>{addressLine2}</font></td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Mobile:</b></font></td>',"<td colspan= 4 ><font size=2px>{phoneNumber2}</font></td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Email:</b></font></td>',"<td colspan= 4 ><font size=2px>{emailAddress}</font></td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Skype:</b></font></td>',"<td colspan= 4 ><font size=2px>{skypeAddress}</font></td>","</tr>","</table>","</div>"),listeners:{render:function(){var a=this.ownerCt.findParentByType("ajaxpanel");this.tpl.overwrite(this.body,{addressLine1:a.rowRecordData.addressLine1+" "+a.rowRecordData.addressLine2,addressLine2:a.rowRecordData.locality+" "+a.rowRecordData.state+" "+a.rowRecordData.postcode+" "+TDS.util.Format.displayResourceName(a.rowRecordData.countryURI),phoneNumber2:a.rowRecordData.phoneNumber2,emailAddress:a.rowRecordData.emailAddress,skypeAddress:a.rowRecordData.skypeAddress})}}},{layout:"column",columnWidth:0.33,height:163,border:true,items:[{xtype:"panel",height:163,columnWidth:0.68,border:false,tpl:new Ext.XTemplate('<div style="height:144px;  ">','<table  border="0" width="100%">',"<tr >","<td colspan= 2><font size=2px color=red><u><b>Passenger Details:</b></u></font></td>","</tr>","<tr>",'<td  width="20px" height="10px"></td>',"<td></td>","</tr>","<tr>",'<td height="20px"><font size=2px><b>Nationality:</b></font></td>',"<td colspan= 1 ><font size=2px>{nationality}</td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Country of Birth:</b></font></td>',"<td colspan= 1 ><font size=2px>{countryOfBirth}</td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Passport No:</b></font></td>',"<td colspan= 1 ><font size=2px>{passportNo}</td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Date of Issue:</b></font></td>',"<td colspan= 1 ><font size=2px>{dateOfIssue}</td>","</tr>","<tr>",'<td  height="20px"><font size=2px><b>Date of Expiry:</b></font></td>',"<td colspan= 1 ><font size=2px>{dateOfExpiry}</font></td>","</tr>","</table>","</div>"),listeners:{render:function(){var a=this.ownerCt.findParentByType("ajaxpanel");this.tpl.overwrite(this.body,{nationality:a.rowRecordData.nationalityCountry,countryOfBirth:TDS.util.Format.displayResourceName(a.rowRecordData.ppCountryOfBirthURI),passportNo:a.rowRecordData.ppNo,dateOfExpiry:TDS.util.Format.dateSpecial(a.rowRecordData.ppExpiryDate,TDS.env.dateFormatDisplay),dateOfIssue:TDS.util.Format.dateSpecial(a.rowRecordData.ppIssuedDate,TDS.env.dateFormatDisplay)})}}},{xtype:"panel",border:false,height:163,columnWidth:0.32,tpl:new Ext.XTemplate('<div style="height:144px; ">','<table  border="0" width="100%">',"<tr >","<td colspan= 2 > <font color=red><u><b>Document Location:</b></u> </font></td>","</tr>","<tr>",'<td colspan= 1 height="10px"></td>',"<td></td>","</tr>","{loc}","</table>","</div>"),listeners:{render:function(){var a=this.ownerCt.findParentByType("ajaxpanel");var b="";if(typeof a.rowRecordData.documentationLocation!="undefined"&&a.rowRecordData.documentationLocation!=null&&a.rowRecordData.documentationLocation!=""){var b='<tr> <td colspan= 1 height="20px"><font size=2px><b>'+a.rowRecordData.documentationLocation+':</b></font></td> <td><font size="3" color="#cc0000"><b>&#x2713;</b></font></td> </tr> '}this.tpl.overwrite(this.body,{loc:b})}}}]},{xtype:"panel",border:true,height:163,columnWidth:0.33,tpl:new Ext.XTemplate("<font size=2px color=red><u><b>SSR:</b></u></font><br>",'<div style="height:62px; overflow-y: auto;">','<table border="0" width="100%">',"<font size=2px>{ssrs}</font>","</table>","</div>",'<div style="border:2px solid gray; height:80px; overflow-y: scroll;">','<table  width="100%">',"<font size=2px>{ssrNotes}</font>","</table>","</div>"),listeners:{render:function(){var c=this.ownerCt.findParentByType("ajaxpanel");var b=this;Ext.Ajax.request({url:TDS.env.dataPath+c.rowRecordData.dataURI+"/ssrs/collection",method:"GET",disableCaching:false,callback:function(k,e,g){if(e){var a="";var f=Ext.util.JSON.decode(g.responseText);var j=f[c.rowRecordData.dataURI+"/ssrs"];if(typeof j=="undefined"){return}var h=[];for(var d=0;d<j.length;d++){a+=(d+1)+". "+f[j[d]].ssr+"<br>"}b.tpl.overwrite(b.body,{ssrs:a,ssrNotes:c.rowRecordData.ssrNotes})}}})}}}]},{xtype:"panel",autoHeight:true,border:false,bodyStyle:"padding: 4px;",width:170,defaults:{minWidth:100},items:[{xtype:"button",text:"Edit",handler:function(){var c=this.ownerCt.ownerCt;var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;if(!a){return}TDS.window.setWindow({title:"Edit passenger details",interfaceURI:"pnr/passenger/edit.js",sourceDataURI:a,destinationDataURI:a,callback:{fn:function(e){if(e){var d=c.findParentByType("pnrpanel");d.ownerCt.refreshPnr();c.refreshGrid()}},scope:this}})}},{xtype:"button",text:"Remove",handler:function(){var c=this.ownerCt.ownerCt;var b=this.ownerCt.findParentByType("ajaxpanel");var a=b.rowRecordData.dataURI;if(!a){return}TDS.window.setWindow({title:"Remove passenger",message:"This action is not irreversible, are you sure you want to remove this passenger?",destinationDataURI:a,data:{archived:true},callback:{fn:function(e){if(e){var d=c.findParentByType("pnrpanel");d.ownerCt.refreshPnr();c.refreshGrid()}},scope:this}})}}]}]}