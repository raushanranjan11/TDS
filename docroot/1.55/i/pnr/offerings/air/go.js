{xtype:"panel",border:false,width:900,height:440,markDataDirtyOnLoad:true,requireStores:[{dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"accommodation/inventorytypes/collection",identifier:"accommodation/inventorytypes",fields:["name","displayName","dataURI"]}],items:[{xtype:"timerlabel",text:"This availability will expire in...",listeners:{timerexpire:function(a){this.setText("Your availability has expired.")},timerrefresh:function(a,b){this.setText("This availability will expire in... <b>"+b+"</b>.",false)}}},{xtype:"tabpanel",border:false,activeTab:0,layoutOnTabChange:true,deferredRender:false,width:900,height:430,defaults:{bodyStyle:"padding: 0px 2px 0px 0px;"},items:[{title:"Details",autoScroll:true,items:{xtype:"form",layout:"form",frame:true,height:400,labelWidth:80,border:false,defaults:{border:false,bodyStyle:"padding: 0px 5px 0px 0px;"},items:[{xtype:"grid",width:880,height:85,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,tbar:[{xtype:"textfield",name:"cabinNumber",hidden:true,excludeFromSession:true,enableKeyEvents:true,width:150}],viewConfig:{forceFit:true},store:new Ext.data.JsonStore({id:"dataURI",fields:["pricingPriceSell","name","deck","maximumOccupancy","dataURI","pinned","cabinNumber","position","capacity","connect","obstruct","berths","rollaway","crib","catStatus"]}),sm:new Ext.grid.RowSelectionModel(),columns:[{header:"Category",dataIndex:"name",width:70,sortable:true},{header:"Cabin No",dataIndex:"cabinNumber",width:70,sortable:true},{header:"Deck",dataIndex:"deck",width:55,fixed:true,sortable:true},{header:"Location",dataIndex:"position",width:60,fixed:true,sortable:true},{header:"Cap",dataIndex:"maximumOccupancy",width:30,fixed:true,sortable:true},{header:"Connect",dataIndex:"connect",width:50,fixed:true,sortable:true},{header:"Obstructed",dataIndex:"obstruct",width:65,fixed:true,sortable:true},{header:"Berth",dataIndex:"berths",width:45,fixed:true,sortable:true},{header:"Rollaway",dataIndex:"rollaway",width:55,fixed:true,sortable:true},{header:"Crib",dataIndex:"crib",width:35,fixed:true,sortable:true},{header:"Pricing",dataIndex:"pricingPriceSell",width:135,fixed:true,sortable:true,renderer:TDS.util.Price.homeCurrencyGrossNettPriceRenderer},{header:"Status",dataIndex:"catStatus",width:55,fixed:true,sortable:true}],listeners:{render:function(){;var u=this.ownerCt.findParentByType("awesomewindow");var s=u.getParam("selectedCabin");var l=u.getParam("rateId");var e=u.getParam("name");var v=[];var i=[];var f=this;var a=f.store;if(typeof s!="undefined"&&s!=""){var w=s.selectedcabin;var q=0;var t="";var h=0;for(var g=0;g<w.length;g++){var j=w[g];i[g]=j;s[i[g]].dataURI=j;if(typeof s!="undefined"&&s[j]!=""){if(typeof s[j].deck!="undefined"&&s[j].deck!=""){s[i[g]].deck=s[j].deck}if(typeof e!="undefined"&&e!=""){s[i[g]].name=e}if(typeof s[j].cabinNo!="undefined"&&s[j].cabinNo!=""){s[i[g]].cabinNumber=s[j].cabinNo}v.push(s[i[g]]);if(typeof s[j].pricingPriceSell!="undefined"&&s[j].pricingPriceSell!=""){q+=parseInt(s[j].pricingPriceSell)}if(typeof s[j].currency!="undefined"&&s[j].currency!=""){t=s[j].currency}if(typeof s[j].extra!="undefined"&&s[j].extra!=""){h=parseInt(s[j].extra)}}}}else{Ext.Ajax.request({url:u.initialConfig.searchURI+"/collection",method:"GET",callback:function(y,D,d){if(D){s=s;;var B=Ext.util.JSON.decode(d.responseText);var A=[];A[0]=u.initialConfig.data.rateURI;if(typeof A=="undefined"){return}var C=[];for(var z=0;z<A.length;z++){B[A[z]].dataURI=A[z];if(typeof s!="undefined"&&s.cabinNo!=""){B[A[z]].cabinNumber=s.cabinNo}if(typeof s!="undefined"&&s.deck!=""){B[A[z]].deck=s.deck}if(typeof s!="undefined"&&s.position!=""){B[A[z]].position=s.position}if(typeof s!="undefined"&&s.maximumOccupancy!=""){B[A[z]].maximumOccupancy=s.maximumOccupancy}if(typeof s!="undefined"&&s.connect!=""){B[A[z]].connect=s.connect}if(typeof s!="undefined"&&s.obstruct!=""){B[A[z]].obstruct=s.obstruct}if(typeof s!="undefined"&&s.berths!=""){B[A[z]].berths=s.berths}if(typeof s!="undefined"&&s.rollaway!=""){B[A[z]].rollaway=s.rollaway}if(typeof s!="undefined"&&s.crib!=""){B[A[z]].crib=s.crib}if(typeof s!="undefined"&&s.catStatus!=""){}C.push(B[A[z]])}var x=this;var c=x.store;for(var z=0;z<C.length;z++){var E=C[z].catStatus;if(E=="GTD"){x.getColumnModel().setHidden(1,true)}}c.loadData(C);x.getView().refresh()}},scope:this});for(var g=0;g<v.length;g++){f.getColumnModel().setHidden(1,true)}}var o=h+q;var k="<center>Total:"+t+" "+o+"  </center>";this.ownerCt.items.itemAt(3).items.itemAt(1).html=k;a.loadData(v);f.getView().refresh()}}},{html:" ",border:false,height:2},{xtype:"grid",width:880,height:85,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,viewConfig:{forceFit:true},store:new Ext.data.JsonStore({id:"dataURI",fields:["dataURI","nameString","priceFormatted","minimumInventoryRequired","priceSell","status"]}),sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Extras",dataIndex:"nameString",flex:3},{header:"Price",dataIndex:"priceFormatted",flex:1},{header:"No",dataIndex:"minimumInventoryRequired",flex:1},{header:"Amount",dataIndex:"priceSell",flex:1},{header:"Status",dataIndex:"status",flex:1}],id:"extra",listeners:{render:function(){var f=this;var b=this.ownerCt.findParentByType("awesomewindow");var e=b.getData("offeringURI");var c=b.getData("priceCurrency");var a=b.getParam("rateId");var d=new Ext.data.CollectionStore({autoLoad:true,url:TDS.env.dataPath+e+"/searchExtras/collection?rateURI="+a+"&currency="+c,identifier:e+"/searchExtras?rateURI="+a+"&currency="+c,fields:["dataURI","nameString","termsAndConditions","inside","groupName","required","minimumInventoryRequired","conversionCurrency","convertedPricingPriceSell","convertedPricingPriceIsNett","convertedPricingPriceCommission"]});d.on("load",function(g,k){var j=[];var h=TDS.data[b.getParam("rateId")];for(var l=0;l<k.length;l++){if(k[l].data.required||h.indexOf(k[l].data.dataURI)!=-1){Ext.apply(k[l].data,TDS.util.Price.calculateGrossNettPrice(k[l].data));k[l].data.status="OK";j.push(k[l].data)}}var i=f.store;i.loadData(j);f.getView().refresh()},this)}}},{xtype:"panel",layout:"table",border:false,width:880,layoutConfig:{columns:3},defaults:{border:false,bodyStyle:"padding: 7px 7px 0px 0px;"},items:[{xtype:"editorgrid",width:600,height:85,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,viewConfig:{forceFit:true},store:new Ext.data.JsonStore({id:"dataURI",fields:["dataURI","sittings","time","number","status"]}),sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Dinning Sittings",dataIndex:"sittings"},{header:"Times",dataIndex:"time"},{header:"Number",dataIndex:"number",editable:true,editor:new Ext.form.TextField({allowBlank:false})},{header:"Status",dataIndex:"status"}],listeners:{render:function(){;var l=this.ownerCt.findParentByType("awesomewindow");var e=l.getData("offeringURI");var j=this;var f=this;var a=this.ownerCt.findParentByType("awesomewindow");var d=a.getData("offeringURI");var b=new Ext.data.CollectionStore({autoLoad:true,url:TDS.env.dataPath+d+"/dinningTimes",identifier:d+"/dinningTimes",fields:["dataURI","sittings","time","number","status"]});b.on("load",function(g,k){var i=[];for(var m=0;m<k.length;m++){i.push(k[m].data)}var h=f.store;h.loadData(i);f.getView().refresh()},this)}}},{html:"",width:320},{xtype:"grid",width:280,height:85,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,hidden:true,viewConfig:{forceFit:true},store:new Ext.data.JsonStore({id:"dataURI",fields:["bedding","number"],data:[["Gokul","30"],["Vinay","99"],["Bhai","100"],["Lalit","75"]]}),sm:new Ext.grid.RowSelectionModel(),columns:[{header:"Bedding",dataIndex:"bedding",width:250},{header:"Number",dataIndex:"number",flex:1}]}]},{xtype:"panel",layout:"table",border:false,width:880,layoutConfig:{columns:3},defaults:{border:false,bodyStyle:"padding: 7px 7px 0px 0px;"},items:[{xtype:"combo",name:"seats",emptyText:"Table Size...",excludeSubmit:true,excludeFromSession:true,minChars:1,enableKeyEvents:true,mode:"local",width:180,listWidth:190,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"seats",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"seats",fields:["name","seats"]})},{width:100},{xtype:"panel",width:320,items:[{xtype:"fieldset",style:"margin-top: 8px;",layout:"table",layoutConfig:{columns:2},autoHeight:true,defaults:{colspan:2,xtype:"radio",name:"action",forceSubmit:true,hideLabel:true},items:[{boxLabel:"Book available",inputValue:"book"},{colspan:1,boxLabel:"Request",inputValue:"request",hidden:true,handler:function(c,a){var b=this.ownerCt.items.itemAt(2);if(a){b.enable().focus()}else{b.disable()}}},{colspan:1,xtype:"datefield",name:"releaseDate",hidden:true,disabled:true,showToday:false,width:80,format:TDS.env.dateFormatDisplay,minValue:Ext.TimerMgr.getServerCalculatedDate().clearTime(),listeners:{render:function(){var a=Ext.TimerMgr.getServerCalculatedDate().add(Date.DAY,28);this.setValue(a)}}},{boxLabel:"Quote only",inputValue:"quote"}]},{xtype:"checkbox",name:"makeAnotherBooking",forceSubmit:true,hideLabel:true,checked:false,hidden:true,boxLabel:"Make another booking"}]}]},{xtype:"panel",layout:"table",style:" padding-left: 700px; padding-top: 15px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit",handler:function(){var a={};a=this.findParentByType("form").getForm().getValues();var c=this.ownerCt.findParentByType("awesomewindow").aw;var g=this.findParentByType("form").beforeSubmit(a);var b=c.destinationDataURI?c.destinationDataURI:c.postDataURI;if(g.submitDataAsParams&&g.paramData!==undefined){b+=(b.indexOf("?")!=-1?"&":"?")+Ext.urlEncode(g.paramData);if(g.data!==undefined){g=g.data}else{g=undefined}}Ext.Ajax.request({url:TDS.env.dataPath+b,method:"POST",headers:{"Content-Type":"application/json"},jsonData:g,scope:this})}}]}],id:"form",beforeSubmit:function(v){var n=this.ownerCt.findParentByType("awesomewindow");;var u=this.findParentByType("awesomewindow");u.clearValidation();var j=new Date();var m=u.getParam("selectedCabin");var B="";var x="";if(typeof m!="undefined"&&m!=""){B=u.getParam("selectedCabin").cabinId;x=m.selectedcabin.length}else{x=1}var d=this.ownerCt.items.itemAt(0).items.itemAt(3).items.itemAt(0);var A=d.getSelectionModel().getSelections();var l=this.ownerCt.items.itemAt(0).items.itemAt(0);var p=l.store.data.items;var k=[];for(var y=0;y<p.length;y++){k[y]=p[y].data}v.cabinlist=k;var r=[];for(var s=0;s<A.length;s++){r[s]=A[s].data}v.sittings=r;var o=[];var t=[];t[0]=v.rateURI;for(var s=0;s<t.length;s++){var z={};z.rateURI=v.rateURI;z.noOfPass=x;o[s]=z}try{var q={};this.validateBooking(v);var v={submitDataAsParams:true,paramData:{action:"book",currency:n.getData("priceCurrency")},data:{rateURI:n.getData("rateURI"),rateMultipleSelectedRateURI:t,offeringURI:n.getData("offeringURI"),inventoryAmount:x,dateFrom:n.getData("dateFrom"),duration:1,timeheldDate:j,cabinlist:k,sittings:r,selectedCabinId:B,noOfPerPerRate:o,passengerURIs:this.getPassengerGrid().getData(),selectedNonMandatoryExtras:TDS.data[u.getParam("rateId")],releaseDate:v.action=="request"?v.releaseDate:""}};return v}catch(w){u.showValidation(w);return false}},validateBooking:function(a){;var c=this.getPassengerGrid();var d=this.getDetail("numberOfPaxRequired");var b=c.getSelectionModel().getCount();if(b<d){throw"You must select "+(d-b)+" passengers to complete this booking."}if(!a.action){throw"You must select an available booking option to proceed."}},shared:{details:{}},setDetail:function(a,b){if(typeof a=="object"){for(var c in a){this.shared.details[c]=a[c]}}else{this.shared.details[a]=b}},getDetail:function(a){return this.shared.details[a]},initBooking:function(){var b=this.findParentByType("awesomewindow");var g=b.getParam("numberToReserveRequested");var i=b.getParam("rateClassURI");var m=b.getParam("ratePerURI");var d=b.getParam("rateOccupancyURI");var n=TDS.data.findRecordByResourceDataURI(i);var l=TDS.data.findRecordByResourceDataURI(m);var k=TDS.data.findRecordByResourceDataURI(d);var o=l.get("name");var f=k.get("name");var e=n.get("name");var j=b.getParam("priceCurrency");var h=b.getParam("priceSell");var c=h*g;var a;if(e==TDS.data.rateClassType.ADULT){a=TDS.data.passengerTypeLookup.ADULT}else{if(e==TDS.data.rateClassType.CHILD){a=TDS.data.passengerTypeLookup.CHILD}else{if(e==TDS.data.rateClassType.CONCESSION){a=TDS.data.passengerTypeLookup.CONCESSION}}}this.setDetail({inventoryAmount:g,paxType:a,numberOfPaxRequired:1,ratePerType:o,ratePriceUnit:h,ratePriceTotal:c,ratePriceCurrency:j})},initPassengerSelection:function(){var a=this.ownerCt;var b=this.getPassengerGrid();var d=this.getDetail("paxType");var c=this.getDetail("numberOfPaxRequired");b.getStore().on("load",function(){var e=b.preselect(d,c)},this)},getPassengerTab:function(){return this.ownerCt.ownerCt.items.itemAt(1)},getDataURI:function(){return this.findParentByType("awesomewindow").baseDataURI},getPassengerGrid:function(){return this.getPassengerTab().items.itemAt(1).items.itemAt(0)},initRadioButtons:function(a){var h=this.findParentByType("awesomewindow");var b=h.getParam("daysAvailable");var f=h.getParam("daysRequestable");var g=this.ownerCt.ownerCt.items.itemAt(0).items.itemAt(0).findByType("fieldset")[0];var d=g.items.itemAt(0);var c=g.items.itemAt(1);var e=g.items.itemAt(2);if(b>0){d.show()}if(f>0){c.show()}},listeners:{click:function(){},render:function(){this.initBooking();this.initRadioButtons();this.initPassengerSelection()}}}},{title:"Passengers",items:[{xtype:"form",border:false,style:"margin-bottom: 6px;",html:"<p>Please select the passengers for this booking below.</p>",listeners:{beforerender:function(){}}},{xtype:"panel",border:false,layout:"fit",items:[{xtype:"editorgrid",height:210,clicksToEdit:1,store:new Ext.data.CollectionStore({url:"",identifier:"",fields:["type","code","nameFirst","nameLast","salutation","displayName","dateOfBirth","paxAge"]}),viewConfig:{forceFit:true},getData:function(){var a=this.selModel.getSelections();var b=[];for(var c=0;c<a.length;c++){b[c]=a[c].get("dataURI")}return b},preselect:function(b,a){var c=[];this.getStore().each(function(d){if(c.length>=a){return false}if((!b||d.get("type")==b)&&d.get("nameFirst")&&d.get("nameLast")){c[c.length]=d}},this);if(c.length>0){this.getSelectionModel().selectRecords(c)}return c.length},validatePassenger:function(d,a,c,b){if(!b.get("nameFirst")&&!b.get("nameLast")){return false}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Type",dataIndex:"type",width:40,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",displayField:"text",valueField:"text",triggerAction:"all",tpl:'<tpl for="."><div class="x-combo-list-item">{text}, <span style="font-style: italic; font-size: 10px; color: #999;">{description}</span></div></tpl>',store:TDS.data.passengerType})},{header:"Last name",dataIndex:"nameLast",editor:new Ext.form.TextField({allowBlank:false}),renderer:function(a,c,b){return a.substr(0,1).toUpperCase()+a.substr(1)}},{header:"First name",dataIndex:"nameFirst",editor:new Ext.form.TextField({allowBlank:false}),renderer:function(a,c,b){return a.substr(0,1).toUpperCase()+a.substr(1)}},{header:"Title",dataIndex:"salutation",width:40,fixed:true,editor:new Ext.form.ComboBox({store:TDS.data.salutations,editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text"})},{header:"Code",dataIndex:"code",width:70,fixed:true,editor:new Ext.form.TextField({allowBlank:false})},{header:"DOB",dataIndex:"dateOfBirth",width:70,fixed:true,editor:new Ext.form.DateField({allowBlank:false}),renderer:function(a,d,c){if(typeof a!="undefined"){if(typeof a!="string"){var b=new Date();b.setTime(Ext.TimerMgr.getServerCalculatedTime());var e=Math.floor((b.getTime()-a.getTime())/(365.25*24*60*60*1000));c.set("paxAge",((e&&e>0)?e:""));return Ext.util.Format.date(a,TDS.env.dateBirthdayFormatDisplay)}else{if(c.get("paxAge")){var e=TDS.util.Format.age(a);c.set("paxAge",((e&&e>0)?e:""))}return TDS.util.Format.dateSpecial(a,TDS.env.dateBirthdayFormatDisplay)}}return TDS.util.Format.dateSpecial(a,TDS.env.dateBirthdayFormatDisplay)}},{header:"Age",dataIndex:"paxAge",renderer:function(b,a,c){if(b){return b}else{return TDS.util.Format.age(c.get("dateOfBirth"))}},editor:new Ext.form.TextField({allowBlank:false})}],bbar:[{xtype:"button",text:"Add",handler:function(){var b=this.ownerCt.items.itemAt(1);var a=this.ownerCt.items.itemAt(2);a.enable();b.enable();this.disable();var d=this.ownerCt.ownerCt;var c=d.getStore();c.add([new c.recordType({type:"AD",nameFirst:"",nameLast:""})]);d.newRecordIndex=c.getCount()-1;d.startEditing(d.newRecordIndex,2);d.getSelectionModel().selectRow(d.newRecordIndex)}},{xtype:"button",text:"Cancel",disabled:true,handler:function(){var c=this.ownerCt.items.itemAt(0);var b=this.ownerCt.items.itemAt(2);c.enable();b.disable();var d=this.ownerCt.ownerCt;var a=d.getStore().getAt(d.newRecordIndex);if(a==-1||typeof a.get("dataURI")!="undefined"){return}d.getStore().remove(a);this.disable()}},{xtype:"button",text:"Save",disabled:true,handler:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=this.ownerCt.ownerCt;var e=this.ownerCt.items.itemAt(0);var d=this.ownerCt.items.itemAt(1);d.disable();this.disable();var k=b.getSelectionModel().getSelections();var a="",i="";if(k.length==1){if(typeof k[0].get("dataURI")!="undefined"){a="PUT",i=TDS.env.dataPath+k[0].get("dataURI")}else{a="POST",i=TDS.env.dataPath+c.getDataURI("pnr")+"/passengers"}}Ext.Ajax.request({url:i,jsonData:k[0].data,method:a,callback:function(f,g,h){if(g){b.getStore().load();e.enable()}else{d.enable();this.enable()}},scope:this})}},{xtype:"button",text:"Additional Info",handler:function(i){var c=this.ownerCt.findParentByType("awesomewindow");var h=this.ownerCt.ownerCt;var b=h.getStore().getAt(h.newRecordIndex);var a="";var f=this.ownerCt.ownerCt.getSelectionModel().selections;if(f.length==1){a=f.items[0].get("dataURI")}var d=this.ownerCt.findParentByType("form");TDS.innerWindow.setWindow({height:300,width:200,autoDestroy:false,title:"Passenger Profile",interfaceURI:"pnr/passenger/passengerDetails.js",sourceDataURI:a,destinationDataURI:a,closeAction:"hide",buttonOK:"Submit",callback:{fn:function(g,j,e){},scope:this}})}}],listeners:{beforeedit:function(a){},render:function(){var w=this.ownerCt.findParentByType("awesomewindow");with(this.store){reader.meta.identifier=w.getDataURI("pnr")+"/passengers";proxy.conn.url=TDS.env.dataPath+w.getDataURI("pnr")+"/passengers/concise";load()}},rowdblclick:function(f,d,h){var b=this.getStore().getAt(d);var k=this.ownerCt.findParentByType("awesomewindow");TDS.session.setByPath(k.getDataURI("pnr"),{view:"pnrView",option:"passenger",focusRecord:b.get("dataURI")});var i="";if(b.get("primaryPassengerName")!=null&&b.get("primaryPassengerName")!=""){i=" ("+b.get("primaryPassengerName")+")"}var a=k.getDataURI("pnr")+i;var l="pnr.js";var o=k.getDataURI("pnr");var p=k.getDataURI("pnr");var n=p;if(TDS.workArea.isTabReady("pnr.js",o)){var j=TDS.workArea.getTab("pnr.js",o);var c=j.items.itemAt(0).items.itemAt(0);var m=c.getPassengerNameRecordPanel();if(m.isViewRendered("passenger")){m.focusView("pnrView","passenger");var f=m.getView().findByType("awesomegrid")[0];f.focusResult(b.get("dataURI"),false,true)}else{m.focusView("pnrView","passenger")}}TDS.workArea.openTab(o,"pnr.js",o,o);k.hide()}}}]}]},{xtype:"panel",title:"Set Package",layout:"form",frame:true,items:[{xtype:"form",layout:"form",style:" padding-bottom: 40px;padding-top: 40px; padding-right: 25px;padding-left: 25px;",viewConfig:{forceFit:true},items:[{xtype:"panel",layout:"table",layoutConfig:{columns:4},defaults:{},items:[{html:"Cruise :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Total :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Air :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Total :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Accommodation :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Total :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Day Tour  :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Total :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Services  :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Total :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Transfer  :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true},{html:"Total :",style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;"},{xtype:"textfield",readOnly:true}]},{xtype:"panel",layout:"table",style:" padding-left: 650px; padding-top: 25px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit"},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}}]}]}]},{title:"Air",layout:"fit",frame:true,items:{xtype:"form",layout:"form",autoScroll:true,listeners:{render:function(c){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.initialConfig.searchURI;supplierUri=a;Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/services",method:"POST",success:function(d,f){var e=Ext.decode(d.responseText);c.ownerCt.items.items[0].items.items[0].items.items[5].setRawValue(e.name)}})}},items:[{xtype:"panel",layout:"table",style:" padding-bottom: 20px;padding-top: 40px; padding-right: 25px;padding-left: 25px;",layoutConfig:{columns:5},totalPaxPerRoomCalc:function(){var b=this.items.itemAt(3).items.itemAt(0).getValue();var d=this.items.itemAt(8).items.itemAt(0).getValue();b=b?b:0;d=d?d:0;this.items.itemAt(13).setValue(b+d)},items:[{style:"padding-bottom: 10px;padding-top: 10px;  padding-right: 20px; padding-left: 75px;",html:"Airline :"},{xtype:"combo",displayField:"name",valueField:"name",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/city1",method:"POST",identifier:"city",fields:["name","name"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 10px; padding-left: 80px",html:"Adults :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",name:"adultNo",width:30,store:[0,1,2,3,4,5,6,7,8,9,10],name:"A1",triggerAction:"all",readOnly:true,width:42,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc()}}}]},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-left: 75px;",html:"From City :"},{xtype:"textfield",width:190},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 80px; ",html:"Child :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",store:[0,1,2,3,4,5],name:"C1",triggerAction:"all",readOnly:true,width:40,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc();var c=this.ownerCt.ownerCt.items.itemAt(9).items;var b=this.getValue();for(var a=0;a<5;a++){if(a<b){c.itemAt(a).show(true)}else{c.itemAt(a).hide(true)}}}}}]},{xtype:"panel",style:" padding-right: 10px; padding-left: 20px; ",defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",width:30},{xtype:"numberfield",name:"C12",width:30},{xtype:"numberfield",name:"C13",width:30},{xtype:"numberfield",name:"C14",width:30},{xtype:"numberfield",name:"C15",width:30}]},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"To City :"},{xtype:"combo",displayField:"name",valueField:"nameLocale",listWidth:190,name:"tourName",selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/dayTour",method:"post",identifier:"tours",fields:["name","nameLocale"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 10px; padding-left: 80px; ",html:"Total Pax :"},{xtype:"textfield",width:140,readOnly:true},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"Class :"},{xtype:"combo"},{},{xtype:"button",text:"Passengers",listeners:{click:function(){var a=this.ownerCt.findParentByType("awesomewindow");TDS.innerWindow.setWindow({title:"Passenger details",interfaceURI:"pnr/offerings/cruise/passengerList.js",data:{pnr:a.initialConfig.dataURI.pnr},callback:{fn:function(b){if(b){}},scope:this}})}}},{},{style:"  padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px; ",html:"Date :"},{xtype:"datefield",width:100},{},{},{},{style:"  padding-bottom: 10px;padding-top: 10px;padding-right: 25px; padding-left: 75px; ",html:"Time :"},{xtype:"combo",width:100}]},{xtype:"panel",layout:"table",style:" padding-left: 150px; padding-top: 5px;",border:false,hideBorders:true,layoutConfig:{columns:8},items:[{},{},{style:" padding-left: 20px;"},{html:"Adult",style:" padding-left: 20px;"},{},{html:"Child",style:" padding-left: 40px;"},{},{html:"Total",style:" padding-left: 40px;"},{html:"Status :"},{xtype:"textfield",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"}]},{xtype:"panel",layout:"table",style:" padding-left: 250px; padding-top: 25px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit"},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}},{xtype:"button",style:" padding-left: 50px;",text:"Confirm"}]}]}},{title:"Post Hotel",layout:"form",frame:true,items:[{xtype:"panel",layout:"auto",items:[{html:'<center><big><b> <span style="font-size:30px;">Set Booking</span></b></big></center>'},{html:"<center><big>Validation Can not made except number of rooms<big><center>"}]},{xtype:"form",layout:"form",autoScroll:true,listeners:{render:function(c){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.initialConfig.searchURI;Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/accommodations",method:"GET",success:function(d,f){var e=Ext.decode(d.responseText);c.ownerCt.items.items[0].items.items[0].items.items[8].setRawValue(e.name)}})}},items:[{xtype:"panel",layout:"table",style:" padding-bottom: 20px;padding-top: 20px;padding-right: 20px;padding-left: 20px; ",layoutConfig:{columns:6},totalPaxPerRoomCalc:function(){var b=this.items.itemAt(15).items.itemAt(0).getValue();var d=this.items.itemAt(21).items.itemAt(0).getValue();b=b?b:0;d=d?d:0;this.items.itemAt(27).setValue(b+d)},items:[{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 50px; ",html:"City :"},{xtype:"combo",displayField:"name",valueField:"name",name:"locationURI",width:150,listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/city",identifier:"city",fields:["name","name"],reader:new Ext.data.CollectionReader({identifier:"city",fields:["name","name"]})}),id:"store",listeners:{render:function(){var a=this.findParentByType("awesomewindow").getData("rateURI")},beforequery:function(a){var b=this.findParentByType("awesomewindow").getData("rateURI");this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+b+"/city",this.getStore().load({callback:function(d,c,e){if(e){}else{}}})}}},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 200px; ",html:"Room Type :"},{xtype:"combo",name:"name",displayField:"displayName",valueField:"dataURI",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/roomType",identifier:"roomType",fields:["name","rateId","dataURI","displayName"],reader:new Ext.data.CollectionReader({identifier:"roomType",fields:["name","rateId","dataURI","displayName"]})}),listeners:{beforequery:function(a){var c=this.findParentByType("awesomewindow").getData("rateURI");var b=this.ownerCt.items.itemAt(8).getValue();this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+c+"/roomType",this.getStore().load({params:{hotel:b}})},select:function(f,c,d){var g=this.ownerCt.items.itemAt(21).getValue(),e=this.ownerCt.items.itemAt(11).getValue();this.ownerCt.items.itemAt(4).setValue(c.data.rateId);var a=this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(0);Ext.Ajax.request({url:TDS.env.dataPath+"components/roomTypes/"+c.data.rateId,params:{inDate:e,dateDays:g,numberToReserve:1},method:"POST",success:function(b,i){var h=Ext.decode(b.responseText);Ext.each(h,function(k,j){});a.tpl.overwrite(a.body,h)}})}}},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left:120px; ",html:"No :"},{xtype:"combo",width:50},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 50px;  ",html:"Hotel :"},{xtype:"combo",name:"hotelName",displayField:"name",valueField:"dataURI",listWidth:190,width:150,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/accommodation",identifier:"hotel",fields:["name","id"],autoLoad:false,reader:new Ext.data.CollectionReader({identifier:"hotel",fields:["name","id"]})}),listeners:{beforequery:function(b){var d=this.findParentByType("awesomewindow").getData("rateURI");var a=this.findParentByType("awesomewindow").getDataURI("supplierURI");var c=this.ownerCt.items.itemAt(11);this.getStore().removeAll();this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+d+"/accommodation",this.getStore().load({params:{supplierURI:a}})},select:function(f,a,b){var e=(this.ownerCt.items.itemAt(11));var c=(this.ownerCt.items.itemAt(16));var g=this.ownerCt.items.itemAt(1);e.setValue(TDS.util.Format.dateFormatNew(a.data.inDate));c.setValue(TDS.util.Format.dateFormatNew(a.data.outDate));g.setValue(a.data.locationToString);var d=Math.round(Math.abs((new Date(e.getValue().dateFormat("Y,m,d")).getTime()-new Date(c.getValue().dateFormat("Y,m,d")).getTime())/(86400000)));this.ownerCt.items.itemAt(21).setValue(d)},beforerender:function(a){}}},{style:"padding-bottom: 10px;padding-top: 10px;padding-right: 25px; padding-left: 200px; ",html:"Basis :"},{xtype:"combo",name:"basisURI",displayField:"name",valueField:"name",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/basis",identifier:"rateBasis",fields:["name","rateId","id","inventoryTypeURI"],reader:new Ext.data.CollectionReader({identifier:"rateBasis",fields:["name","rateId","id","inventoryTypeURI"]})}),listeners:{beforequery:function(b){var d=this.findParentByType("awesomewindow").getData("rateURI");var c=this.ownerCt.items.itemAt(8).getValue();var a=this.ownerCt.items.itemAt(3).getValue();this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+d+"/basis",this.getStore().load({params:{hotel:c,roomType:a}})},select:function(d,a,b){var c=this.findParentByType("awesomewindow").getData("rateURI")}}},{},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 0; padding-left: 50px;",html:"In Date :"},{xtype:"datefield",width:83,format:"dMy",name:"inDate"},{style:"padding-bottom: 10px;padding-top: 10; padding-right: 10px; padding-left: 200px; ",html:"Adults :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",name:"adultNo",width:30,store:[0,1,2,3,4,5,6,7,8,9,10],name:"A1",triggerAction:"all",readOnly:true,width:42,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc()}}}]},{},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 30px; padding-left: 50px; ",html:"Out Date :"},{xtype:"datefield",width:83,format:"dMy",name:"outDate"},{style:"padding-bottom: 10px;padding-top: 10; padding-right: 10px; padding-left: 200px; ",html:"Child :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",store:[0,1,2,3,4,5],name:"C1",triggerAction:"all",readOnly:true,width:40,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc();var c=this.ownerCt.ownerCt.items.itemAt(22).items;var b=this.getValue();for(var a=0;a<5;a++){if(a<b){c.itemAt(a).show(true)}else{c.itemAt(a).hide(true)}}}}}]},{xtype:"panel",style:" padding-right: 10px; padding-left: 20px; ",defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",width:30},{xtype:"numberfield",name:"C12",width:30},{xtype:"numberfield",name:"C13",width:30},{xtype:"numberfield",name:"C14",width:30},{xtype:"numberfield",name:"C15",width:30}]},{},{style:" padding-bottom: 10px;padding-top: 10px; padding-right: 20px; padding-left: 50px;  ",html:"Nights :"},{xtype:"textfield",width:80},{style:"padding-bottom: 10px;padding-top: 10; padding-right: 10px; padding-left: 200px; ",html:"Total Pax :"},{xtype:"textfield",width:80,readOnly:true,name:"totalPax"},{},{}]},{xtype:"panel",layout:"column",style:" padding-left: 250px; ",items:[{style:"padding-top: 4px;",html:"Status :"},{xtype:"textfield",width:80},{html:"Room Price :",style:" padding-left: 25px;padding-top: 4px; "},{xtype:"textfield",width:80},{style:" padding-left: 25px; padding-top: 4px;",html:"Total :"},{xtype:"textfield",width:90}]},{xtype:"panel",layout:"table",style:" padding-left: 250px; padding-top: 50px; ",border:true,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit",handler:function(){var a={};a=this.findParentByType("form").getForm().getValues();var b=this.ownerCt.findParentByType("awesomewindow").aw;var c=Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/preHotelBooking",method:"POST",headers:{"Content-Type":"application/json"},jsonData:a,scope:this})}},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}},{xtype:"button",text:"Confirm",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}}]}]}]},{title:"Pre Hotel",layout:"form",frame:true,items:[{xtype:"panel",layout:"auto",items:[{html:'<center><big><b> <span style="font-size:30px;">Set Booking</span></b></big></center>'},{html:"<center><big>Validation Can not made except number of rooms<big><center>"}]},{xtype:"form",layout:"form",autoScroll:true,listeners:{render:function(c){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.initialConfig.searchURI;Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/accommodations",method:"GET",success:function(d,f){var e=Ext.decode(d.responseText);c.ownerCt.items.items[0].items.items[0].items.items[8].setRawValue(e.name)}})}},items:[{xtype:"panel",layout:"table",style:" padding-bottom: 20px;padding-top: 20px;padding-right: 20px;padding-left: 20px; ",layoutConfig:{columns:6},totalPaxPerRoomCalc:function(){var b=this.items.itemAt(15).items.itemAt(0).getValue();var d=this.items.itemAt(21).items.itemAt(0).getValue();b=b?b:0;d=d?d:0;this.items.itemAt(27).setValue(b+d)},items:[{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 50px; ",html:"City :"},{xtype:"combo",displayField:"name",valueField:"name",name:"locationURI",width:150,listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/city",identifier:"city",fields:["name","name"],reader:new Ext.data.CollectionReader({identifier:"city",fields:["name","name"]})}),id:"store",listeners:{render:function(){var a=this.findParentByType("awesomewindow").getData("rateURI")},beforequery:function(a){var b=this.findParentByType("awesomewindow").getData("rateURI");this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+b+"/city",this.getStore().load({callback:function(d,c,e){if(e){}else{}}})}}},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 200px; ",html:"Room Type :"},{xtype:"combo",name:"name",displayField:"displayName",valueField:"dataURI",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/roomType",identifier:"roomType",fields:["name","rateId","dataURI","displayName"],reader:new Ext.data.CollectionReader({identifier:"roomType",fields:["name","rateId","dataURI","displayName"]})}),listeners:{beforequery:function(a){var c=this.findParentByType("awesomewindow").getData("rateURI");var b=this.ownerCt.items.itemAt(8).getValue();this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+c+"/roomType",this.getStore().load({params:{hotel:b}})},select:function(f,c,d){var g=this.ownerCt.items.itemAt(21).getValue(),e=this.ownerCt.items.itemAt(11).getValue();this.ownerCt.items.itemAt(4).setValue(c.data.rateId);var a=this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(0);Ext.Ajax.request({url:TDS.env.dataPath+"components/roomTypes/"+c.data.rateId,params:{inDate:e,dateDays:g,numberToReserve:1},method:"POST",success:function(b,i){var h=Ext.decode(b.responseText);Ext.each(h,function(k,j){});a.tpl.overwrite(a.body,h)}})}}},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left:120px; ",html:"No :"},{xtype:"combo",width:50},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 50px;  ",html:"Hotel :"},{xtype:"combo",name:"hotelName",displayField:"name",valueField:"dataURI",listWidth:190,width:150,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/accommodation",identifier:"hotel",fields:["name","id"],autoLoad:false,reader:new Ext.data.CollectionReader({identifier:"hotel",fields:["name","id"]})}),listeners:{beforequery:function(b){var d=this.findParentByType("awesomewindow").getData("rateURI");var a=this.findParentByType("awesomewindow").getDataURI("supplierURI");var c=this.ownerCt.items.itemAt(11);this.getStore().removeAll();this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+d+"/accommodation",this.getStore().load({params:{supplierURI:a}})},select:function(f,a,b){var e=(this.ownerCt.items.itemAt(11));var c=(this.ownerCt.items.itemAt(16));var g=this.ownerCt.items.itemAt(1);e.setValue(TDS.util.Format.dateFormatNew(a.data.inDate));c.setValue(TDS.util.Format.dateFormatNew(a.data.outDate));g.setValue(a.data.locationToString);var d=Math.round(Math.abs((new Date(e.getValue().dateFormat("Y,m,d")).getTime()-new Date(c.getValue().dateFormat("Y,m,d")).getTime())/(86400000)));this.ownerCt.items.itemAt(21).setValue(d)},beforerender:function(a){}}},{style:"padding-bottom: 10px;padding-top: 10px;padding-right: 25px; padding-left: 200px; ",html:"Basis :"},{xtype:"combo",name:"basisURI",displayField:"name",valueField:"name",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:new Ext.data.Store({url:TDS.env.dataPath+"components/basis",identifier:"rateBasis",fields:["name","rateId","id","inventoryTypeURI"],reader:new Ext.data.CollectionReader({identifier:"rateBasis",fields:["name","rateId","id","inventoryTypeURI"]})}),listeners:{beforequery:function(b){var d=this.findParentByType("awesomewindow").getData("rateURI");var c=this.ownerCt.items.itemAt(8).getValue();var a=this.ownerCt.items.itemAt(3).getValue();this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+"components/"+d+"/basis",this.getStore().load({params:{hotel:c,roomType:a}})},select:function(d,a,b){var c=this.findParentByType("awesomewindow").getData("rateURI")}}},{},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 0; padding-left: 50px;",html:"In Date :"},{xtype:"datefield",width:83,format:"dMy",name:"inDate"},{style:"padding-bottom: 10px;padding-top: 10; padding-right: 10px; padding-left: 200px; ",html:"Adults :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",name:"adultNo",width:30,store:[0,1,2,3,4,5,6,7,8,9,10],name:"A1",triggerAction:"all",readOnly:true,width:42,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc()}}}]},{},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 30px; padding-left: 50px; ",html:"Out Date :"},{xtype:"datefield",width:83,format:"dMy",name:"outDate"},{style:"padding-bottom: 10px;padding-top: 10; padding-right: 10px; padding-left: 200px; ",html:"Child :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",store:[0,1,2,3,4,5],name:"C1",triggerAction:"all",readOnly:true,width:40,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc();var c=this.ownerCt.ownerCt.items.itemAt(22).items;var b=this.getValue();for(var a=0;a<5;a++){if(a<b){c.itemAt(a).show(true)}else{c.itemAt(a).hide(true)}}}}}]},{xtype:"panel",style:" padding-right: 10px; padding-left: 20px; ",defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",width:30},{xtype:"numberfield",name:"C12",width:30},{xtype:"numberfield",name:"C13",width:30},{xtype:"numberfield",name:"C14",width:30},{xtype:"numberfield",name:"C15",width:30}]},{},{style:" padding-bottom: 10px;padding-top: 10px; padding-right: 20px; padding-left: 50px;  ",html:"Nights :"},{xtype:"textfield",width:80},{style:"padding-bottom: 10px;padding-top: 10; padding-right: 10px; padding-left: 200px; ",html:"Total Pax :"},{xtype:"textfield",width:80,readOnly:true,name:"totalPax"},{},{}]},{xtype:"panel",layout:"column",style:" padding-left: 250px; ",items:[{style:"padding-top: 4px;",html:"Status :"},{xtype:"textfield",width:80},{html:"Room Price :",style:" padding-left: 25px;padding-top: 4px; "},{xtype:"textfield",width:80},{style:" padding-left: 25px; padding-top: 4px;",html:"Total :"},{xtype:"textfield",width:90}]},{xtype:"panel",layout:"table",style:" padding-left: 250px; padding-top: 50px; ",border:true,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit",handler:function(){var a={};a=this.findParentByType("form").getForm().getValues();var b=this.ownerCt.findParentByType("awesomewindow").aw;var c=Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/preHotelBooking",method:"POST",headers:{"Content-Type":"application/json"},jsonData:a,scope:this})}},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}},{xtype:"button",text:"Confirm",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}}]}]}]},{title:"Day Tours",layout:"form",frame:true,items:{xtype:"form",layout:"form",autoScroll:true,listeners:{render:function(c){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.initialConfig.searchURI;supplierUri=a;Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/dayTours",method:"POST",success:function(d,f){var e=Ext.decode(d.responseText);c.ownerCt.items.items[0].items.items[0].items.items[5].setRawValue(e.name)}})}},items:[{xtype:"panel",layout:"table",style:" padding-bottom: 20px;padding-top: 40px; padding-right: 20px;padding-left: 25px;",layoutConfig:{columns:5},totalPaxPerRoomCalc:function(){var b=this.items.itemAt(3).items.itemAt(0).getValue();var d=this.items.itemAt(8).items.itemAt(0).getValue();b=b?b:0;d=d?d:0;this.items.itemAt(13).setValue(b+d)},items:[{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 63px; padding-left: 75px;",html:"City :&nbsp;&nbsp;&nbsp;"},{xtype:"combo",displayField:"name",valueField:"name",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/city1",method:"POST",identifier:"city",fields:["name","name"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 10px; padding-left: 269px",html:"Adults :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",name:"adultNo",width:30,store:[0,1,2,3,4,5,6,7,8,9,10],name:"A1",triggerAction:"all",readOnly:true,width:42,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc()}}}]},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"Type :"},{xtype:"combo"},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 269px; ",html:"Child :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",store:[0,1,2,3,4,5],name:"C1",triggerAction:"all",readOnly:true,width:40,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc();var c=this.ownerCt.ownerCt.items.itemAt(9).items;var b=this.getValue();for(var a=0;a<5;a++){if(a<b){c.itemAt(a).show(true)}else{c.itemAt(a).hide(true)}}}}}]},{xtype:"panel",style:" padding-right: 10px; padding-left: 20px; ",defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",width:30},{xtype:"numberfield",name:"C12",width:30},{xtype:"numberfield",name:"C13",width:30},{xtype:"numberfield",name:"C14",width:30},{xtype:"numberfield",name:"C15",width:30}]},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"Tour Name :&nbsp;&nbsp;"},{xtype:"combo",displayField:"name",valueField:"nameLocale",listWidth:190,name:"tourName",selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/dayTour",method:"post",identifier:"tours",fields:["name","nameLocale"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 10px; padding-left: 269px; ",html:"Total Pax :"},{xtype:"textfield",width:140,readOnly:true},{},{style:"  padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px; ",html:"Dep Date :"},{xtype:"datefield",width:100},{},{xtype:"button",text:"Passengers",listeners:{click:function(){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.getData("offeringURI");TDS.innerWindow.setWindow({title:"Passenger details",interfaceURI:"pnr/offerings/cruise/passengerList.js",data:{pnr:b.initialConfig.dataURI.pnr},callback:{fn:function(c){if(c){}},scope:this}})}}},{},{style:"  padding-bottom: 10px;padding-top: 10px;padding-right: 25px; padding-left: 75px; ",html:"Time :"},{xtype:"combo",width:100},{},{},{}]},{xtype:"panel",layout:"table",style:" padding-left: 150px; padding-top: 38px;",border:false,hideBorders:true,layoutConfig:{columns:8},items:[{},{},{style:" padding-left: 20px;"},{html:"Adult",style:" padding-left: 20px;"},{},{html:"Child",style:" padding-left: 40px;"},{},{html:"Total",style:" padding-left: 40px;"},{html:"Status :"},{xtype:"textfield",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"}]},{xtype:"panel",layout:"table",style:" padding-left: 250px; padding-top: 25px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit"},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}},{xtype:"button",style:" padding-left: 50px;",text:"Confirm"}]}]}},{title:"Services",layout:"fit",frame:true,items:{xtype:"form",layout:"form",autoScroll:true,listeners:{render:function(c){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.initialConfig.searchURI;supplierUri=a;Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/services",method:"POST",success:function(d,f){var e=Ext.decode(d.responseText);c.ownerCt.items.items[0].items.items[0].items.items[5].setRawValue(e.name)}})}},items:[{xtype:"panel",layout:"table",style:" padding-bottom: 20px;padding-top: 40px; padding-right: 25px;padding-left: 25px;",layoutConfig:{columns:5},totalPaxPerRoomCalc:function(){var b=this.items.itemAt(3).items.itemAt(0).getValue();var d=this.items.itemAt(8).items.itemAt(0).getValue();b=b?b:0;d=d?d:0;this.items.itemAt(13).setValue(b+d)},items:[{style:"padding-bottom: 10px;padding-top: 10px;  padding-right: 20px; padding-left: 75px;",html:"Country :"},{xtype:"combo",displayField:"name",valueField:"name",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/city1",method:"POST",identifier:"city",fields:["name","name"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 10px; padding-left: 80px",html:"Adults :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",name:"adultNo",width:30,store:[0,1,2,3,4,5,6,7,8,9,10],name:"A1",triggerAction:"all",readOnly:true,width:42,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc()}}}]},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-left: 75px;",html:"City :"},{xtype:"textfield",width:190},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 80px; ",html:"Child :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",store:[0,1,2,3,4,5],name:"C1",triggerAction:"all",readOnly:true,width:40,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc();var c=this.ownerCt.ownerCt.items.itemAt(9).items;var b=this.getValue();for(var a=0;a<5;a++){if(a<b){c.itemAt(a).show(true)}else{c.itemAt(a).hide(true)}}}}}]},{xtype:"panel",style:" padding-right: 10px; padding-left: 20px; ",defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",width:30},{xtype:"numberfield",name:"C12",width:30},{xtype:"numberfield",name:"C13",width:30},{xtype:"numberfield",name:"C14",width:30},{xtype:"numberfield",name:"C15",width:30}]},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"Type :"},{xtype:"combo",displayField:"name",valueField:"nameLocale",listWidth:190,name:"tourName",selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/dayTour",method:"post",identifier:"tours",fields:["name","nameLocale"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 10px; padding-left: 80px; ",html:"Total Pax :"},{xtype:"textfield",width:140,readOnly:true},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"Service Name :"},{xtype:"combo"},{},{xtype:"button",text:"Passengers",listeners:{click:function(){var a=this.ownerCt.findParentByType("awesomewindow");TDS.innerWindow.setWindow({title:"Passenger details",interfaceURI:"pnr/offerings/cruise/passengerList.js",data:{pnr:a.initialConfig.dataURI.pnr},callback:{fn:function(b){if(b){}},scope:this}})}}},{},{style:"  padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px; ",html:"Dep Date :"},{xtype:"datefield",width:100},{},{},{},{style:"  padding-bottom: 10px;padding-top: 10px;padding-right: 25px; padding-left: 75px; ",html:"Time :"},{xtype:"combo",width:100}]},{xtype:"panel",layout:"table",style:" padding-left: 150px; padding-top: 5px;",border:false,hideBorders:true,layoutConfig:{columns:8},items:[{},{},{style:" padding-left: 20px;"},{html:"Adult",style:" padding-left: 20px;"},{},{html:"Child",style:" padding-left: 40px;"},{},{html:"Total",style:" padding-left: 40px;"},{html:"Status :"},{xtype:"textfield",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"}]},{xtype:"panel",layout:"table",style:" padding-left: 250px; padding-top: 25px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit"},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}},{xtype:"button",style:" padding-left: 50px;",text:"Confirm"}]}]}},{xtype:"panel",title:"Transfers",layout:"form",frame:true,items:{xtype:"form",layout:"form",viewConfig:{forceFit:true},listeners:{render:function(c){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.initialConfig.searchURI;supplierUri=a;Ext.Ajax.request({url:TDS.env.dataPath+"components/"+this.findParentByType("awesomewindow").getData("rateURI")+"/transfers",method:"POST",success:function(d,f){var e=Ext.decode(d.responseText)}})}},items:[{xtype:"panel",layout:"table",style:" padding-bottom: 20px;padding-top: 40px; padding-right: 25px;padding-left: 25px;",layoutConfig:{columns:5},totalPaxPerRoomCalc:function(){var b=this.items.itemAt(3).items.itemAt(0).getValue();var d=this.items.itemAt(8).items.itemAt(0).getValue();b=b?b:0;d=d?d:0;this.items.itemAt(13).setValue(b+d)},items:[{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 72px; padding-left: 75px;",html:"City :"},{xtype:"combo",displayField:"name",valueField:"name",listWidth:190,selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,typeAhead:true,lazyRender:true,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/city3",method:"POST",identifier:"city",fields:["name","name"],autoLoad:false})},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 20px; padding-left: 80px; ",html:"Adults :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",name:"adultNo",width:30,store:[0,1,2,3,4,5,6,7,8,9,10],name:"A1",triggerAction:"all",readOnly:true,width:42,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc()}}}]},{},{style:" padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px; ",html:"Arr Details :&nbsp;&nbsp;&nbsp;"},{xtype:"textfield",width:190,style:" padding-left: 55px; "},{style:"padding-bottom: 0px;padding-top: 10; padding-right: 25px; padding-left: 80px; ",html:"Child :"},{xtype:"panel",layout:"fit",width:100,items:[{xtype:"combo",store:[0,1,2,3,4,5],name:"C1",triggerAction:"all",readOnly:true,width:40,listeners:{select:function(){this.ownerCt.ownerCt.totalPaxPerRoomCalc();var c=this.ownerCt.ownerCt.items.itemAt(9).items;var b=this.getValue();for(var a=0;a<5;a++){if(a<b){c.itemAt(a).show(true)}else{c.itemAt(a).hide(true)}}}}}]},{xtype:"panel",style:" padding-right: 10px; padding-left: 20px; ",defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",width:30},{xtype:"numberfield",name:"C12",width:30},{xtype:"numberfield",name:"C13",width:30},{xtype:"numberfield",name:"C14",width:30},{xtype:"numberfield",name:"C15",width:30}]},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px; ",html:"Date :"},{xtype:"datefield",width:100},{style:"padding-bottom: 0px;padding-top: 50; padding-right: 10px; padding-left: 80px; ",html:"Total Pax :"},{xtype:"textfield",width:140,readOnly:true},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"Mode :"},{xtype:"combo",displayField:"name",valueField:"nameLocale",listWidth:100,width:100,name:"tourName",selectOnFocus:true,triggerAction:"all",enableKeyEvents:true,editable:false,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"components/"+rateUri+"/transfer",method:"post",identifier:"transfer",fields:["name","nameLocale"]})},{},{xtype:"button",text:"Passengers",listeners:{click:function(){var a=this.ownerCt.findParentByType("awesomewindow");TDS.innerWindow.setWindow({title:"Passenger details",interfaceURI:"pnr/offerings/cruise/passengerList.js",data:{pnr:a.initialConfig.dataURI.pnr},callback:{fn:function(b){if(b){}},scope:this}})}}},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"From :"},{xtype:"combo",width:100},{},{},{},{style:"padding-bottom: 10px;padding-top: 10px; padding-right: 25px; padding-left: 75px;",html:"To :"},{xtype:"combo",width:100},{},{}]},{xtype:"panel",layout:"table",style:" padding-left: 150px; padding-top: 5px;",border:false,hideBorders:true,layoutConfig:{columns:8},items:[{},{},{style:" padding-left: 20px;"},{html:"Adult",style:" padding-left: 20px;"},{},{html:"Child",style:" padding-left: 40px;"},{},{html:"Total",style:" padding-left: 40px;"},{html:"Status :"},{xtype:"textfield",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"},{style:" padding-left: 20px;"},{xtype:"label",text:"AU$ 0000.00",width:80,style:" padding-left: 20px;"}]},{xtype:"panel",layout:"table",style:" padding-left: 250px; padding-top: 25px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{xtype:"button",text:"Submit"},{xtype:"button",text:"Clear",style:" padding-left: 50px;",handler:function(){this.findParentByType("form").getForm().reset()}},{xtype:"button",style:" padding-left: 50px;",text:"Confirm"}]}]}}],id:"tab",listeners:{beforetabchange:function(a,c,b){if(c.hidden){c.setTitle('<font color="green">'+a.getTabEl(c).textContent+"</font>")}if(b!=null){b.setTitle('<font color="#15428b">'+a.getTabEl(b).textContent+"</font>")}},tabchange:function(d,b){var c=true;var a=false;if(c){}},render:function(){}}}]}