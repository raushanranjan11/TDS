{xtype:"panel",layout:Ext.isIE?"fit":"",autoScroll:true,bodyStyle:"padding: 8px;",requireStores:[{dataURI:TDS.env.dataPath+"suppliers/railPass/collection",identifier:"suppliers/railPass",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"railPass/category/collection",identifier:"railPass/category",fields:["name","dataURI","railPassSubCaregoryExist"]}],items:{xtype:"awesomegrid",searchURI:TDS.env.dataPath+"search/railPasses",pinnable:true,enableRowExpander:true,loadCombo:function(c,a,b){c.store.removeAll();c.setValue("");Ext.Ajax.request({url:b,disableCaching:false,method:"GET",callback:function(l,e,g){var f=Ext.util.JSON.decode(g.responseText);var k=f[a];if(typeof k=="undefined"){return}var h=[];for(var d=0;d<k.length;d++){f[k[d]].dataURI=k[d];var j=new Ext.data.Record(f[k[d]]);h.push(j)}c.store.add(h);c.enable(true)}})},tbar:["&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pass Category:"," ",{xtype:"combo",name:"category",excludeFromSession:true,mode:"local",width:220,triggerAction:"all",editable:false,enableKeyEvents:false,displayField:"name",valueField:"dataURI",tpl:TDS.util.Templates.ComboNoLabel,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"railPass/category/collection",identifier:"railPass/category",fields:["name","dataURI","railPassSubCaregoryExist"]}),listeners:{select:function(f,c){var b=this.getValue();var d=this.ownerCt.ownerCt.topToolBar2.items.itemAt(1);d.disable(true);d.store.removeAll();d.setValue("");var a=this.ownerCt.ownerCt.topToolBar2.items.itemAt(4);a.store.removeAll();a.setValue("");this.ownerCt.ownerCt.topToolBar2.items.itemAt(6).setText("");this.ownerCt.ownerCt.topToolBar3.items.itemAt(1).setValue("");if(c.get("railPassSubCaregoryExist")){var g=d.store;var e=TDS.env.dataPath+b+"/collection";this.ownerCt.ownerCt.loadCombo(d,b,e)}else{b+="/names/collection";a.setValue("");var g=a.store;var e=TDS.env.dataPath+b;this.ownerCt.ownerCt.loadCombo(a,b,e)}}}}," "," ","->",{text:"Help",xtype:"redbutton",cls:"x-button-blue",overCls:"x-button-blue-over",opened:false,toggle:false,handler:function(){TDS.needHelp("Search View Help","23");if(!this.opened){this.opened=true;TDS.needHelp("Search View Help","23")}else{this.opened=false;TDS.helpwindow.hide()}}}],tbar2:["&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sub Category:&nbsp;&nbsp;&nbsp;",{xtype:"combo",name:"subCategory",mode:"local",width:220,excludeFromSession:true,triggerAction:"all",editable:false,disabled:true,enableKeyEvents:false,displayField:"name",valueField:"dataURI",store:new Ext.data.Store(),listeners:{select:function(e,c){this.ownerCt.items.itemAt(6).setText("");this.ownerCt.ownerCt.topToolBar3.items.itemAt(1).setValue("");var b=this.getValue();b+="/names/collection";var a=this.ownerCt.ownerCt.topToolBar2.items.itemAt(4);var d=TDS.env.dataPath+b;this.ownerCt.items.itemAt(6).setText("");this.ownerCt.ownerCt.topToolBar3.items.itemAt(1).setValue("");this.ownerCt.ownerCt.loadCombo(a,b,d)}}}," ","&nbsp;&nbsp;Pass Name:",{xtype:"combo",name:"name",tpl:TDS.util.Templates.ComboNoLabel,minChars:1,excludeFromSession:true,editable:false,enableKeyEvents:false,mode:"local",width:250,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"dataURI",store:new Ext.data.Store(),listeners:{select:function(b,a){this.ownerCt.items.itemAt(6).setText("");this.ownerCt.ownerCt.topToolBar3.items.itemAt(1).setValue("");if(a.get("description")){this.ownerCt.items.itemAt(6).setText("<b><font color='#0000ff'>"+a.get("description")+"</font>",false)}if(a.get("detailedDescription")){this.ownerCt.ownerCt.topToolBar3.items.itemAt(1).setValue(a.get("detailedDescription"))}}}}," ",{xtype:"label",width:300}],tbar3:["&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Details:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",{xtype:"textarea",readOnly:true,height:160,width:800}," "," "],store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["pinned","dataURI","supplierURI","nameString","codeSupplier","noOfCountries","countries","type","stopOversString","price","arrivalTime","duration","stopOvers","termsAndConditions","noPrePaymentRequired","pytInFull","fullPytPriorDays","depositWithin","balancePriorToDeparture","depositWithinDays","depositPerOption","balancePriorToDepartureDay","graphicImgPath","supplierDetails"]}),sm:new Ext.grid.RowSelectionModel(),cm:new Ext.grid.ColumnModel([{header:"Supplier",dataIndex:"supplierURI",sortable:true,renderer:function(e,d,a,f,c,b){d.attr='ext:qtip="'+a.get("supplierDetails").replace(/\"/g,"'")+'"';return TDS.util.Format.displayResourceConciseName(e)}},{header:"Pass",dataIndex:"nameString",sortable:true},{header:"Countries",dataIndex:"countries",sortable:true},{header:"No Of countries",dataIndex:"noOfCountries",hidden:true},{header:"Type",dataIndex:"global",sortable:true,renderer:function(c,b,a){if(c){return"Global"}else{return"Multi"}}},{header:"Advertised Rate",dataIndex:"price",sortable:true}]),viewConfig:{forceFit:true},getRowInterface:function(a,c,b){return"pnr/offerings/railPass/layout.js"},listeners:{sessioninit:function(){var a=this.ownerCt.findParentByType("pnrpanel");this.appendQueryParams.currency=a.getPNRCurrency()}}}}