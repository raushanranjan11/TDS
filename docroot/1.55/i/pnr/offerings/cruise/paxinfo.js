{height:350,frame:true,width:1000,closable:true,resizable:false,border:false,xtype:"panel",modal:true,config:{shipStore:"",sailingDate:""},listeners:{render:function(f){var b=Ext.getCmp("form").findByType("button");var a=f.findParentByType("awesomewindow").getData("rooms");var e=Ext.getCmp("form").findByType("button");if(typeof(a)!="undefined"){for(var d=0;d<a.length;d++){for(var c=0;c<e.length;c++){if(a[d].roomNo==e[c].initialConfig.text){e[c].config.roomRecords=a[d];e[d].show()}}}}}},items:[{xtype:"panel",items:[{xtype:"panel",height:400,items:[{xtype:"panel",height:40,html:'<center><font size="3"><b><u>Stateroom and Passengers Allocation</u></font></b></center>'},{xtype:"form",height:435,layout:"form",id:"form",clearForm:function(){var a=this.getForm();a.findField("noOfAdult").setValue(0);a.findField("noOfChild").setValue(0);a.findField("noOfInfants").setValue(0);a.findField("noOfCons").setValue(0);a.findField("noOfAccess").setValue(0)},setPaxAge:function(c){var b=[];for(var a=0;a<c.length;a++){if(!(c.items[a].hidden)){b.push(c.items[a].getValue())}}
return b},hidePaxAge:function(b){for(var a=0;a<b.length;a++){b.items[a].setValue();b.items[a].hide()}},showPaxAge:function(c,b){for(var a=0;a<c.length;a++){b.items[a].show();b.items[a].setValue(c[a])}},saveRoomByNumber:function(g){stateroomNumber=Ext.getCmp("room").getValue();this.config.roomArray.push(stateroomNumber);var b=this.getForm();var k=b.findField("noOfAdult").getValue();var j=b.findField("noOfChild").getValue();var d=b.findField("noOfInfants").getValue();var c=b.findField("noOfCons").getValue();var h=b.findField("noOfAccess").getValue();var i={};i.noOfAdult=k;i.noOfChild=j;i.noOfInfants=d;i.noOfCons=c;i.noOfAccess=h;var e=b.findByType("panel")[4].items.itemAt(4).items;var f=[];f=this.setPaxAge(e);i.noOfAdultAgesArray=f;var l=this.config.roomArray;if(l.length>1){i.roomNo=l[(l.length-1)]}else{i.roomNo=l[0]}
this.findByType("button")[stateroomNumber-1].config.roomRecords=i;this.findByType("button")[stateroomNumber-1].setText('<div style="color: red">'+stateroomNumber+"</div>");this.config.roomwithPaxDetail.push(this.findByType("button")[stateroomNumber-1].config.roomRecords);var a={}},setOldRecords:function(b){var e=this.getForm();var f=this.findParentByType("awesomewindow").initialConfig.scope;var d=f.config.paxRecord;var a=Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(3).items;if(typeof(b.data.adultAges)!="undefined"){if(b.data.adultAges.length==0){e.findField("noOfChild").setValue();var a=Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(3).items;for(var c=0;c<a.length;c++){a.itemAt(c).setValue();a.itemAt(c).hide()}}
for(var c=0;c<b.data.adultAges.length;c++){Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(3).items.itemAt(c).show();Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(3).items.itemAt(c).setValue(b.data.adultAges[c])}
e.findField("noOfAdult").setValue(b.data.adult)}
if(typeof(b.data.childAges)!="undefined"){if(b.data.childAges.length==0){e.findField("noOfChild").setValue();var a=Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(7).items;for(var c=0;c<a.length;c++){a.itemAt(c).setValue();a.itemAt(c).hide()}}
for(var c=0;c<b.data.childAges.length;c++){Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(7).items.itemAt(c).show();Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(7).items.itemAt(c).setValue(b.data.childAges[c])}
e.findField("noOfChild").setValue(b.data.child)}
if(typeof(b.data.infantAges)!="undefined"){if(b.data.infantAges.length==0){e.findField("noOfInfants").setValue();var a=Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(11).items;for(var c=0;c<a.length;c++){a.itemAt(c).setValue();a.itemAt(c).hide()}}
for(var c=0;c<b.data.infantAges.length;c++){Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(11).items.itemAt(c).show();Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(11).items.itemAt(c).setValue(b.data.infantAges[c])}
e.findField("noOfInfants").setValue(b.data.infant)}
if(typeof(b.data.consAges)!="undefined"){if(b.data.consAges.length==0){e.findField("noOfCons").setValue();var a=Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(15).items;for(var c=0;c<a.length;c++){a.itemAt(c).setValue();a.itemAt(c).hide()}}
for(var c=0;c<b.data.consAges.length;c++){Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(15).items.itemAt(c).show();Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(15).items.itemAt(c).setValue(b.data.consAges[c])}
e.findField("noOfCons").setValue(b.data.cons)}
if(typeof(b.data.accessAges)!="undefined"){if(b.data.accessAges.length==0){e.findField("noOfAccess").setValue();var a=Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(19).items;for(var c=0;c<a.length;c++){a.itemAt(c).setValue();a.itemAt(c).hide()}}
for(var c=0;c<b.data.accessAges.length;c++){Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(19).items.itemAt(c).show();Ext.getCmp("contPaxAge").items.itemAt(0).items.itemAt(19).items.itemAt(c).setValue(b.data.accessAges[c])}
e.findField("noOfAccess").setValue(b.data.access)}},config:{roomArray:[],buttons:[],totalPax:0,totalAllPax:0,totalPaxFlag:false,roomwithPaxDetail:[]},items:[{xtype:"panel",layout:"table",height:30,border:true,layoutConfig:{columns:10},config:{room1:"",room2:""},defaults:{bodyStyle:" padding-top: 5px;padding-right: 5px;padding-left: 40px"},items:[{html:"Number Of Stateroom:",width:180},{width:20},{xtype:"omnicrementer",bodyStyle:" padding-left: 150px;",id:"room",name:"room",triggerAction:"all",width:60,store:[1,2,3,4,5,6,7,8,9,10],value:0,maxValue:10,minValue:0,config:{flag:false},onTrigger1Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){if(this.allowNegative||this.el.dom.value>0){var b=(this.getValue())-1;if(b<this.minValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue());var c=Ext.getCmp("rate").getStore();c.removeAt(b)}}}},onTrigger2Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){var b=(this.getValue())+1;if(b>this.maxValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue());var c=Ext.getCmp("rate").getStore();var d=this.getValue();c.insert(d-1,[new c.recordType({room:d,adult:"",child:"",infant:"",cons:"",access:""})])}}},listeners:{render:function(a){},change:function(b,c,a){},trigger:function(){}}},{html:"Total Passenger:",width:180},{width:20},{xtype:"omnicrementer",name:"totalPax",listeners:{trigger:function(){var a=Ext.getCmp("form").getForm();a.findField("passengerPerRoom").setValue(this.getValue())}}},{html:" Passenger to Allocates",width:200},{xtype:"numberfield",name:"passengerPerRoom"}]},{xtype:"panel",layout:"table",height:150,border:true,id:"contPaxAge",layoutConfig:{columns:2},items:[{xtype:"panel",layout:"table",height:150,border:true,id:"ww",layoutConfig:{columns:4},config:{room1:"",room2:""},defaults:{},defaults:{bodyStyle:" padding-top: 5px;padding-right: 5px;padding-left: 20px"},items:[{html:" Adults:",style:" padding-left: 20px;",width:100},{xtype:"omnicrementer",id:"adult",name:"noOfAdult",triggerAction:"all",width:60,store:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],value:0,maxValue:14,onTrigger1Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){if(this.allowNegative||this.el.dom.value>0){var b=(this.getValue())-1;if(b<this.minValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}}},onTrigger2Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){var b=(this.getValue())+1;if(b>this.maxValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}},listeners:{trigger:function(i,g){var j=this.ownerCt.items.itemAt(3).items;var d=this.getValue();for(var f=0;f<14;f++){if(f<d){j.itemAt(f).show(true)}else{j.itemAt(f).hide(true)}}
var f="";var h=Ext.getCmp("form").getForm()}}},{html:" Age:",style:" padding-left: 10px;",width:80},{xtype:"panel",width:440,height:30,defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"}]},{html:" Child:",style:" padding-left: 20px;",width:100},{xtype:"omnicrementer",id:"child",name:"noOfChild",value:"0",triggerAction:"all",width:60,store:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],value:0,maxValue:14,onTrigger1Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){if(this.allowNegative||this.el.dom.value>0){var b=(this.getValue())-1;if(b<this.minValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}}},onTrigger2Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){var b=(this.getValue())+1;if(b>this.maxValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}},listeners:{trigger:function(i,g){var j=this.ownerCt.items.itemAt(7).items;var d=this.getValue();for(var f=0;f<14;f++){if(f<d){j.itemAt(f).show(true)}else{j.itemAt(f).hide(true)}}
var f="";var h=Ext.getCmp("form").getForm()},click:function(){},specialkey:function(b,a){},onTrigger1Click:function(){}}},{html:" Age:",style:" padding-left: 10px;",width:80},{xtype:"panel",width:440,height:30,defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"}]},{html:" Infant:",style:" padding-left: 20px;",width:100},{xtype:"omnicrementer",name:"noOfInfants",value:"0",triggerAction:"all",width:60,store:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],value:0,maxValue:14,onTrigger1Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){if(this.allowNegative||this.el.dom.value>0){var b=(this.getValue())-1;if(b<this.minValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}}},onTrigger2Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){var b=(this.getValue())+1;if(b>this.maxValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}},listeners:{trigger:function(i,g){var j=this.ownerCt.items.itemAt(11).items;var d=this.getValue();for(var f=0;f<14;f++){if(f<d){j.itemAt(f).show(true)}else{j.itemAt(f).hide(true)}}
var f="";var h=Ext.getCmp("form").getForm()}}},{html:" Age:",style:" padding-left: 10px;",width:80},{xtype:"panel",width:440,height:30,defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"}]},{html:" Cons:",style:" padding-left: 20px;",width:100},{xtype:"omnicrementer",name:"noOfCons",value:"0",triggerAction:"all",width:60,store:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],value:0,maxValue:14,onTrigger1Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){if(this.allowNegative||this.el.dom.value>0){var b=(this.getValue())-1;if(b<this.minValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}}},onTrigger2Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){var b=(this.getValue())+1;if(b>this.maxValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}},listeners:{trigger:function(i,g){var j=this.ownerCt.items.itemAt(15).items;var d=this.getValue();for(var f=0;f<14;f++){if(f<d){j.itemAt(f).show(true)}else{j.itemAt(f).hide(true)}}
var f="";var h=Ext.getCmp("form").getForm()}}},{html:" Age:",style:" padding-left: 10px;",width:80},{xtype:"panel",width:440,height:30,defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"}]},{html:" Access:",style:" padding-left: 20px;",width:100},{xtype:"omnicrementer",name:"noOfAccess",value:"0",triggerAction:"all",width:60,store:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],value:0,maxValue:14,onTrigger1Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){if(this.allowNegative||this.el.dom.value>0){var b=(this.getValue())-1;if(b<this.minValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}}},onTrigger2Click:function(){if(!isNaN(this.el.dom.value)&&!this.disabled){var b=(this.getValue())+1;if(b>this.maxValue){return}
this.setValue(b);if(this.isValid(true)){this.fireEvent("trigger",this,this.getValue())}}},listeners:{trigger:function(i,g){var j=this.ownerCt.items.itemAt(19).items;var d=this.getValue();for(var f=0;f<14;f++){if(f<d){j.itemAt(f).show(true)}else{j.itemAt(f).hide(true)}}
var f="";var h=Ext.getCmp("form").getForm()}}},{html:" Age:",style:" padding-left: 10px;",width:80},{xtype:"panel",width:440,height:30,defaults:{hidden:true},layout:"column",items:[{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C15",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C11",emptyText:"Age",width:30,style:"margin-left:5px;"},{xtype:"numberfield",name:"C12",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C13",width:30,emptyText:"Age",style:"margin-left:5px;"},{xtype:"numberfield",name:"C14",width:30,emptyText:"Age",style:"margin-left:5px;"}]},{},{},{},{},{},{},{},{}]},{xtype:"panel",layout:"auto",height:150,width:350,border:true,items:[{xtype:"grid",autoSubmit:true,alwaysUseCollection:true,border:true,width:320,height:200,id:"rate",autoScroll:true,viewConfig:{forceFit:true},store:new Ext.data.JsonStore({url:"",identifier:"",fields:["room","adult","child","infant","cons","access","adultAges","infantAges","childAges","accessAges","consAges"]}),sm:sm,clicksToEdit:1,cm:new Ext.grid.ColumnModel([sm,{header:"Stateroom",dataIndex:"room",width:80,fixed:true,sortable:true},{header:"AD",dataIndex:"adult",width:30,fixed:true,sortable:true},{header:"CH",dataIndex:"child",sortable:true,width:30,fixed:true},{header:"INF",dataIndex:"infant",sortable:true,width:30,fixed:true},{header:"Cons",dataIndex:"cons",sortable:true,width:40,fixed:true},{header:"Access",dataIndex:"access",width:60,fixed:true,editable:true,sortable:true}]),listeners:{sessioninit:function(){},render:function(){var d=this.findParentByType("awesomewindow").initialConfig.scope;var c=d.config.paxRecord;if(c!=""){this.getStore().loadData(c)}
var b=this.findParentByType("form").getForm();b.findField("room").setValue(d.getStore().getCount());var a=0;d.getStore().each(function(e){a+=e.data.totalPax});b.findField("totalPax").setValue(a)},rowclick:function(c,a,d){var b=this.getSelectionModel().getSelections()[0];Ext.getCmp("form").setOldRecords(b)}}}]}]},{xtype:"panel",style:"padding-left:40px;    padding-top: 15px;",layout:"column",items:[{xtype:"panel",style:"padding-left:725px;",items:[{xtype:"button",minWidth:150,text:"Add Passenger Numbers",config:{flag:false},handler:function(){var h=Ext.getCmp("form").getForm();var a=Ext.getCmp("form").findByType("panel")[7].items.itemAt(3).items;var f=Ext.getCmp("form").findByType("omnicrementer");var q=[];q=Ext.getCmp("form").setPaxAge(a);var b=Ext.getCmp("form");var j=Ext.getCmp("form").findByType("panel")[7].items.itemAt(7).items;var t=Ext.getCmp("form").findByType("panel")[7].items.itemAt(11).items;var i=Ext.getCmp("form").findByType("panel")[7].items.itemAt(19).items;var d=Ext.getCmp("form").findByType("panel")[7].items.itemAt(15).items;var o=Ext.getCmp("form").setPaxAge(j);var m=Ext.getCmp("form").setPaxAge(t);var p=Ext.getCmp("form").setPaxAge(i);var g=Ext.getCmp("form").setPaxAge(d);var f=Ext.getCmp("form").findByType("omnicrementer");var r=f[2].getValue()+f[3].getValue()+f[4].getValue()+f[5].getValue()+f[6].getValue();if(h.findField("passengerPerRoom").getValue()<r){Ext.Msg.alert("Status","You have selected more than allocated person ");return false}
if(q.filter(Boolean).length!=f[2].getValue()){Ext.Msg.alert("Status","You have Not entered  Adult age ");return false}
if(o.filter(Boolean).length!=f[3].getValue()){Ext.Msg.alert("Status","You have Not entered  Child age ");return false}
if(m.filter(Boolean).length!=f[4].getValue()){Ext.Msg.alert("Status","You have Not entered  Infant age ");return false}
if(g.filter(Boolean).length!=f[5].getValue()){Ext.Msg.alert("Status","You have Not entered  Cons age ");return false}
if(p.filter(Boolean).length!=f[6].getValue()){Ext.Msg.alert("Status","You have Not entered  Access age ");return false}
var l=Ext.getCmp("rate").getStore();var n=Ext.getCmp("rate").getSelectionModel().getSelections();var e=Ext.getCmp("rate").getStore().indexOf(n[0]);l.removeAt(e);l.insert(e,[new l.recordType({room:e+1,adult:f[2].getValue(),child:f[3].getValue(),infant:f[4].getValue(),cons:f[5].getValue(),access:f[6].getValue(),adultAges:q,childAges:o,infantAges:m,accessAges:p,consAges:g})]);var c=Ext.getCmp("rate").getStore();var k=0;c.each(function(s){k+=s.get("adult")+s.get("child")+s.get("infant")+s.get("cons")+s.get("access")});if(!this.config.flag){if((h.findField("totalPax").getValue()-k)<0){Ext.Msg.alert("Status","You have selected more than allocated person .");return false}else{h.findField("passengerPerRoom").setValue(h.findField("totalPax").getValue()-k)}}else{if((h.findField("totalPax").getValue()-k)<0){Ext.Msg.alert("Status","You have selected more than allocated person .");return false}else{h.findField("passengerPerRoom").setValue(h.findField("passengerPerRoom").getValue()-k)}}
b.clearForm();b.hidePaxAge(a);b.hidePaxAge(j);b.hidePaxAge(t);b.hidePaxAge(d);b.hidePaxAge(i);if(h.findField("passengerPerRoom").getValue()===0){Ext.getCmp("save").enable();this.disable()}}}]}]},{xtype:"panel",layout:"table",height:40,disabled:true,border:true,layoutConfig:{columns:12},config:{room1:"",room2:""},style:"padding-top: 5px;padding-left: 30px",defaults:{bodyStyle:" padding-top: 5px;padding-left: 5px;"},items:[{html:"Loyality program #:",width:140},{xtype:"textfield",name:"cons",width:60},{width:20},{xtype:"textfield",width:60,bodyStyle:"padding:20px;"},{width:20},{xtype:"textfield",width:60},{width:20},{html:"Age 55+:",width:70},{xtype:"checkbox"},{xtype:"panel",layout:"table",height:30,border:true,layoutConfig:{columns:12},style:" padding-left: 5px;",items:[{width:5},{html:"Promo Code:",width:80},{xtype:"textfield",fieldLabel:"Promo Code ",name:"promocode",width:120},{html:"Fare Code:",style:" padding-left: 30px;",width:120},{xtype:"textfield",fieldLabel:"Fare Code ",name:"promocode",width:120}]}]},{xtype:"panel",border:true,style:"padding-top:10px;padding-left:350px",items:[{xtype:"button",text:"Save",disabled:true,id:"save",minWidth:100,listeners:{click:function(){var b=Ext.getCmp("form").getForm();var e=this.findParentByType("awesomewindow").initialConfig.scope;var d=b.findField("passengerPerRoom").getValue();if(d>0){Ext.Msg.alert("Status","Please Allocate Passenger.")}else{var c=[];var a=0;Ext.getCmp("rate").getStore().each(function(g){var f={};f.room=g.data.room;f.totalPax=g.data.adult+g.data.child+g.data.access+g.data.infant+g.data.cons;f.adult=g.data.adult,f.child=g.data.child,f.access=g.data.access,f.infant=g.data.infant,f.cons=g.data.cons,f.adultAges=g.data.adultAges,f.childAges=g.data.childAges,f.infantAges=g.data.infantAges,f.accessAges=g.data.accessAges,f.consAges=g.data.consAges;c.push(f)});e.config.paxRecord=c;e.getStore().loadData(c);this.findParentByType("awesomewindow").hide()}}}}]}],listeners:{render:function(){this.findParentByType("awesomewindow").buttons[0].hide()}}}],listeners:{render:function(){}}}]}]}
