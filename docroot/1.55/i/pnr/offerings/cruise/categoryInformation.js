{xtype:"form",bodyStyle:"padding: 0px;",border:false,layout:"fit",frame:false,width:800,height:400,items:[{xtype:"panel",width:400,height:400,layout:"table",style:"padding-left: 5px;padding-right: 5px;padding-bottom: 5px;padding-top: 25px;",layoutConfig:{columns:3},defaults:{style:"padding: 5px;"},items:[{xtype:"panel",width:250,height:365,border:false,items:[{xtype:"grid",alwaysUseCollection:true,width:225,height:180,border:true,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["cabin","image","description","name","cabinOrder","photo"]}),sm:new Ext.grid.RowSelectionModel(),columns:[{header:"Cabin",dataIndex:"name",width:80}],viewConfig:{forceFit:true},listeners:{render:function(b){var c=b.findParentByType("awesomewindow").getData("sailingURI");var a=new Ext.data.CollectionStore({autoLoad:true,url:TDS.env.dataPath+c+"/cabins",identifier:"cabin",fields:["dataURI","cabin","image","description","name","cabinOrder","photo"]});a.on("load",function(g,j){var i=[];for(var k=0;k<j.length;k++){i.push(j[k].data)}var h=b.store;h.loadData(i);b.getView().refresh()},this)},click:function(g){var e=this.getSelectionModel().getSelections()[0].get("photo");var d="";d="http://images.cruisefactory.net/images/ships/cabinphotos/"+e;document.getElementById("photoId").src="";document.images.photoId.src=d;var f="";var c=this.getSelectionModel().getSelections()[0].get("image");f="http://images.cruisefactory.net/images/ships/cabins/"+c;document.getElementById("floorId").src="";document.images.floorId.src=f;this.ownerCt.items.itemAt(1).items.itemAt(0).setValue(this.getSelectionModel().getSelections()[0].get("description"))}}},{xtype:"panel",style:"padding-top:10px;",layout:"fit",width:225,height:170,items:[{xtype:"textarea",id:"html5",name:"description",readOnly:true,height:400,style:{"font-size":"13px"}}]}]},{xtype:"panel",width:250,height:365,layout:"table",layoutConfig:{columns:1},items:[{border:false,height:170,width:240,html:"shipImages",listeners:{render:function(c){var a="";var b="";this.html='<center><img border="0"  width=240px;height:200px;   id="photoId" name="cabinImages" src='+a+' alt="portImages"         ></center><input type="hidden" id ="imageName"  name="imageName" value='+a+">"},click:function(){}}},{border:true,height:170,width:240,html:"shipImages",listeners:{render:function(c){var a="";var b="";this.html='<center><img border="0"  width=240px;height:200px;   id="floorId" name="cabinImages" src='+b+' alt="portImages"  "           ></center><input type="hidden" id ="imageName"  name="imageName" value='+b+">"}}}]},{xtype:"panel",width:290,height:365,items:[{xtype:"combo",fieldLabel:"Deck Plan",bodyStyle:"padding-top: 10px;",name:"deck",forceSelection:true,triggerAction:"all",displayField:"name",valueField:"dataURI",enableKeyEvents:true,store:new Ext.data.Store({url:TDS.env.dataPath+"cruise/offering/deckplan",identifier:"deck",fields:["name","externalId","dataURI","cabin","image","description","name","cabinOrder","photo"],autoLoad:false,reader:new Ext.data.CollectionReader({identifier:"deck",fields:["name","externalId","dataURI","cabin","image","description","name","cabinOrder","photo"]})}),appendData:[{name:"",dataURI:""}],listeners:{beforequery:function(c){console.log(this.findParentByType("awesomewindow").getData("sailingURI"));var b=this.getStore();var a=this.findParentByType("awesomewindow").getData("sailingURI");b.load({url:TDS.env.dataPath+a+"/deck"});this.getStore().proxy.conn.method="POST",this.getStore().proxy.conn.url=TDS.env.dataPath+a+"/deck",this.getStore().load({})},select:function(f,c,e){var b=c.get("image");var d="";d="http://images.cruisefactory.net/images/ships/deckplans/"+b;document.getElementById("deckId").src="";document.images.deckImages.src=d}}},{xtype:"panel",border:true,autoScroll:true,style:"    padding-top: 10px;",height:357,width:275,html:"deckImages",listeners:{render:function(c){var a="";var b="";this.html='<center><img border="0"  width=275px;height:150px;     overflow-y: auto;   id="deckId" name="deckImages" src='+b+' alt="deckImages"  "           ></center><input type="hidden" id ="imageName"  name="imageName" value='+b+">"}}}]}]}],listeners:{}}