{xtype:"form",border:false,termsAndConditions:"",markDataDirtyOnLoad:true,width:900,id:"tab",items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:450,defaults:{},items:[{title:"Itinerary",layout:"auto",items:[{xtype:"panel",layout:"auto",autoScroll:true,height:320,border:false,items:[{xtype:"panel",height:320,layout:"table",border:false,layoutConfig:{columns:2},style:"padding: 2px;",items:[{xtype:"panel",layout:"auto",border:true,height:300,items:[{xtype:"awesomegrid",id:"grid",alwaysUseCollection:true,width:450,height:150,border:false,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["day","portName","travelDateDisp","arrive","depart","cruiseOfferingURI","dataURI"]}),sm:new Ext.grid.RowSelectionModel(),columns:[{header:"Day/Date",dataIndex:"day",width:80},{header:"Ports",dataIndex:"portName",width:150},{header:"Arr",dataIndex:"arrive",width:80},{header:"Dep",dataIndex:"depart",width:80}],viewConfig:{forceFit:true},listeners:{beforerender:function(){},sessioninit:function(){var b=this.findParentByType("awesomewindow");var c=b.initialConfig.destinationDataURI;this.searchURI=TDS.env.dataPath+c+"/cruisePorts"},render:function(){var c=Ext.util.JSON.decode(Ext.getCmp("grid").findParentByType("awesomewindow").getData("itenaryList"));var f=c["sailingDates/itenaries"];if(typeof f=="undefined"){return}var e=[];for(var b=0;b<f.length;b++){c[f[b]].dataURI=f[b];e.push(c[f[b]])}var d=Ext.getCmp("grid").getStore();d.loadData(e);var a="";a="http://images.cruisefactory.net/images/cruises/"+e[0].portGraphics;this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(0).items.itemAt(0).html='<center><img border="0"  width=400px;height:300px;   id="cruiseId" name="portImages" src='+a+' alt="portImages"  ></center><input type="hidden" id ="imageName"  name="imageName" value='+a+">"}}}]},{xtype:"panel",layout:"auto",border:true,height:300,style:"padding-left:20px;",items:[{xtype:"panel",border:false,autoWidth:true,items:[{border:false,width:400,height:300,id:"portId",html:"portImages",listeners:{}}]}]}]}]},{xtype:"panel",layout:"auto",style:"padding: 2px;",height:50,border:true,items:{border:false,style:{"font-size":"12px","padding-left":"100px","padding-top":"10px"},html:"Itenary may vary by sailing date and itenaries may be changed at the cruise lines discretion.<br> Please check itenary details at time of booking and before booking other travel services such as airline tickets"}}]},{title:"Cruise Info",height:550,layout:"form",items:[{xtype:"panel",layout:"fit",autoScroll:true,border:false,style:"padding: 2px;",items:[{xtype:"panel",autoScroll:true,height:420,layout:"table",border:false,layoutConfig:{columns:1},style:"padding: 2px;",items:[{xtype:"panel",border:false,autoScroll:true,layout:"column",items:[{autoHeight:true,border:false,html:"shipImages",listeners:{render:function(b){var c=b.findParentByType("awesomewindow").getData("logo");var a="";a="http://images.cruisefactory.net/images/ships/thumbnails//"+c.thumbnail;this.html='<center style="position: relative; top: 40%; "> <img src="data:image/png;base64,'+c+'"></center><br><p><center style="font-weight:bold;font-size:25px;align:center; ">'+b.findParentByType("awesomewindow").getData("shipName")+"<center></p>"}}},{autoHeight:true,border:false,style:"padding-left:50px;",html:"shipImages",listeners:{render:function(b){var c=b.findParentByType("awesomewindow").getData("shipObj");var a="";a="http://images.cruisefactory.net/images/ships/thumbnails//"+c.thumbnail;this.html='<center style="position: relative; top: 40%; "><img border="0"   id="portImageId" name="portImages" src='+a+' alt="portImages"  ></center><input type="hidden" id ="imageName"  name="imageName" value='+a+">"}}}]},{xtype:"panel",width:850,layout:"fit",style:"padding-top:20px;",items:[{xtype:"textarea",id:"html21",name:"description",readOnly:true,height:400,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false,style:{"font-size":"22px;"},listeners:{}}]}]}]}]},{xtype:"panel",title:"Services ",height:400,layout:"form",items:[{xtype:"panel",layout:"fit",autoScroll:true,border:false,style:"padding: 2px;",items:[{xtype:"panel",height:400,layout:"table",border:false,layoutConfig:{columns:3},defaults:{style:"padding-left:50px;"},items:[{xtype:"panel",border:false,height:50,width:820,colspan:3,style:"padding-top:20px;",items:[{xtype:"label",fieldLabel:"shipName",name:"shipName",style:"font-weight:bold;font-size:14px;align:center;padding-left:350px;padding-top:20px;",listeners:{render:function(){var a=this.findParentByType("awesomewindow").getData("shipName");if(a!=null&&a!="undefined"){this.setText("Ship: "+a)}else{this.setText("Ship: ")}}}}]},{xtype:"panel",border:true,height:350,width:375,items:[{xtype:"panel",border:false,height:350,width:350,tbar:["-","-","-","-","-","-","-","-","-","<b>Cabin Amenities</b>"],items:[{xtype:"grid",height:350,border:true,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["cabin","image","description","name","cabinOrder","photo"]}),columns:[{dataIndex:"name",width:320}],listeners:{render:function(c){var b=Ext.util.JSON.decode(Ext.getCmp("grid").findParentByType("awesomewindow").getData("amenaties"));var f=b.amenaties;if(typeof f=="undefined"){return}var e=[];for(var a=0;a<f.length;a++){b[f[a]].dataURI=f[a];e.push(b[f[a]])}var d=this.getStore();d.loadData(e)}}}]}]},{xtype:"panel",border:true,height:350,width:400,tbar:["-","-","-","-","-","-","-","-","-","-","-","-","-","<b>Ship Facilities</b>"],items:[{xtype:"grid",height:350,border:true,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["cabin","image","description","name","cabinOrder","photo"]}),columns:[{dataIndex:"name",width:320}],listeners:{render:function(c){var b=Ext.util.JSON.decode(Ext.getCmp("grid").findParentByType("awesomewindow").getData("facilityInfo"));var f=b.facitities;if(typeof f=="undefined"){return}var e=[];for(var a=0;a<f.length;a++){b[f[a]].dataURI=f[a];e.push(b[f[a]])}var d=this.getStore();d.loadData(e)}}}]}]}]}]},{xtype:"panel",title:"Port Info",layout:"fit",items:{xtype:"textarea",name:"portDescription",height:200,hideLabel:true,readOnly:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false,style:{"font-size":"12px"},listeners:{beforerender:function(a){}}}},{xtype:"panel",title:"Ship Info ",height:400,layout:"form",items:[{xtype:"panel",layout:"fit",autoScroll:true,border:false,style:"padding: 2px;",items:[{xtype:"panel",height:320,layout:"table",border:false,layoutConfig:{columns:2},style:"padding: 2px;",items:[{xtype:"panel",layout:"auto",border:true,height:300,width:400,items:[{xtype:"panel",border:true,height:300,width:400,items:[{xtype:"panel",border:true,height:300,width:400,items:[{xtype:"panel",border:false,height:50,width:400,items:[{xtype:"label",style:"font-weight: bold;padding-left: 150px;",name:"shipName",listeners:{render:function(a){a.setText(a.findParentByType("awesomewindow").getData("shipName"))}}}]},{border:true,html:"shipImages",listeners:{render:function(b){var c=b.findParentByType("awesomewindow").getData("shipObj");var a="";a="http://images.cruisefactory.net/images/ships/thumbnails//"+c.thumbnail;this.html='<center style="position: relative; top: 40%; "><img border="0"   id="portImageId" name="portImages" src='+a+' alt="portImages"  ></center><input type="hidden" id ="imageName"  name="imageName" value='+a+">"}}}]}]}]},{xtype:"panel",layout:"form",border:true,height:310,width:450,style:"padding-left:50px;",listeners:{},items:[{xtype:"htmleditor",name:"shipInfo",readOnly:true,height:310,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false,listeners:{render:function(a){a.getToolbar().hide(false)}}}]}]}]},{xtype:"panel",layout:"auto",style:"padding-top:00px;padding-left:5px;",height:100,border:false,items:[{border:false,xtype:"textarea",name:"shipDescription",width:850,height:100,id:"html",readOnly:true,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false,style:"padding: 20px 00px 0px 0px; ",style:{"font-size":"12px"},listeners:{}}]}]},{xtype:"panel",title:"Dining ",height:450,items:[{xtype:"panel",autoScroll:true,border:false,style:"padding: 2px;",layout:"column",items:[{xtype:"panel",height:450,layout:"column",items:[{xtype:"panel",height:410,width:450,layout:"table",layoutConfig:{columns:1},items:[{xtype:"panel",layout:"fit",width:440,height:400,style:"padding-top:20px;",items:[{xtype:"textarea",name:"dining",readOnly:true,width:320,height:400,style:{"font-size":"12px",width:"430px",height:"400px"},enableAlignments:false,listeners:{render:function(a){var b=a.findParentByType("awesomewindow").getData("dining");a.setValue(a.findParentByType("awesomewindow").getData("dining").introduction)}}}]}]},{xtype:"panel",height:400,width:420,style:"padding-left:10px;",layout:"table",layoutConfig:{columns:1},items:[{border:true,width:250,html:"shipImages",listeners:{render:function(b){var c=b.findParentByType("awesomewindow").getData("dining");var a="";a="http://images.cruisefactory.net/images/cruiselines/dining/"+c.photo;this.html='<center style="position: relative; top: 40%; "><img border="0"   id="portImageId" name="portImages" src='+a+' alt="portImages"  ></center><input type="hidden" id ="imageName"  name="imageName" value='+a+">"}}},{xtype:"panel",height:300,width:400,style:"padding-top:10px;",listeners:{render:function(d){var c=d.findParentByType("awesomewindow").getData("diningtimes");var f=c.dinningTime;var e=[];for(var b=0;b<f.length;b++){e.push(c[f[b]])}var a=new Ext.Panel({autoWidth:true,autoHeight:true,border:false,layout:"table",layoutConfig:{columns:3},defaults:{}});Ext.each(e,function(j){var h=new Ext.form.Label({text:j.meal,style:{"font-size":"12px",padding:"10px"}});var i=new Ext.form.Label({text:j.normalSitting,style:{"font-size":"12px"}});var g=new Ext.form.Label({text:j.lateSitting,style:{"font-size":"12px"}});a.add(h);a.add(i);a.add(g);a.doLayout()});d.add(a);d.doLayout()}}}]}]}]}]},{xtype:"panel",title:"Wine ",items:[{xtype:"panel",height:600,width:900,style:"padding-top:10px;",listeners:{render:function(c){var e=c.findParentByType("awesomewindow").getData("wineLists");var f=e.winelist;var d=[];for(var b=0;b<f.length;b++){d.push(e[f[b]])}var a=new Ext.Panel({autoWidth:true,autoHeight:true,border:false,layout:"table",style:"padding-top:10px;",layoutConfig:{columns:1},defaults:{}});Ext.each(d,function(i){var g=new Ext.form.Label({text:i.name,style:{"font-size":"12px","font-weight":"bold",padding:"10px"}});var h=new Ext.form.TextArea({height:300,width:875,style:{"font-size":"12px"},listeners:{render:function(j){j.setValue(i.description)}}});a.add(g);a.add(h);a.doLayout()});c.add(a);c.doLayout()}}}]}]},{xtype:"button",text:"Print",winExist:false,a:"",handler:function(){if(!this.winExist){this.winExist=true;var c=window.open("","Terms Priview","height=500,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes");c.focus();var b=this.ownerCt.ownerCt.aw.data.offeringData;var d=b.nameString;var i=this.ownerCt.ownerCt.aw.data.departureDate;var h=b.duration;var g="";if(d!=""){g="<u><b>Name:</b></u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+d+"<br>"}if(i!=""){g+="<u><b>Departure:</b></u>&nbsp;&nbsp;"+i+"<br>"}if(h!=""&&typeof h!="undefined"){g+="<u><b>Duration:</b></u>&nbsp;&nbsp;&nbsp;&nbsp;"+h+"<br>"}var f=this.ownerCt.ownerCt.getData("restrictions");if(typeof f=="undefined"){f=""}else{f="<br><u><b>Rate:</b></u></br>"+f}var e=this.ownerCt.termsAndConditions;if(e!=""){e="<u><b>Extras:</b></u></br>"+e}c.document.write(g+f.innerHTML);c.location.reload();c.focus();c.print();c.close();this.winExist=false}else{c.focus()}}}],listeners:{render:function(){}}}