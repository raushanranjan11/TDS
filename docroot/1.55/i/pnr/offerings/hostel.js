{xtype:"panel",layout:Ext.isIE?"fit":"",autoScroll:true,bodyStyle:"padding: 8px;",requireStores:[{dataURI:TDS.env.dataPath+"hostel/ratings/collection",identifier:"hostel/ratings",fields:["name","dataURI"]}],items:{xtype:"awesomegrid",searchURI:TDS.env.dataPath+"search/hostels",pinnable:true,enableRowExpander:true,tbar:["Available"," ",{xtype:"datefield",name:"datePointer",excludeFromSession:true,value:TDS.env.defaultDateSearchGrid,enableKeyEvents:true,showToday:false,width:80,format:"dMy",minValue:Ext.TimerMgr.getServerCalculatedDate().clearTime()},"&plusmn;",{xtype:"omnicrementer",name:"dateDays",width:60,editable:false}," ","days"," ","-"," ","Adults:",{xtype:"omnicrementer",name:"noOfAdult",enableKeyEvents:true,width:60,listeners:{trigger:function(d,c){var b=d.ownerCt.items.itemAt(14).getValue()+d.ownerCt.items.itemAt(17).getValue()+d.getValue();d.ownerCt.items.itemAt(20).setValue(b)}}}," ","Child:",{xtype:"omnicrementer",name:"noOfChild",width:60,listeners:{trigger:function(d,c){var b=d.ownerCt.items.itemAt(11).getValue()+d.ownerCt.items.itemAt(17).getValue()+d.getValue();d.ownerCt.items.itemAt(20).setValue(b)}}}," ","Infants:",{xtype:"omnicrementer",name:"noOfInfant",width:60,listeners:{trigger:function(d,c){var b=d.ownerCt.items.itemAt(11).getValue()+d.ownerCt.items.itemAt(14).getValue()+d.getValue();d.ownerCt.items.itemAt(20).setValue(b)}}}," ","Total PAX:",{xtype:"textfield",name:"totalPax",id:"maximumOccupancyId",value:0,width:60,readOnly:true}," "," ","-"," ",{xtype:"combo",name:"ownContent",mode:"local",width:110,triggerAction:"all",editable:false,excludeFromSession:true,hidden:true,displayField:"description",valueField:"value",emptyText:"content type",value:false,store:TDS.data.countentType,listeners:{render:function(){if(TDS.env.user.isArenaOne()){this.show()}}}},"->",{text:"Help",xtype:"redbutton",cls:"x-button-blue",overCls:"x-button-blue-over",opened:false,toggle:false,handler:function(){TDS.needHelp("Search View Help","23");if(!this.opened){this.opened=true;TDS.needHelp("Search View Help","23")}else{this.opened=false;TDS.helpwindow.hide()}}}],tbar2:["Location:",{xtype:"combo",name:"countryURI",emptyText:"Type a country...",excludeFromSession:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["dataURI","name","isoCode"]}),appendData:[{name:"",dataURI:""}]}," ",{xtype:"locationcombo",name:"locationURI",excludeFromSession:true,hideTrigger:false,listeners:{beforesearch:function(d){var c=this.ownerCt;var b=c.items.itemAt(1);var a=b.getValue().substring(b.getValue().lastIndexOf("/")+1);if(a==""){b.markInvalid("Please select a country.");return false}d.searchURI=TDS.env.dataPath+"country/"+a+"/locations/collection";d.searchIdentifier="country/"+a+"/locations"}}}," ",{xtype:"checkbox",name:"includeAllLocations"}," ","Include surrounding locations"],tbar3:["Hostel Name:",{xtype:"textfield",name:"nameLike",enableKeyEvents:true,width:120}," ","ARENA Code:",{xtype:"textfield",name:"codeLike",enableKeyEvents:true,width:80}," ","Advertised rate:",{xtype:"textfield",name:"rackRateLower",enableKeyEvents:true,width:80}],store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","pinned","contactName","phoneNumber","nameString","supplierURI","code","locationToString","conversionCurrency","convertedPricingPriceSell","descriptionString","primaryHref","addressString","hostelRatingURI","termsAndConditions","noPrePaymentRequired","pytInFull","fullPytPriorDays","depositWithin","balancePriorToDeparture","depositWithinDays","depositPerOption","balancePriorToDepartureDay","graphicImgPath","supplierDetails","pricingPriceIsNett"]}),sm:new Ext.grid.RowSelectionModel(),cm:new Ext.grid.ColumnModel([{header:"Supplier",dataIndex:"supplierURI",sortable:true,renderer:function(e,d,a,f,c,b){d.attr='ext:qtip="'+a.get("supplierDetails").replace(/\"/g,"'")+'"';return TDS.util.Format.displayResourceConciseName(e)}},{header:"Location",dataIndex:"locationToString",sortable:true},{header:"Name",dataIndex:"nameString",sortable:true},{header:"ARENA Code",dataIndex:"code",width:80,fixed:true,sortable:true},{header:"Rating",dataIndex:"hostelRatingURI",width:80,fixed:true,sortable:true,renderer:TDS.util.Format.displayResourceNameRenderer()},{header:"Advertised rate",dataIndex:"convertedPricingPriceSell",width:120,fixed:true,sortable:true,renderer:function(c,b,a){return TDS.util.Price.formatPrice(c,a.data.conversionCurrency)+" ("+(a.data.pricingPriceIsNett?"Nett":"Gross")+")"}}]),sm:new Ext.grid.RowSelectionModel(),viewConfig:{forceFit:true},getRowInterface:function(a,c,b){return"pnr/offerings/hostel/layout.js"},listeners:{sessioninit:function(){var a=this.ownerCt.findParentByType("pnrpanel");var b=this.getTopToolbar().items.itemAt(11);b.setValue(a.getPassengerCount());this.appendQueryParams.currency=a.getPNRCurrency()}}}}