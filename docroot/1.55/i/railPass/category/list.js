{xtype:"panel",layout:"fit",border:false,bodyStyle:"padding: 8px;",autoScroll:true,items:{xtype:"awesomegrid",searchURI:"",enableRowExpander:false,iconCls:"icon-grid",tbar:[{xtype:"tbspecialtext",text:"Name: "},{xtype:"textfield",name:"name",enableKeyEvents:true,width:200},"->",{xtype:"redbutton",text:"Create",handler:function(){var b=this.ownerCt.ownerCt;var a="railPass/category";TDS.window.setWindow({title:"Rail Pass Category",information:"Please enter details of a new Rail Category.",interfaceURI:"railPass/category/create.js",postDataURI:a+"/railPassCategory",callback:{fn:function(c){if(c){b.submitQuery(true)}},scope:b}})}}," ",{text:"Archive",handler:function(){var c=this.buttonContainer.ownerCt;var b=c.selModel.getSelected();if(!b){return}var a=b.get("dataURI");if(!a){return}TDS.window.setWindow({title:"Archive Rail Pass Category",message:"Are you sure you want to archive this Rail Pass Category?",destinationDataURI:a,data:{archived:true},callback:{fn:function(d){if(d){c.submitQuery(true)}},scope:c}})}}],store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","name","railPassParentCategoryURI","archived","parenCategoryName"]}),sm:new Ext.grid.RowSelectionModel(),cm:new Ext.grid.ColumnModel([{header:"Pass Category Name",dataIndex:"name",sortable:true},{header:"type",dataIndex:"railPassParentCategoryURI",sortable:true,renderer:function(c,b,a){if(!c){return"Main Category"}else{return"Sub Category"}}},{header:"Main Category Name",dataIndex:"parenCategoryName",sortable:true},{header:"Active",dataIndex:"archived",sortable:true,renderer:function(c,b,a){if(c){return"No"}else{return"Yes"}}}]),viewConfig:{forceFit:true},listeners:{sessioninit:function(){this.searchURI=TDS.env.dataPath+"railPass/category/all"},rowdblclick:function(d,h,f){var b=this.ownerCt.findParentByType("form");var c=d.getStore().getAt(h);var a=c.get("dataURI");TDS.window.setWindow({title:"Update Rail Pass Category",interfaceURI:"railPass/category/edit.js",sourceDataURI:a+"/details",destinationDataURI:a,buttonOK:"Submit",callback:{fn:function(e){if(e){this.submitQuery(true)}},scope:d}})}}}}