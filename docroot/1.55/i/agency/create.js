{xtype:"form",border:false,width:450,markDataDirtyOnLoad:true,beforeSubmit:function(a){var c=this.items.itemAt(0).items.itemAt(4).items.itemAt(0);var e=c.getSelections();var d=[];for(var b=0;b<e.length;b++){d[b]=e[b].data.dataURI}a.selectedGroupAgents=d;return a},items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:520,defaults:{bodyStyle:"padding: 6px 4px 6px 4px;"},items:[{title:"Details",autoScroll:true,items:[{xtype:"panel",layout:"form",border:false,labelWidth:170,defaults:{style:"padding: 2px 4px 2px 4px;"},items:[{xtype:"textfield",name:"invoiceNo",value:1,forceSubmit:true,hidden:true},{xtype:"textfield",name:"name",fieldLabel:"Name",bodyStyle:"padding: 2px 4px 2px 4px;",width:185},{xtype:"textfield",name:"agencyArenaCode",fieldLabel:"ARENA code",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{xtype:"combo",name:"homeCurrency",store:TDS.data.currencies,fieldLabel:"Home currency",width:180,editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"value",tpl:'<tpl for="."><div class="x-combo-list-item">{text}, <span style="font-style: italic; font-size: 10px; color: #999;">{value}</span></div></tpl>',value:"..."},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Accommodation:",width:175},{xtype:"textfield",name:"defaultCommissionAcc",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageAcc",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageAcc",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Services:",width:175},{xtype:"textfield",name:"defaultCommissionAttr",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageAttr",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageAttr",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Car:",width:175},{xtype:"textfield",name:"defaultCommissionCar",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageCar",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageCar",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Cruise:",width:175},{xtype:"textfield",name:"defaultCommissionCruise",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageCruise",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageCruise",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Air:",width:175},{xtype:"textfield",name:"defaultCommissionAir",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageAir",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageAir",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Rail:",width:175},{xtype:"textfield",name:"defaultCommissionRail",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageRail",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageRail",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Railpass:",width:175},{xtype:"textfield",name:"defaultCommissionRailpass",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageRailpass",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageRailpass",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Hostel:",width:175},{xtype:"textfield",name:"defaultCommissionHostel",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageHostel",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageHostel",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Day Tour:",width:175},{xtype:"textfield",name:"defaultCommissionSightseeing",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageSightseeing",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageSightseeing",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Tour:",width:175},{xtype:"textfield",name:"defaultCommissionTour",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageTour",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageTour",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"panel",style:"padding: 3px 0px 5px 0px;",border:false,layout:"table",layoutConfig:{columns:6},defaults:{border:false},items:[{html:"Commission Transfer:",width:175},{xtype:"textfield",name:"defaultCommissionTransfer",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{width:10},{xtype:"radio",name:"markUpAsPercentageTransfer",labelSeparator:"",boxLabel:"As Amount",inputValue:false,width:85,listeners:{render:function(){this.setValue(true)}}},{xtype:"radio",name:"markUpAsPercentageTransfer",labelSeparator:"",boxLabel:"As Percentage",inputValue:true,width:100}]},{xtype:"textfield",name:"minimumCommissionPercent",fieldLabel:"Minimum commission %",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{xtype:"textfield",name:"defaultCommissionPercent",fieldLabel:"Default commission %",bodyStyle:"padding: 2px 4px 2px 4px;",width:40},{xtype:"textfield",name:"mobileCommissionPercent",fieldLabel:"Mobile Additional commission %",bodyStyle:"padding: 2px 4px 2px 4px;",width:40}]}]},{title:"Contact",layout:"form",items:[{xtype:"textfield",name:"addressLine1",fieldLabel:"Address",bodyStyle:"padding: 2px 4px 2px 4px;",width:185},{xtype:"textfield",name:"addressLine2",fieldLabel:"",labelSeparator:"",bodyStyle:"padding: 2px 4px 2px 4px;",width:185},{xtype:"textfield",name:"locality",fieldLabel:"Locality",bodyStyle:"padding: 2px 4px 2px 4px;",width:120},{xtype:"textfield",name:"state",fieldLabel:"State",bodyStyle:"padding: 2px 4px 2px 4px;",width:120},{xtype:"textfield",name:"postcode",fieldLabel:"Postcode",bodyStyle:"padding: 2px 4px 2px 4px;",width:60},{xtype:"combo",name:"countryURI",fieldLabel:"Country",emptyText:"Type a country...",minChars:1,enableKeyEvents:true,hideTrigger:true,mode:"local",width:160,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection/custom",identifier:"countries",fields:["name","dataURI"]})},{xtype:"textfield",name:"email",fieldLabel:"Email",bodyStyle:"padding: 2px 4px 2px 4px;",width:185},{xtype:"textfield",name:"phoneNumber",fieldLabel:"Phone number",bodyStyle:"padding: 2px 4px 2px 4px;",width:120},{xtype:"textfield",name:"fax",fieldLabel:"Fax",bodyStyle:"padding: 2px 4px 2px 4px;",width:120}]},{title:"Components",items:{xtype:"panel",border:false,layout:"form",labelWidth:120,defaults:{xtype:"checkbox",labelSeparator:"",inputValue:"true"},items:[{name:"permittedComponentAccommodation",fieldLabel:"Permitted components",labelSeparator:":",boxLabel:"Accommodation"},{name:"permittedComponentAttraction",boxLabel:"Services"},{name:"permittedComponentCar",boxLabel:"Car rental"},{name:"permittedComponentCruise",boxLabel:"Cruise"},{name:"permittedComponentFlight",boxLabel:"Air"},{name:"permittedComponentHostel",boxLabel:"Hostel"},{name:"permittedComponentRail",boxLabel:"Rail"},{name:"permittedComponentRailPass",boxLabel:"Rail Pass"},{name:"permittedComponentTour",boxLabel:"Tour"},{name:"permittedComponentTransfer",boxLabel:"Transfer"},{name:"permittedComponentSightseeing",boxLabel:"Day Tours"}]}},{title:"Itinerary",layout:"form",items:[{border:false,style:"padding-bottom: 2px;",html:"<p><b>Itinerary intro</b><br/>The intro appears as the first section on the itinerary.</p>"},{xtype:"textarea",name:"itineraryIntro",height:110,hideLabel:true,labelSeparator:"",anchor:"100%"},{border:false,style:"padding-bottom: 2px;",html:"<p><b>Itinerary outro</b><br/>The outro appears as the last section on the itinerary.</p>"},{xtype:"textarea",name:"itineraryOutro",height:110,hideLabel:true,labelSeparator:"",anchor:"100%"}]},{title:"Group Member",hidden:true,layout:"form",items:[{xtype:"grid",width:400,height:270,border:false,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,viewConfig:{forceFit:true},store:new Ext.data.JsonStore({id:"dataURI",fields:["dataURI","pinned","agencyArenaCode","name","locality","state","postcode","countryURI","homeCurrency","phoneNumber","email","createdDate","updatedDate","status"]}),sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Group name",dataIndex:"name",width:200},{header:"Status",dataIndex:"status",width:100,renderer:function(b,c,a){if(a.get("status")=="A"){return"Active"}else{if(a.get("status")=="C"){return"Canceled"}else{if(a.get("status")=="S"){return"Suspend"}else{return"In Active"}}}}}],listeners:{beforerender:function(){var b=TDS.env.dataPath+"agencies/adminAgency/collection";Ext.Ajax.request({url:b,method:"GET",callback:function a(k,d,f){var e=Ext.util.JSON.decode(f.responseText);var j=e.adminAgencies;if(typeof j=="undefined"){return}var h=[];for(var c=0;c<j.length;c++){e[j[c]].dataURI=j[c];h.push(e[j[c]])}var g=this.store;g.loadData(h);this.getView().refresh()},scope:this})}}}]}]}]}