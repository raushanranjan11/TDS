{xtype:"form",border:false,width:570,beforeSubmit:function(e){var d=0;var c=this.ownerCt;var b=c.aw.data;var f=b.type;if(f=="ACCOMMODATION"){d=1}else{if(f=="TOUR"){d=2}else{if(f=="CAR"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(5).items.itemAt(1).items.itemAt(1).items.itemAt(0).getData();e.category=b.data}else{if(f=="TRANSFER"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(4).items.itemAt(0).getData();e.mode=b.data}else{if(f=="SIGHTSEEING"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(3).items.itemAt(0).getData();e.paxType=b.data}else{if(f=="RAIL"){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(6).items.itemAt(0).getData();e.classType=b.data}}}}}}if(d>0){var b=this.items.itemAt(0).items.itemAt(0).items.itemAt(d).items.itemAt(2).getData();e.roomTypes=b.data}return e},requireStores:[{dataURI:TDS.env.dataPath+"suppliers/collection/conciseLoadData",identifier:"suppliers",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]}],items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:510,width:570,items:[{title:"Quote Details",autoScroll:true,items:[{xtype:"fieldset",layout:"form",border:false,autoHeight:true,labelWidth:100,calculateCommission:function(){var c=this.items;var b=(c.itemAt(14).getValue()/100)*c.itemAt(11).getValue();if(!isNaN(b)){c.itemAt(15).setValue(b.toFixed(2))}},items:[{xtype:"label",fieldLabel:"Component",value:"",height:40,bodyStyle:"padding: 2px 4px 2px 4px;",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;this.ownerCt.items.itemAt(3).items.itemAt(1).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).enable(true);this.ownerCt.items.itemAt(4).enable(true);this.ownerCt.items.itemAt(5).enable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).enable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).enable(true);this.ownerCt.items.itemAt(7).enable(true);this.ownerCt.items.itemAt(7).items.itemAt(2).enable(true);this.ownerCt.ownerCt.items.itemAt(1).hide(true);this.ownerCt.ownerCt.items.itemAt(2).hide(true);this.ownerCt.ownerCt.items.itemAt(3).hide(true);this.ownerCt.ownerCt.items.itemAt(4).hide(true);this.ownerCt.ownerCt.items.itemAt(5).hide(true);this.ownerCt.ownerCt.items.itemAt(6).hide(true);this.ownerCt.ownerCt.items.itemAt(7).hide(true);this.ownerCt.ownerCt.items.itemAt(8).hide(true);this.ownerCt.ownerCt.items.itemAt(1).disable(true);this.ownerCt.ownerCt.items.itemAt(2).disable(true);this.ownerCt.ownerCt.items.itemAt(3).disable(true);this.ownerCt.ownerCt.items.itemAt(4).disable(true);this.ownerCt.ownerCt.items.itemAt(5).disable(true);this.ownerCt.ownerCt.items.itemAt(6).disable(true);this.ownerCt.ownerCt.items.itemAt(7).disable(true);this.ownerCt.ownerCt.items.itemAt(8).disable(true);if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_ACCOMMODATION){this.ownerCt.ownerCt.items.itemAt(1).show(true);this.ownerCt.ownerCt.items.itemAt(1).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("")}else{if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){this.ownerCt.ownerCt.items.itemAt(2).show(true);this.ownerCt.ownerCt.items.itemAt(2).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(6).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(3).items.itemAt(2).show(true);this.ownerCt.items.itemAt(6).items.itemAt(2).show(true)}else{if((typeof d!="undefined"&&d==TDS.data.componentType.TYPE_SIGHTSEEING)||(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TRANSFER)){if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_SIGHTSEEING){this.ownerCt.ownerCt.items.itemAt(3).show(true);this.ownerCt.ownerCt.items.itemAt(3).enable(true)}else{this.ownerCt.ownerCt.items.itemAt(4).show(true);this.ownerCt.ownerCt.items.itemAt(4).enable(true)}this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(4).disable(true);this.ownerCt.items.itemAt(5).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(7).disable(true)}else{if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_RAIL){this.ownerCt.ownerCt.items.itemAt(6).show(true);this.ownerCt.ownerCt.items.itemAt(6).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(7).items.itemAt(2).disable(true)}else{if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CAR){this.ownerCt.ownerCt.items.itemAt(5).show(true);this.ownerCt.ownerCt.items.itemAt(5).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(6).items.itemAt(1).hide(true);this.ownerCt.items.itemAt(3).items.itemAt(2).show(true);this.ownerCt.items.itemAt(6).items.itemAt(2).show(true)}else{if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_AIR){this.ownerCt.ownerCt.items.itemAt(7).show(true);this.ownerCt.ownerCt.items.itemAt(7).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).hide(true);this.ownerCt.items.itemAt(6).items.itemAt(2).hide(true);this.ownerCt.items.itemAt(3).items.itemAt(1).show(true);this.ownerCt.items.itemAt(6).items.itemAt(1).show(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(7).disable(true)}else{if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CRUISE){this.ownerCt.ownerCt.items.itemAt(8).show(true);this.ownerCt.ownerCt.items.itemAt(8).enable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(3).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(3).items.itemAt(2).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(1).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(2).disable(true);this.ownerCt.items.itemAt(6).items.itemAt(1).setValue("");this.ownerCt.items.itemAt(6).items.itemAt(2).setValue("")}}}}}}}if(d===TDS.data.componentType.TYPE_SIGHTSEEING){d=TDS.data.componentType.TYPE_SIGHTSEEING_NEW}var e=b.parameters;this.setText("Component:&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+d,false)}}},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,width:390,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Start Country/City:",width:Ext.isIE?105:110},{xtype:"combo",name:"countryFromCode",emptyText:"Type a country...",excludeSubmit:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"isoCode",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","isoCode"]}),appendData:[{name:"",dataURI:""}]},{xtype:"locationcombo",name:"locationFromURI",style:"margin-left: 2px;",listeners:{beforesearch:function(c){var b=this.ownerCt;var a=b.items.itemAt(1);if(a.getValue()==""){a.markInvalid("Please select a country.");return false}c.searchURI=TDS.env.dataPath+"country/"+a.getValue()+"/locations/collection";c.searchIdentifier="country/"+a.getValue()+"/locations"}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"From/In Date:",width:Ext.isIE?105:110},{xtype:"datefield",name:"dateFrom",format:"dMy",width:125},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time:",width:70},{xtype:"combo",fieldLabel:"Time",name:"startTime",style:"margin-left: 5px;",mode:"local",width:80,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"numeric",valueField:"numeric",emptyText:"Time",store:TDS.data.time}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"P/U Location",width:105},{xtype:"airportcombo",fieldLabel:"P/U Location",name:"airportFromURI",style:"margin-left: 5px;",hideTrigger:false,width:280,emptyText:"Location"},{xtype:"combo",fieldLabel:"D/O Location",name:"pickUp",style:"margin-left: 5px;",mode:"local",width:280,hidden:true,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Location",store:TDS.data.pickUpDropOffLocation,listeners:{render:function(){var e=this.ownerCt.findParentByType("awesomewindow");var d=e.aw.data;var f=Ext.util.JSON.decode(d.parameters);var c=this;setTimeout(function(){c.setValue(f[c.name])},500)}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"Finish Country/City:",width:Ext.isIE?105:110},{xtype:"combo",name:"countryToCode",emptyText:"Type a country...",excludeSubmit:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"isoCode",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","isoCode"]}),appendData:[{name:"",dataURI:""}]},{xtype:"locationcombo",name:"locationToURI",style:"margin-left: 2px;",listeners:{beforesearch:function(c){var b=this.ownerCt;var a=b.items.itemAt(1);if(a.getValue()==""){a.markInvalid("Please select a country.");return false}c.searchURI=TDS.env.dataPath+"country/"+a.getValue()+"/locations/collection";c.searchIdentifier="country/"+a.getValue()+"/locations"}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"To/Out Date:",width:Ext.isIE?105:110},{xtype:"datefield",name:"dateTo",format:"dMy",width:125},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time:",width:70},{xtype:"combo",fieldLabel:"Time",name:"finishTime",style:"margin-left: 5px;",mode:"local",width:80,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"numeric",valueField:"numeric",emptyText:"Time",store:TDS.data.time}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,width:390,layoutConfig:{columns:5},items:[{html:"D/O Location:",width:105},{xtype:"airportcombo",fieldLabel:"D/O Location",name:"airportToURI",style:"margin-left: 5px;",hideTrigger:false,width:280,emptyText:"Location"},{xtype:"combo",fieldLabel:"D/O Location",name:"dropOff",style:"margin-left: 5px;",mode:"local",width:280,hidden:true,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Location",store:TDS.data.pickUpDropOffLocation,listeners:{render:function(){var e=this.ownerCt.findParentByType("awesomewindow");var d=e.aw.data;var f=Ext.util.JSON.decode(d.parameters);var c=this;setTimeout(function(){c.setValue(f[c.name])},500)}}}]},{xtype:"panel",layout:"table",width:390,style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Duration:",width:Ext.isIE?105:110},{html:"Nights:",width:60},{xtype:"numberfield",name:"durationNights",width:65},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Days:",width:80},{xtype:"numberfield",name:"durationDays",width:75}]},{xtype:"panel",layout:"table",width:390,style:"padding: 0; margin-bottom: 4px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:7},items:[{html:"Adults:",width:Ext.isIE?105:110},{xtype:"omnicrementer",name:"noOfAdults",width:55},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child:",width:53},{xtype:"omnicrementer",name:"noOfChildren",width:55},{html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Infants:",width:62},{xtype:"omnicrementer",name:"noOfInfants",width:55}]}]},{xtype:"fieldset",style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_ACCOMMODATION){this.enable(true);this.show(true)}}},items:[{xtype:"textfield",fieldLabel:"Hotel",name:"name",width:280},{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:4},items:[{html:"Type:",border:false,hideBorders:false,width:110},{xtype:"combo",fieldLabel:"Type",name:"typeClassCategory",mode:"local",width:190,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]}),listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_ACCOMMODATION){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"combo",fieldLabel:"Rating",name:"rating",style:"margin-left: 10px;",mode:"local",width:80,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Rating",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"accommodation/ratings/collection",identifier:"accommodation/ratings",fields:["name","dataURI"]}),listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_ACCOMMODATION){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}}]},{columnWidth:1,xtype:"editorgrid",clicksToEdit:1,enableRowExpander:false,sessionExpandedRows:false,style:"padding: 0; margin-bottom: 10px;margin-top: 10px;",autoHeight:true,width:460,autoScroll:true,border:true,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","roomType","plan","rooms","price","extras","status"]}),getPriceTotal:function(){var f=this.getStore().data;var e=0;for(var c=0,g=[];c<f.length;c++){var b=f.items[c].data.price;if(b!=null&&b!=""&&typeof b!="undefined"){e+=b}}},getData:function(){var b=this.getStore().data;for(var a=0,c=[];a<b.length;a++){c.push({roomType:b.items[a].data.roomType,plan:b.items[a].data.plan,rooms:b.items[a].data.rooms,price:b.items[a].data.price,extras:b.items[a].data.extras,status:b.items[a].data.status})}return{data:c}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Room Type",dataIndex:"roomType",width:100,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.accommodationRoomTypeMQ})},{header:"Plan",dataIndex:"plan",width:150,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]}),appendData:[{name:" ",dataURI:""}]})},{header:"No",dataIndex:"rooms",width:30,fixed:true,editor:new Ext.form.NumberField({})},{header:"P/N",dataIndex:"price",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Extras",dataIndex:"extras",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["NA","NA"],["QT","QT"],["OK","OK"]]})}],viewConfig:{forceFit:true},listeners:{beforerender:function(a){var b=this.ownerCt.findParentByType("tabpanel")},render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var g=this.ownerCt.findParentByType("tabpanel");var i=this.ownerCt.findParentByType("awesomewindow");var h=i.aw.data;var j=h.type;if(typeof j!="undefined"&&j==TDS.data.componentType.TYPE_ACCOMMODATION){var e=Ext.util.JSON.decode(h.parameters);var d=Ext.util.JSON.decode(e.roomTypes);var f=d;if(typeof f=="undefined"){f=[]}this.selModel.locked=true;var c=this;var b=c.store;b.loadData(f)}}}}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){this.enable(true);this.show(true)}}},style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 2px;margin-top: 2px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Type:",width:110},{xtype:"combo",fieldLabel:"Type",name:"typeClassCategory",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"tour/types/collection",identifier:"tour/types",fields:["name","dataURI"]}),listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TOUR){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}}]},{xtype:"textfield",fieldLabel:"Package Name",name:"name",width:280},{columnWidth:1,xtype:"editorgrid",clicksToEdit:1,enableRowExpander:false,sessionExpandedRows:false,style:"padding: 0; margin-bottom: 10px;margin-top: 10px;",autoHeight:true,width:520,autoScroll:true,border:true,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","roomType","plan","rooms","price","extras","status","paxType"]}),getData:function(){var b=this.getStore().data;for(var a=0,c=[];a<b.length;a++){c.push({roomType:b.items[a].data.roomType,plan:b.items[a].data.plan,rooms:b.items[a].data.rooms,price:b.items[a].data.price,extras:b.items[a].data.extras,paxType:b.items[a].data.paxType,status:b.items[a].data.status})}return{data:c}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Room Type",dataIndex:"roomType",width:100,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.tourRoomTypeMQ})},{header:"Plan",dataIndex:"plan",width:120,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/basises/collection",identifier:"rate/basises",fields:["name","dataURI"]}),appendData:[{name:" ",dataURI:""}]})},{header:"Pax Type",dataIndex:"paxType",width:70,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})})},{header:"Pax No",dataIndex:"rooms",width:60,fixed:true,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Extras",dataIndex:"extras",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Gross/Nett",hidden:true,dataIndex:"nett",width:70,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["Gross","Gross"],["Gross","Nett"]]})},{header:"Markup",hidden:true,dataIndex:"markup",width:50,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Comm%",hidden:true,dataIndex:"comm",width:50,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["NA","NA"],["QT","QT"],["OK","OK"]]})}],viewConfig:{forceFit:true},listeners:{beforerender:function(a){var b=this.ownerCt.findParentByType("tabpanel")},render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var h=this.ownerCt.findParentByType("tabpanel");var j=this.ownerCt.findParentByType("awesomewindow");var i=j.aw.data;var k=i.type;if(typeof k!="undefined"&&k==TDS.data.componentType.TYPE_TOUR){var f=Ext.util.JSON.decode(i.parameters);var e=Ext.util.JSON.decode(f.roomTypes);var g=e;if(typeof g=="undefined"){g=[]}var c=this;var b=c.store;b.loadData(g);this.selModel.locked=true;var d=this.getSelections()}}}}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_SIGHTSEEING){this.enable(true);this.show(true)}}},style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"editorgrid",height:120,width:390,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.JsonStore({url:"",identifier:"",fields:["paxType","noOfPax","price","status"]}),viewConfig:{forceFit:true},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.paxType;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Pax Type",dataIndex:"paxType",width:160,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})})},{header:"No Of Pax",dataIndex:"noOfPax",width:80,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["NA","NA"],["QT","QT"],["OK","OK"]]})}],listeners:{render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var g=this.ownerCt.findParentByType("tabpanel");var i=this.ownerCt.findParentByType("awesomewindow");var h=i.aw.data;var j=h.type;if(typeof j!="undefined"&&j==TDS.data.componentType.TYPE_SIGHTSEEING){var e=Ext.util.JSON.decode(h.parameters);var d=Ext.util.JSON.decode(e.paxType);var f=d;if(typeof f=="undefined"){f=[]}var c=this;var b=c.store;b.loadData(f)}}}},{xtype:"textfield",fieldLabel:"Arrival Details",name:"arivalDetails",width:280,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_SIGHTSEEING){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"textfield",fieldLabel:"Departure Details",name:"departDetails",width:280,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_SIGHTSEEING){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"textfield",fieldLabel:"Service Name",name:"name",width:280}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TRANSFER){this.enable(true);this.show(true)}}},style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"editorgrid",height:120,width:390,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.JsonStore({url:"",identifier:"",fields:["mode","paxType","noOfPax","price","status"]}),viewConfig:{},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.mode;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Mode",dataIndex:"mode",width:140,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"transfer/modetypes/collection",identifier:"transfer/modetypes",fields:["name","dataURI"]})})},{header:"Pax Type",dataIndex:"paxType",width:160,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})})},{header:"No Of Pax",dataIndex:"noOfPax",width:80,fixed:true,editor:new Ext.form.NumberField({})},{header:"Price",dataIndex:"price",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["NA","NA"],["QT","QT"],["OK","OK"]]})}],listeners:{render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var g=this.ownerCt.findParentByType("tabpanel");var i=this.ownerCt.findParentByType("awesomewindow");var h=i.aw.data;var j=h.type;if(typeof j!="undefined"&&j==TDS.data.componentType.TYPE_TRANSFER){var e=Ext.util.JSON.decode(h.parameters);var d=Ext.util.JSON.decode(e.mode);var f=d;if(typeof f=="undefined"){f=[]}var c=this;var b=c.store;b.loadData(f)}}}},{xtype:"textfield",fieldLabel:"Arrival Details",name:"arivalDetails",width:280,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TRANSFER){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"textfield",fieldLabel:"Departure Details",name:"departDetails",width:280,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_TRANSFER){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}}]},{border:false,layout:"column",autoHeight:true,autoWidth:true,items:[{xtype:"fieldset",layout:"table",style:"padding-bottom: 10px; padding-top: 10px;, margin-bottom:10px",hidden:true,columnWidth:1,autoHeight:true,hideBorders:true,layoutConfig:{columns:3},listeners:{render:function(){;var d=this.ownerCt.findParentByType("awesomewindow");var c=d.aw.data;var g=c.type;if(typeof g!="undefined"&&g==TDS.data.componentType.TYPE_CAR){var h=Ext.util.JSON.decode(c.parameters);var e=this.items;for(var f=1;f<=e.length;f++){var b=e.itemAt(f);if(typeof b!="undefined"&&typeof b.name!="undefined"){if(b.xtype=="checkbox"){b.setValue(h[b.name])}else{if(b.inputValue+""==h[b.name]){b.setValue(true)}}}}}}},defaults:{style:"padding:10px",xtype:"checkbox",width:250,bodyStyle:"padding: 0; padding-left: 14px; "},items:[{xtype:"label",value:"&nbsp;",width:30},{name:"navGPS",boxLabel:"Nav/GPS"},{boxLabel:"Collision Damage Waiver",name:"collisionDamageWaiver"},{xtype:"label",width:30},{boxLabel:"Infant Seat",name:"infantSeat"},{name:"oneWayRental",boxLabel:"One Way Rental"},{xtype:"label",width:30},{name:"toddlerSeat",boxLabel:"Toddler Seat"},{name:"additionalDrive",boxLabel:"Additional Drive"},{xtype:"label",width:30},{name:"childSeat",boxLabel:"Child Seat"},{name:"underAgeDrive",boxLabel:"Under Age Drivwe"}]},{xtype:"fieldset",columnWidth:1,style:"padding-bottom: 8px; padding-top: 10px;, margin-bottom:10px",border:false,autoHeight:true,labelWidth:105,defaults:{style:"padding-left: 6px; margin-bottom: 6px;",bodyStyle:"padding: 0; padding-left: 6px; "},listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CAR){this.enable(true);this.show(true)}}},items:[{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:4},items:[{html:"Driver's Age:",border:false,hideBorders:false,width:107},{xtype:"omnicrementer",name:"driverAge",width:70,listeners:{render:function(){var e=this.ownerCt.findParentByType("awesomewindow");var d=e.aw.data;var f=d.type;if(typeof f!="undefined"&&f==TDS.data.componentType.TYPE_CAR){var g=Ext.util.JSON.decode(d.parameters);var c=this;setTimeout(function(){c.setValue(g[c.name])},500)}}}},{border:false,width:150},{xtype:"button",text:"Options",enableToggle:true,handler:function(){if(this.pressed){this.ownerCt.ownerCt.ownerCt.items.itemAt(0).show()}else{this.ownerCt.ownerCt.ownerCt.items.itemAt(0).hide()}}}]},{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:2},items:[{xtype:"editorgrid",height:120,width:510,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["category","type","transMission","price","status"]}),viewConfig:{},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.category;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Category",dataIndex:"category",width:140,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:TDS.data.carRentalCategoryMQ})},{header:"Type",dataIndex:"type",width:160,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",emptyText:"Type",store:TDS.data.carRentalVehicleType})},{header:"T/mission",dataIndex:"transMission",width:80,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",emptyText:"Type",store:TDS.data.carRentalTransmission})},{header:"Price P/D",dataIndex:"price",width:70,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["NA","NA"],["QT","QT"],["OK","OK"]]})}],listeners:{render:function(){;this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var g=this.ownerCt.findParentByType("tabpanel");var i=this.ownerCt.findParentByType("awesomewindow");var h=i.aw.data;var j=h.type;if(typeof j!="undefined"&&j==TDS.data.componentType.TYPE_CAR){var e=Ext.util.JSON.decode(h.parameters);var d=Ext.util.JSON.decode(e.category);var f=d;if(typeof f=="undefined"){f=[]}var c=this;var b=c.store;b.loadData(f)}}}}]},{xtype:"panel",layout:"table",border:false,hideBorders:false,layoutConfig:{columns:2},items:[{html:"Car Company",border:false,hideBorders:false,width:107},{xtype:"textfield",fieldLabel:"Car Company",name:"name",width:280}]}]}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_RAIL){this.enable(true);this.show(true)}}},style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"editorgrid",height:120,width:500,style:"padding: 0; margin-bottom: 6px;margin-top: 6px;",store:new Ext.data.JsonStore({url:"",identifier:"",fields:["classType","seat","cabin","price","status"]}),viewConfig:{},getData:function(){var c=this.getStore().data;for(var b=0,e=[];b<c.length;b++){var a=c.items[b].data.classType;if(a!=""){e.push(c.items[b].data)}}return{data:e}},sm:new Ext.grid.CheckboxSelectionModel(),columns:[{header:"Class",dataIndex:"classType",width:140,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"value",valueField:"value",emptyText:"Type",store:TDS.data.railClass})},{header:"Seat",dataIndex:"seat",width:160,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",emptyText:"Type",store:["Yes","No"]})},{header:"Cabin",dataIndex:"cabin",width:80,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"value",valueField:"value",emptyText:"Type",store:TDS.data.railCabinType})},{header:"Price",dataIndex:"price",width:60,fixed:true,editor:new Ext.form.NumberField({}),renderer:TDS.util.Price.conversionPriceRenderer},{header:"Extras",dataIndex:"extras",hidden:true,width:60,fixed:true},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"name",emptyText:"Type",store:[["NA","NA"],["QT","QT"],["OK","OK"]]})}],listeners:{render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var g=this.ownerCt.findParentByType("tabpanel");var i=this.ownerCt.findParentByType("awesomewindow");var h=i.aw.data;var j=h.type;if(typeof j!="undefined"&&j==TDS.data.componentType.TYPE_RAIL){var e=Ext.util.JSON.decode(h.parameters);var d=Ext.util.JSON.decode(e.classType);var f=d;if(typeof f=="undefined"){f=[]}var c=this;var b=c.store;b.loadData(f)}}}},{xtype:"textfield",fieldLabel:"Service Name",name:"name",width:280}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_AIR){this.enable(true);this.show(true)}}},style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"combo",fieldLabel:"Class",name:"typeClassCategory",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"name",displayField:"text",valueField:"value",store:TDS.data.airClassMQ,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_AIR){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"omnicrementer",fieldLabel:"No Of Seats",name:"noOfSeats",width:40,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_AIR){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"textfield",fieldLabel:"Special Food",name:"specialFood",width:280,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_AIR){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"textfield",fieldLabel:"Airline",name:"name",width:280}]},{xtype:"fieldset",listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CRUISE){this.enable(true);this.show(true)}}},style:"margin-top: 0px; margin-right: 2px;",autoHeight:true,labelWidth:105,items:[{xtype:"combo",fieldLabel:"Category",name:"typeClassCategory",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"text",valueField:"value",emptyText:"Category",store:TDS.data.cruiseCategory,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CRUISE){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 8px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:4},listeners:{render:function(){var d=this.ownerCt.findParentByType("awesomewindow");var c=d.aw.data;var g=c.type;if(typeof g!="undefined"&&g==TDS.data.componentType.TYPE_CRUISE){var h=Ext.util.JSON.decode(c.parameters);var e=this.items;for(var f=1;f<=e.length;f++){var b=e.itemAt(f);if(typeof b!="undefined"&&typeof b.name!="undefined"){b.setValue(h[b.name])}}}}},items:[{html:"Connect Cabins:",width:110},{xtype:"radio",name:"connectCabin",boxLabel:"No",inputValue:false,width:120},{xtype:"radio",name:"connectCabin",boxLabel:"Yes",inputValue:true,width:65}]},{xtype:"combo",name:"location",mode:"local",fieldLabel:"Location",width:280,triggerAction:"all",editable:true,displayField:"text",valueField:"value",store:TDS.data.cruiseLocation,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CRUISE){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"combo",fieldLabel:"Deck",name:"deck",style:"margin-left: 0px;",mode:"local",width:280,triggerAction:"all",editable:false,excludeFromSession:true,displayField:"text",valueField:"value",emptyText:"Deck",store:TDS.data.cruiseDeck,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;if(typeof d!="undefined"&&d==TDS.data.componentType.TYPE_CRUISE){var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}}},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 8px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:4},listeners:{render:function(){var d=this.ownerCt.findParentByType("awesomewindow");var c=d.aw.data;var g=c.type;if(typeof g!="undefined"&&g==TDS.data.componentType.TYPE_CRUISE){var h=Ext.util.JSON.decode(c.parameters);var e=this.items;for(var f=1;f<=e.length;f++){var b=e.itemAt(f);if(typeof b!="undefined"&&typeof b.name!="undefined"){if(b.xtype=="checkbox"){b.setValue(h[b.name])}else{if(b.inputValue+""==h[b.name]){b.setValue(true)}}}}}}},items:[{html:"Obstruction:",width:110},{xtype:"radio",name:"obstruction",boxLabel:"No",inputValue:false,width:120},{xtype:"radio",name:"obstruction",boxLabel:"Yes",inputValue:true,width:65}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 8px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:4},listeners:{render:function(){var d=this.ownerCt.findParentByType("awesomewindow");var c=d.aw.data;var g=c.type;if(typeof g!="undefined"&&g==TDS.data.componentType.TYPE_CRUISE){var h=Ext.util.JSON.decode(c.parameters);var e=this.items;for(var f=1;f<=e.length;f++){var b=e.itemAt(f);if(typeof b!="undefined"&&typeof b.name!="undefined"){if(b.xtype=="checkbox"){b.setValue(h[b.name])}else{if(b.inputValue+""==h[b.name]){b.setValue(true)}}}}}}},items:[{html:"Configuration:",width:110},{xtype:"radio",name:"configType",boxLabel:"Twin",inputValue:"twin",width:120},{xtype:"radio",name:"configType",boxLabel:"Queen",inputValue:"queen",width:65},{xtype:"radio",name:"configType",boxLabel:"King",inputValue:"king",width:65},{html:" ",width:110},{xtype:"checkbox",boxLabel:"Rollaway",name:"rollaway",width:120},{xtype:"checkbox",boxLabel:"Crib",name:"crib",width:115}]},{xtype:"textfield",fieldLabel:"Cruise Line",name:"name",width:280}]},{xtype:"fieldset",style:"margin-top: 0px; margin-right: 2px;",height:90,autoHight:true,labelWidth:105,items:[{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 14px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Total Price:",hidden:true},{xtype:"numberfield",hidden:true,name:"pricingPriceBaseSell"},{html:" ",hidden:true,width:50},{html:"Net/Gross:",width:70},{xtype:"combo",forceSubmit:true,name:"pricingPriceIsNett",mode:"local",fieldLabel:"Gross Or Nett",width:80,triggerAction:"all",editable:false,value:"false",store:[["false","Gross"],["true","Nett"]],updateInterface:function(a){if(a==true||a=="true"){this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(4).disable(true);this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(4).setValue(0)}else{this.ownerCt.ownerCt.items.itemAt(1).items.itemAt(4).enable(true)}},listeners:{select:function(d,b,a){this.updateInterface(b.get("value"))},render:function(){var e=this.ownerCt.ownerCt.findParentByType("awesomewindow");var d=e.aw.data;this.setValue(d.pricingPriceIsNett);var c=this;if(d.pricingPriceIsNett){setTimeout(function(){c.updateInterface(true)},500)}else{setTimeout(function(){c.updateInterface(false)},500)}}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 14px;margin-top: 8px;",border:false,hideBorders:true,layoutConfig:{columns:5},items:[{html:"Booking Ref:",width:70},{xtype:"textfield",name:"bookingReferenceNumber",width:80,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;var d=b.type;var e=Ext.util.JSON.decode(b.parameters);this.setValue(e[this.name])}}},{html:" ",width:50},{html:"Comm %:",width:70},{xtype:"numberfield",name:"pricingPriceCommission",width:80,listeners:{render:function(){var e=this.ownerCt.findParentByType("awesomewindow");var d=e.aw.data;var f=d.type;var g=Ext.util.JSON.decode(d.parameters);var c=this;this.setValue(g[this.name])}}}]}]}]},{title:"Additional Info",layout:"fit",items:{xtype:"textarea",name:"description",height:190,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:true,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}},{title:"Extras",layout:"fit",items:{xtype:"textarea",name:"extraNotes",height:200,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:true,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}}]}]}