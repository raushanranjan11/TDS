{requireStores:[{dataURI:TDS.env.dataPath+"accommodation/ratings/collection",identifier:"accommodation/ratings",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]},{dataURI:TDS.env.dataPath+"tour/types/collection",identifier:"tour/types",fields:["name","dataURI"]},{dataURI:TDS.env.dataPath+"transfer/modetypes/collection",identifier:"transfer/modetypes",fields:["name","dataURI"]}],xtype:"panel",border:false,layout:"column",bodyStyle:"padding: 2px;",items:[{xtype:"panel",border:false,frame:false,layout:"column",columnWidth:1,items:[{xtype:"panel",layout:"column",bodyStyle:"padding: 2px;",columnWidth:0.11,hideBorders:true,height:162,border:false,items:[{tpl:new Ext.XTemplate(["<p>Agent:</b> {agencyName}</p>","<p>Consultant:</b> {consultantName}</p>","<p>Tel:</b> {telephoneNo}</p>","<p>Email:</b> {email}</p>","<p>Location:</b> {agentLocation}</p>","<p>Country:</b> {country}</p>","<p>Date / Time:</b> {bookingDateTime}</p>"]),listeners:{render:function(){var a=this.ownerCt.findParentByType("tabpanel");var b=a.getComponentDetail("agencyURI");Ext.Ajax.request({url:TDS.env.dataPath+b+"?forceGet=true",method:"GET",callback:function(h,d,f){if(d){try{var c=Ext.util.JSON.decode(f.responseText);this.tpl.overwrite(this.body,{agencyName:TDS.util.Format.displayResourceName(b),consultantName:a.getComponentDetail("createdByUserFullNameString"),telephoneNo:c.phoneNumber,email:c.email,agentLocation:c.locality,country:TDS.util.Format.displayResourceName(c.countryURI),bookingDateTime:TDS.util.Format.dateSpecial(a.getComponentDetail("createdDate"),TDS.env.dateTimeFormatDisplay)})}catch(g){}}},scope:this})}}}]},{columnWidth:0.445,xtype:"panel",height:300,border:true,items:[{}],listeners:{render:function(){;var f;var h;var e=this;var d=this.ownerCt.findParentByType("tabpanel");var b=d.getComponentDetail("dataURI");var g=d.getComponentDetail("supplierParameters");this.items.itemAt(0).html='<div id="'+d.getComponentDetail("dataURI")+'">'+d.getComponentDetail("dataURI")+"</div>";var a=d.getComponentDetail("dataURI");Ext.Ajax.request({url:TDS.env.dataPath+b+"/passengers/collection/concise",method:"GET",callback:function(k,i,j){if(i){h=Ext.util.JSON.decode(j.responseText);f=h[b+"/passengers"];if(typeof f=="undefined"){return}c()}},scope:this});function c(){var aV=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var bi=d.getComponentDetail("type");var cd="";if(aV.accommodationType){cd=TDS.util.Format.displayResourceName(aV.accommodationType)}var cb=d.getComponentDetail("extraNotes");cb=cb.replace(/\n/g,"<br>");cb=cb.replace(/ /g,"&nbsp;");var B="";var J=d.getComponentDetail("status");var aP='<div style="height:90px;"><div  style="height:90px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;">'+cb+'</b></div><div  style="height:90px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">'+cb+"</b></div></div>";var bU="";var bg="";var w="undefined";if(g!=""){w=Ext.util.JSON.decode(g)}var bX=d.getComponentDetail("pricingPriceBaseCurrency");if(bi==TDS.data.componentType.TYPE_ACCOMMODATION){var aY=0;var x=0;var aA="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var bJ=Ext.util.JSON.decode(bn.noOfNights);var a1=TDS.util.Format.displayResourceName(bn.rating);var A=bn.address;var ak=bn.city;var bh=bn.country;var o=bn.telephone;var cf=bn.email;var az=d.getComponentDetail("name");if(typeof w!="undefined"&&w!="undefined"&&typeof w.address!="undefined"){if(w.address!=A){A='<font color="red">'+w.address+"</font>"}}if(typeof w!="undefined"&&typeof w.city!="undefined"){if(w.city!=ak){ak='<font color="red">'+w.city+"</font>"}}if(typeof w!="undefined"&&typeof w.country!="undefined"){if(w.country!=az){bh='<font color="red">'+w.country+"</font>"}}if(typeof bh=="undefined"){bh=""}if(bh!=""){bh=TDS.util.Format.displayResourceName("country/"+bh)}if(typeof w!="undefined"&&typeof w.telephone!="undefined"){if(w.telephone!=o){o='<font color="red">'+w.telephone+"</font>"}}if(typeof o=="undefined"){o=""}if(typeof w!="undefined"&&typeof w.email!="undefined"){if(w.email!=cf){cf='<font color="red">'+w.email+"</font>"}}if(typeof cf=="undefined"){cf=""}if(typeof w!="undefined"&&typeof w.name!="undefined"){if(w.name!=az){az='<font color="red">'+w.name+"</font>"}}var bI=bn.hotelPU;var cj=bn.mainRooms;var b8=Ext.util.JSON.decode(bn.gridData);var ap="<tr>";ap+="<td> "+d.getComponentDetail("locationFromString")+"</td>";ap+="<td >"+az+"</td>";ap+="<td >"+a1+"</td>";ap+="<td >"+TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay)+"</td>";ap+="<td >"+TDS.util.Format.dateSpecial(d.getComponentDetail("dateTo"),TDS.env.dateFormatDisplay)+"</td>";ap+="<td >"+bJ+"</td>";ap+="</tr>";var aK=0,F=0,ag=0;var ao="";var P=[];if(typeof b8!="undefined"){P=b8.data}if(typeof P=="undefined"||P.length<1){ao+="<tr>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td > </td>";ao+="</tr>"}else{;var bl=[];var W=0;for(var bE=0;bE<P.length;bE++){var cd=b8.data[bE].roomType;if(bl.indexOf(cd)!=-1){continue}bl.push(cd);var v="";var p=0;for(var bD=0;bD<P.length;bD++){if(P[bD].roomType==cd){p++}}var aN=0;var aw=0;if(typeof w!="undefined"&&w!="undefined"&&w.roomTypesWithPrice!=""&&typeof w.roomTypesWithPrice!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice).data;for(var bx=0;bx<ce.length;bx++){if(cd==ce[bx].roomType){aN=ce[bx].priceBaseSell*p*bJ;aw=ce[bx].priceBaseSell;W+=aN;v=ce[bx].status}}}var X=b8.data[bE].category;var L=b8.data[bE].extras;var O=b8.data[bE].plan;ao+="<tr>";ao+="<td >"+cd+"</td>";ao+="<td>"+X+"</td>";ao+="<td>"+O+" </td>";ao+="<td>"+p+"</td>";ao+="<td>"+TDS.util.Price.formatPrice(aw,bX)+"</td>";ao+="<td>"+v+" </td>";ao+="</tr>";aA+=" <table border=0 cellpadding = 1 cellspacing=1 >";aA+="<tr>";aA+="<th>Room Type:&nbsp;&nbsp;&nbsp;"+cd+"</th>";aA+="</tr>";if(typeof w=="undefined"||typeof w.extrasWithPricing=="undefined"||w.extrasWithPricing==""){if(L!=" "){L=L.split(",");for(var bD=0;bD<L.length;bD++){var cg=L[bD];if(cg!=" "){aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=120 height="12">AUD 0.00</td></table></td>';aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';aA+="</tr>"}}}}else{;var bA=Ext.util.JSON.decode(w.extrasWithPricing).data;for(var bt=0;bt<bA.length;bt++){var aT=bA[bt].roomType;if(cd==aT){var cg=bA[bt].extras;var J=bA[bt].status;var N=bA[bt].priceBaseSell;if(!N){N=0}var r=bA[bt].taxBaseSell;if(!r){r=0}x+=N;if(d.getComponentDetail("taxIncluded")){}aY+=(N+r);aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=120 height="12">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>";aA+="</tr>"}}}aA+="</table>"}}var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}var an="";if(d.getComponentDetail("pricingPriceBaseSell")||d.getComponentDetail("pricingPriceBaseSell")==0){an+="<tr>";an+="<td >"+TDS.util.Price.formatPrice(W,bX)+"</td>";an+="<td>"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td>"+TDS.util.Price.formatPrice(aY,bX)+"</td>";an+="<td>"+TDS.util.Price.formatPrice((W+aY),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";an+="<td>"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>"}else{an+="<tr>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="</tr>"}bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #B2DFEE;"><th style="padding: 2px; width: 44%;">City</th><th style="padding: 2px; width: 33%;">Property Name</th><th style="padding: 2px; width: 10%;">Rating</th><th style="padding: 2px; width: 16%;">In</th><th style="padding: 2px; width: 16%;">Out</th><th style="padding: 2px; width: 8%;">Nights</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #70DBDB;"><th style="padding: 2px; width: 13%;">Room Type</th><th style="padding: 2px; width: 27%;">Category</th><th style="padding: 2px; width: 18%;">Plan</th><th style="padding: 2px; width: 7%;">Rooms</th><th style="padding: 2px; width: 15%;">Price per Night</th><th style="padding: 2px; width: 8%;">Status</th></tr>'+ao+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #C0D9D9;"><th style="padding: 2px; width: 14%;">Stay Price</th><th style="padding: 2px; width: 13%;">Gross/Net</th><th style="padding: 2px; width: 14%;">Extras(Nett)</th><th style="padding: 2px; width: 20%;">Total Price (Gross)</th><th style="padding: 2px; width: 10%;">Tax</th><th style="padding: 2px; width: 7%;">Comm</th></tr>'+an+'</table><br><div style="height:90px;"><div  style="height:100px; width:49.6%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;">Address:<br>'+A+"<br>"+ak+"<br>"+bh+"<br>"+o+"<br>"+cf+'</b></div><div  style="height:100px; width:49.6%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Extras:'+aA+"</b></div></div>"}else{if(bi==TDS.data.componentType.TYPE_TOUR){var bo=0;;var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var aA="";var bs=TDS.util.Format.displayResourceName(bn.tourTypeURI);if(typeof w!="undefined"){var b8=Ext.util.JSON.decode(w.roomTypesWithPrice)}var P=[];if(typeof b8!="undefined"){P=b8.data}var V=d.getComponentDetail("durationNights");var ch=d.getComponentDetail("durationDays");var az=d.getComponentDetail("name");if(typeof w!="undefined"&&typeof w.durationNights!="undefined"){V=w.durationNights}if(typeof w!="undefined"&&typeof w.durationDays!="undefined"){ch=w.durationDays}if(typeof w!="undefined"&&typeof w.name!="undefined"){az=w.name}var U=TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay);var s=TDS.util.Format.dateSpecial(d.getComponentDetail("dateTo"),TDS.env.dateFormatDisplay);if(typeof w!="undefined"&&typeof w.dateFrom!="undefined"){U=TDS.util.Format.dateSpecial(w.dateFrom,TDS.env.dateFormatDisplay)}if(typeof w!="undefined"&&typeof w.dateTo!="undefined"){s=TDS.util.Format.dateSpecial(w.dateTo,TDS.env.dateFormatDisplay)}var aW="";if(U&&s){aW=U+" - "+s}else{if(s){aW=s}else{if(U){aW=U}}}var ap="<tr>";ap+="<td  >"+az+"</td>";ap+="<td > "+bs+"</td>";ap+="<td >"+d.getComponentDetail("locationFromString")+"</td>";ap+="<td >"+aW+"</td>";ap+="<td > "+d.getComponentDetail("locationToString")+"</td>";ap+="<td >"+V+" Nights "+ch+" Days</td>";ap+="</tr>";var aK=0,F=0,ag=0;var ao="";var aG=[];var bV=Ext.util.JSON.decode(bn.gridData).data;var bl=[];var aG=[];;var W=0;if(typeof P!="undefined"&&P!=""){for(var bE=0;bE<P.length;bE++){var cd=P[bE].roomType;var bb=P[bE].code;var J=P[bE].status;bl.push(cd);aG.push(cd);var bN=0;var b1=0;var Z=0;for(var bD=0;bD<bV.length;bD++){if(bV[bD].roomType==cd){bN=bV[bD].a;b1=bV[bD].c;Z=bV[bD].i}}var b0=P[bE].paxType;var b3=0;if(b0=="AD"){b3=bN}if(b0=="CH"){b3=b1}if(b0=="IN"){b3=Z}var bQ=P[bE].priceSell;bo+=bQ;ao+="<tr>";ao+='<td height="1" align="center"><b>'+cd+"</b></td>";ao+='<td height="1" align="center"> <b>'+b0+"</b></td>";ao+='<td height="1" align="center"><b>'+bb+" </b></td>";ao+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice(bQ,bX)+"</b></td>";ao+='<td height="1" align="center"><b>'+J+" </b></td>";ao+="</tr>"}}else{for(var bE=0;bE<f.length;bE++){var bS=h[f[bE]];var bb=bS.code;var cd=bS.roomType;if(typeof bb=="undefined"){bb=""}if(typeof cd=="undefined"){cd=""}ao+="<tr>";ao+='<td height="1" align="center"><b>'+cd+"</b></td>";if(bS.type=="AD"){ao+='<td height="1" align="center"><b>Adult</b> </td>'}else{if(bS.type=="CH"){ao+='<td height="1" align="center"><b>Child</b> </td>'}else{if(bS.type=="IN"){ao+='<td height="1" align="center"><b>Infant</b> </td>'}else{if(bS.type=="SR"){ao+='<td height="1" align="center"><b>Senior</b> </td>'}else{if(bS.type=="YT"){ao+='<td height="1" align="center"><b>Youth</b> </td>'}else{if(bS.type=="CN"){ao+='<td height="1" align="center"><b>Consession</b> </td>'}}}}}}ao+='<td height="1" align="center"><b>'+bb+" </b></td>";ao+='<td height="1" align="center"> <b>'+TDS.util.Price.formatPrice(0,bX)+"</b></td>";ao+='<td height="1" align="center"><b>'+J+" </b></td>";ao+="</tr>"}}var aY=0;var x=0;var a2=[];for(var bE=0;bE<bV.length;bE++){var cd=bV[bE].roomType;if(a2.indexOf(cd)!=-1){continue}a2.push(cd);var L=bV[bE].extras;aA+=" <table border=0 cellpadding = 1 cellspacing=1 >";aA+="<tr>";aA+="<th>Room Type:&nbsp;&nbsp;&nbsp;"+cd+"</th>";aA+="</tr>";if(typeof w=="undefined"||typeof w.extrasWithPricing=="undefined"||w.extrasWithPricing==""){if(L!=" "){L=L.split(",");for(var bD=0;bD<L.length;bD++){var cg=L[bD];if(cg!=" "){aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">AUD 0.00</td></table></td>';aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';aA+="</tr>"}}}}else{var bA=Ext.util.JSON.decode(w.extrasWithPricing).data;for(var bt=0;bt<bA.length;bt++){var aT=bA[bt].roomType;if(aG.indexOf(aT)!=-1){var cg=bA[bt].extras;var J=bA[bt].status;var N=bA[bt].priceBaseSell;if(!N||N==""){N=0}var r=bA[bt].taxBaseSell;if(!r||r==""){r=0}x+=N;aY+=(N+r);aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>";aA+="</tr>"}}}aA+="</table>"}var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}var an="";if(d.getComponentDetail("pricingPriceBaseSell")||d.getComponentDetail("pricingPriceBaseSell")==0){an+="<tr>";an+="<td >"+TDS.util.Price.formatPrice(bo,bX)+"</td>";an+="<td>"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td>"+TDS.util.Price.formatPrice(aY,bX)+"</td>";an+="<td>"+TDS.util.Price.formatPrice((bo+aY),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";an+="<td>"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>"}else{an+="<tr>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="</tr>"}bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 25%;">Tour Name</th><th style="padding: 2px; width: 22%;">Type</th><th style="padding: 2px; width: 20%;">Dep City</th><th style="padding: 2px; width: 33%;">Dep Date/Range</th><th style="padding: 2px; width: 18%;">Arr City</th><th style="padding: 2px; width: 20%;">Duration</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Room Type</th><th style="padding: 2px; width: 20%;">Passenger Type</th><th style="padding: 2px; width: 10%;">Code</th><th style="padding: 2px; width: 20%;">Price Per person</th><th style="padding: 2px; width: 10%;">Status</th></tr>'+ao+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #C0D9D9;"><th style="padding: 2px; width: 14%;">Tour Price</th><th style="padding: 2px; width: 13%;">Gross/Net</th><th style="padding: 2px; width: 14%;">Extras(Nett)</th><th style="padding: 2px; width: 20%;">Total Price (Gross)</th><th style="padding: 2px; width: 10%;">Tax</th><th style="padding: 2px; width: 7%;">Comm</th></tr>'+an+'</table><br><div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;">Address: </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Extras:'+aA+"</b></div></div>"}else{if(bi==TDS.data.componentType.TYPE_RAIL){var ao="";var aA="";var n="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var I=0;var C=Ext.util.JSON.decode(bn.gridData1);var ax="";if(typeof C!="undefined"){ax=C.data;C=C.data}var aX="";var ae="";var bk="";var a6="";var bM="";var bL="";var H="";var G="";var a7="";for(var bE=0;bE<ax.length;bE++){aX=ax[bE].departs;ae=ax[bE].arrives;bk=ax[bE].date;a6=ax[bE].trainNo;bM=ax[bE].no;bL=ax[bE].deptimeHr;H=ax[bE].deptimeMin;G=ax[bE].noOfPax;a7=ax[bE].cls}var bf=bL+":"+H;var b8=Ext.util.JSON.decode(bn.gridData);var P=[];if(typeof b8!="undefined"){P=b8.data;b8=b8.data}var b7="";var bR=0;var bw=0;var Q=0;var a4=0;var bv=0;var by=0;var ad=0;for(var bE=0;bE<P.length;bE++){var bO=P[bE].tourName;if(typeof P[bE].a!="undefined"&&P[bE].a!=""){bw+=parseInt(P[bE].a)}if(typeof P[bE].c!="undefined"&&P[bE].c!=""){Q+=parseInt(P[bE].c)}if(typeof P[bE].i!="undefined"&&P[bE].i!=""){a4+=parseInt(P[bE].i)}if(typeof P[bE].s!="undefined"&&P[bE].s!=""){ad+=parseInt(P[bE].s)}if(typeof P[bE].s!="undefined"&&P[bE].s!=""){bv+=parseInt(P[bE].co)}if(typeof P[bE].s!="undefined"&&P[bE].s!=""){by+=parseInt(P[bE].y)}}var ab=0;var z=0;var aq=0;var aZ=0;var ci=0;var bj=0;var a0=[];;if(typeof w!="undefined"&&w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){a0=ce.data}for(var bE=0;bE<a0.length;bE++){var v=a0[bE].status;var bb=a0[bE].code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";if(a0[bE].paxType=="AD"){ab=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(a0[bE].paxType=="CH"){z=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(a0[bE].paxType=="IN"){aq=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Infant</b> </td>'}else{if(a0[bE].paxType=="SR"){ao+='<td height="20" align="center"><b>Senior</b> </td>'}else{if(a0[bE].paxType=="YT"){ao+='<td height="20" align="center"><b>Youth</b> </td>'}else{if(a0[bE].paxType=="CN"){ao+='<td height="20" align="center"><b>Consession</b> </td>'}}}}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(a0[bE].priceBaseSell,a0[bE].priceBaseCurrency)+"</b></td>";ao+='<td align="center"><b> '+v+"</td>";ao+="</tr>";if(v!="XX"){bR+=a0[bE].priceBaseSell}}}else{;for(var bE=0;bE<f.length;bE++){var bS=h[f[bE]];var bb=bS.code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";if(bS.type=="AD"){ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(bS.type=="CH"){ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(bS.type=="IN"){ao+='<td height="20" align="center"><b>Infant</b> </td>'}else{if(bS.type=="SR"){ao+='<td height="20" align="center"><b>Senior</b> </td>'}else{if(bS.type=="YT"){ao+='<td height="20" align="center"><b>Youth</b> </td>'}else{if(bS.type=="CN"){ao+='<td height="20" align="center"><b>Consession</b> </td>'}}}}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(0,bX)+"</b></td>";ao+='<td align="center"><b> '+J+"</td>";ao+="</tr>"}}if(bw==0&&Q==0&&a4==0&&bv==0&&by==0&&ad==0){ao+="<tr>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td > </td>";ao+="</tr>"}var aY=0;var x=0;var a2=[];for(var bE=0;bE<P.length;bE++){var L=P[bE].extras;var bz=P[bE].optionService;aA+=" <table border=0 cellpadding = 1 cellspacing=1 >";aA+="<tr>";aA+="</tr>";n+=" <table border=0 cellpadding = 1 cellspacing=1 >";if(typeof w=="undefined"||typeof w.extrasWithPricing=="undefined"||w.extrasWithPricing==""){if(L!=" "){L=L.split(",");for(var bD=0;bD<L.length;bD++){var cg=L[bD];if(cg!=" "){aA+="<tr>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">AUD 0.00</td></table></td>';aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';aA+="</tr>"}}}if(bz!=" "){bz=bz.split(",");for(var bD=0;bD<bz.length;bD++){var aM=bz[bD];if(bz!=" "){n+="<tr>";n+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+aM+"</b></td></table></td>";n+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">AUD 0.00</td></table></td>';n+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';n+="</tr>"}}}}else{;var bA=Ext.util.JSON.decode(w.extrasWithPricing).data;for(var bt=0;bt<bA.length;bt++){var aT=bA[bt].roomType;var cg=bA[bt].extras;var aM=bA[bt].option;var J=bA[bt].status;var N=bA[bt].priceBaseSell;if(!N||N==""){N=0}var r=bA[bt].taxBaseSell;if(!r||r==""){r=0}x+=N;aY+=(N+r);if(cg!=""){aA+="<tr>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>";aA+="</tr>"}else{if(aM!=" "){n+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+aM+"</b></td></table></td>";n+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";n+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>";n+="</tr>"}}}}aA+="</table>";n+="</table>"}var ap="<tr>";ap+="<td > "+a6+"</td>";ap+="<td  >&nbsp; "+aX+"</td>";ap+="<td  >"+TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay)+"</td>";ap+="<td > "+bf+"</td>";ap+="<td > "+a7+"</td>";ap+="<td >"+ae+" </td>";ap+="</tr>";var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}var an="";an+="<tr>";an+="<td  >&nbsp;"+TDS.util.Price.formatPrice(bR,bX)+"</td>";an+="<td >&nbsp;"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td  >&nbsp;"+TDS.util.Price.formatPrice(aY,bX)+"</td>";an+="<td > "+TDS.util.Price.formatPrice((bR+aY),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";an+="<td  >"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>";bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 16%;">Train No</th><th style="padding: 2px; width: 24%;">Depart</th><th style="padding: 2px; width: 10%;">Date</th><th style="padding: 2px; width: 8%;">Time</th><th style="padding: 2px; width: 14%;">Class</th><th style="padding: 2px; width: 24%;">Arrives</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 16%;">Passenger Type</th><th style="padding: 2px; width: 5%;">No</th><th style="padding: 2px; width: 16%;">Price Per Person</th><th style="padding: 2px; width: 14%;">Status</th></tr>'+ao+'</table> <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Trip Price</th><th style="padding: 2px; width: 14%;">Gross/Net</th><th style="padding: 2px; width: 14%;">Extras</th><th style="padding: 2px; width: 14%;">Total (Gross)</th><th style="padding: 2px; width: 14%;">Tax</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+an+'</table><br><div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;">Options:'+n+' </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Extras:'+aA+"</b></div></div>"}else{if(bi==TDS.data.componentType.TYPE_CAR){;var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var aA="";var ap="";var ao="";var an="";var am="";var au=0;var bT=0;var al=bn.dropOffLocation;var a5=bn.pickUpLocation;var aC=bn.startTimeHrs;var D=bn.endTimeHrs;var be=bn.startTimeMin;var ai=bn.endTimeMin;var aO=bn.totalPax;D+=":"+ai;aC+=":"+be;var aL=bn.noOfDays;var at=bn.prefferedCompany;var aH=bn.autoClubMember;var b9=bn.autoClubMemberCount;var ay=bn.airlineMember;var aU=bn.airlineMemberCount;var aD=bn.isCroprateNo;var k=bn.croprateNo;var b8=Ext.util.JSON.decode(bn.gridData);var P=[];if(typeof b8!="undefined"){P=b8.data;b8=b8.data}var ce="undefined";var a9={};if(typeof w!="undefined"&&w!="undefined"&&typeof w.roomTypesWithPrice!="undefined"&&w.roomTypesWithPrice!=""){ce=Ext.util.JSON.decode(w.roomTypesWithPrice);var a3=[];if(typeof ce!="undefined"){a3=ce.data}for(var bD=0;bD<a3.length;bD++){var aT=a3[bD].carsize+a3[bD].category;if(typeof a9[aT]=="undefined"){a9[aT]={}}var b4=a9[aT];b4.priceBaseSell=a3[bD].priceBaseSell;b4.status=a3[bD].status}};var aY=0;var x=0;var cc=[];for(var bE=0;bE<P.length;bE++){var X=P[bE].category;var b2=P[bE].carsize;var L=P[bE].extras;var E=P[bE].fuel;var O=P[bE].plan;var t=P[bE].roomNo;var cd=P[bE].roomType;var ah=P[bE].rooms;var ar=P[bE].transmission;var l=P[bE].age;var y=b2+X;var aE=0;var v=J;if(typeof a9[y]!="undefined"){aE=a9[y].priceBaseSell;v=a9[y].status;if(aE!=""){au+=parseFloat((aE*parseInt(aL)))}}ap+="<tr>";ap+="<td >"+b2+"</td>";ap+="<td >"+X+"</td>";ap+="<td ></td>";ap+="<td >"+l+"</td>";ap+="<td >"+ar+"</td>";ap+="<td >"+E+"</td>";ap+="<td >"+aL+"</td>";ap+="<td >"+TDS.util.Price.formatPrice(aE,bX)+"</td>";ap+="<td >"+v+"</td>";ap+="</tr>";if(cc.indexOf(y)!=-1){}else{cc.push(y);var L=P[bE].extras;aA+=" <table border=0 cellpadding = 1 cellspacing=1 >";aA+="<tr>";aA+="<th>Car size:&nbsp;&nbsp;&nbsp;"+b2+"<br>Category:&nbsp;&nbsp;&nbsp;"+X+"</th>";aA+="</tr>";if(typeof w=="undefined"||typeof w.extrasWithPricing=="undefined"||w.extrasWithPricing==""){if(typeof cg!="undefined"&&L!=" "){L=L.split(",");for(var bD=0;bD<L.length;bD++){var cg=L[bD];if(cg!=" "){aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=170 height="12"  align="right">AUD 0.00</td></table></td>';aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';aA+="</tr>"}}}}else{var bA=Ext.util.JSON.decode(w.extrasWithPricing).data;for(var bt=0;bt<bA.length;bt++){var aT=bA[bt].carsize+bA[bt].category;if(y==aT){var cg=bA[bt].extras;var J=bA[bt].status;var N=bA[bt].priceBaseSell;if(!N||N==""){N=0}var r=bA[bt].taxBaseSell;if(!r||r==""){r=0}x+=N;aY+=(N+r);aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=180 height="12"  align="right">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>";aA+="</tr>"}}}}aA+="</table>"}bU='<td height="0" >Preferred Company: '+at+"</td>";var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}ao+="<tr>";ao+="<td  >&nbsp;"+TDS.util.Price.formatPrice(au,bX)+"</td>";ao+="<td >&nbsp;"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";ao+="<td >"+TDS.util.Price.formatPrice(aY,bX)+"</td>";ao+="<td > "+TDS.util.Price.formatPrice((au+aY),bX)+"</td>";ao+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";ao+="<td>"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";ao+="</tr>";an+="<tr>";an+="<td >"+d.getComponentDetail("locationFromString")+"</td>";an+="<td >"+a5+"</td>";an+="<td >"+TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay)+"</td>";an+="<td >"+aC+"</td>";an+="</tr>";am+="<tr>";am+="<td >"+d.getComponentDetail("locationToString")+"</td>";am+="<td >"+al+"</td>";am+="<td >"+TDS.util.Format.dateSpecial(d.getComponentDetail("dateTo"),TDS.env.dateFormatDisplay)+"</td>";am+="<td >"+D+"</td>";am+="</tr>";bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 22%;"> Car Size</th><th style="padding: 2px; width: 22%;">Category</th><th style="padding: 2px; width: 20%;">Made/Model</th><th style="padding: 2px; width: 16%;"> Driver Age</th><th style="padding: 2px; width: 18%;">Transmission</th><th style="padding: 2px; width: 10%;">Fuel</th><th style="padding: 2px; width: 8%;">Days</th><th style="padding: 2px; width: 14%;">Price P/D</th><th style="padding: 2px; width: 14%;">Status</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;"align=right>Total</th><th style="padding: 2px; width: 10%;">Gross/Net</th><th style="padding: 2px; width: 14%;">Options</th><th style="padding: 2px; width: 24%;"align=right>Total Price ('+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+')</th><th style="padding: 2px; width: 14%;"align=right>Tax</th><th style="padding: 2px; width: 14%;"align=right>Comm</th></tr>'+ao+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">From</th><th style="padding: 2px; width: 14%;">Pick-Up</th><th style="padding: 2px; width: 14%;" >Date</th><th style="padding: 2px; width: 14%;" >Time</th></tr>'+an+'</table> <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Return</th><th style="padding: 2px; width: 14%;">Drop-Off</th><th style="padding: 2px; width: 14%;">Date</th><th style="padding: 2px; width: 14%;">Time</th></tr>'+am+'</table><br><div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;"> </b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Options:'+aA+"</b></div></div>"}else{if(bi==TDS.data.componentType.TYPE_AIR){var S='<div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;">'+cb+'</b></div><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Special Services:'+cb+"</b></div></div>";var ap="";var ao="";var an="";var n="";var aA="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var R=bn.flightNo;var bW="";var aO=bn.totalPax;var aC=bn.startTimeHrs;var be=bn.startTimeMin;var bZ=bn.class;var bc=bn.hasPreferedAirline;var aj=bn.preferedAirline;var bG=bn.airlineMembership;var ac=bn.airlineMembershipCount;var b8=Ext.util.JSON.decode(bn.gridData);var P=[];if(typeof b8!="undefined"){P=b8.data;b8=b8.data}var C=Ext.util.JSON.decode(bn.gridData1);var ax="";if(typeof C!="undefined"){ax=C.data;C=C.data}var m=[];if(typeof w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){m=ce.data}}for(var bE=0;bE<ax.length;bE++){ap="<tr>";ap+="<td >"+ax[bE].flightNo+"</td>";ap+="<td  >"+ax[bE].departs+"</td>";ap+="<td  >"+ax[bE].arrives+"</td>";ap+="<td  >"+ax[bE].date+"</td>";ap+="<td  > "+ax[bE].deptimeHr+ax[bE].deptimeMin+"</td>";ap+="<td  >"+bZ+" </td>";ap+="<td  >"+ax[bE].noOfPax+"</td>";ap+="</tr>"}var br="";var bw=0;var Q=0;var a4=0;for(var bD=0;bD<b8.length;bD++){if(br!=""){br+=", "}br+=b8[bD].fairType;if(typeof b8[bD].a!="undefined"&&b8[bD].a!=""){bw+=b8[bD].a}if(typeof b8[bD].c!="undefined"&&b8[bD].c!=""){Q+=b8[bD].c}if(typeof b8[bD].i!="undefined"&&b8[bD].i!=""){a4+=b8[bD].i}}var ab=0;var z=0;var aq=0;var bR=0;var ab=0;var z=0;var aq=0;var a0=[];;if(typeof w!="undefined"&&w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){a0=ce.data}for(var bE=0;bE<a0.length;bE++){var v=a0[bE].status;var bb=a0[bE].code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";if(a0[bE].paxType=="AD"){ab=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(a0[bE].paxType=="CH"){z=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(a0[bE].paxType=="IN"){aq=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Infant</b> </td>'}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(a0[bE].priceBaseSell,a0[bE].priceBaseCurrency)+"</b></td>";ao+='<td align="center"><b> '+v+"</td>";ao+="</tr>";if(v!="XX"){bR+=a0[bE].priceBaseSell}}}else{;for(var bE=0;bE<f.length;bE++){var bS=h[f[bE]];var bb=bS.code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";if(bS.type=="AD"){ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(bS.type=="CH"){ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(bS.type=="IN"){ao+='<td height="20" align="center"><b>Infant</b> </td>'}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(0,bX)+"</b></td>";ao+='<td align="center"><b> '+J+"</td>";ao+="</tr>"}}var aY=0;var x=0;var a2=[];for(var bE=0;bE<b8.length;bE++){var cd=b8[bE].fairType;if(a2.indexOf(cd)!=-1){continue}a2.push(cd);var L=b8[bE].extras;aA+=" <table border=0 cellpadding = 1 cellspacing=1 >";aA+="<tr>";aA+="<th>Fair Type:&nbsp;&nbsp;&nbsp;"+cd+"</th>";aA+="</tr>";if(typeof w=="undefined"||typeof w.extrasWithPricing=="undefined"||w.extrasWithPricing==""){if(typeof L!="undefined"&&L!=" "){L=L.split(",");for(var bD=0;bD<L.length;bD++){var cg=L[bD];if(cg!=" "){aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">AUD 0.00</td></table></td>';aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';aA+="</tr>"}}}}else{var bA=Ext.util.JSON.decode(w.extrasWithPricing).data;for(var bt=0;bt<bA.length;bt++){var aT=bA[bt].roomType;if(cd==aT){var cg=bA[bt].extras;var J=bA[bt].status;var N=bA[bt].priceBaseSell;if(!N||N==""){N=0}var r=bA[bt].taxBaseSell;if(!r||r==""){r=0}x+=N;aY+=(N+r);aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>",aA+="</tr>"}}}aA+="</table>"}if(bW!=""){aA+=" <table border=0 cellpadding = 1 cellspacing=1 width=390>";aA+="<tr>";aA+='<td  align="left"><table style="border-width:1px; border-style:solid;"> <td width=400> '+bW+"</b></td> </table></td>",aA+='<td  align="left"><table style="border-width:1px; border-style:solid">   <td width=100>AUD 0.00</td> </table></td>',aA+="</tr>";aA+="</table>"}var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}an+="<tr>";an+="<td >"+br+"</td>",an+="<td  >"+TDS.util.Price.formatPrice(bR,bX)+"</td>";an+="<td  >"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td  >"+TDS.util.Price.formatPrice(aY,bX)+"</td>";an+="<td  >"+TDS.util.Price.formatPrice((bR+aY),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>",an+="<td  >"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>";bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 10%;">Flt No</th><th style="padding: 2px; width: 14%;">Departs</th><th style="padding: 2px; width: 14%;">Arrives</th><th style="padding: 2px; width: 10%;">Date</th><th style="padding: 2px; width: 10%;">Time</th><th style="padding: 2px; width: 24%;">Class</th><th style="padding: 2px; width: 8%;">Seats</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Passenger Type</th><th style="padding: 2px; width: 14%;">No</th><th style="padding: 2px; width: 14%;">Price Per Person</th><th style="padding: 2px; width: 14%;">Status</th></tr>'+ao+'</table> <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Fare Type</th><th style="padding: 2px; width: 14%;">Price</th><th style="padding: 2px; width: 12%;">Gross/Net</th><th style="padding: 2px; width: 14%;">Extras</th><th style="padding: 2px; width: 20%;">Total Price(Gross)</th><th style="padding: 2px; width: 14%;">Tax</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+an+'</table><br><div style="height:90px;"><div  style="height:100px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Special Services:'+aA+"</b></div></div>"}else{if(bi==TDS.data.componentType.TYPE_CRUISE){var ap="";var ao="";var an="";var n="";var aA="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var M=bn.destination;var aO=bn.totalPax;var b6=bn.cruiseLines;var a8=bn.deckName;var b5=bn.deckNameString;var K=bn.protStarboard;var bB=bn.obstruction;var bu=bn.acceptUpgrade;var bp=bn.stateroomGuarantee;var bm=bn.dinningPreference;var aS=bn.tableSize;if(aS=="4to6"){aS="4 to 6"}else{if(aS=="6to8"){aS="6 to 8"}else{if(aS="8ormore"){aS="8 or More"}}}var bF=bn.cruiseMemberNo;var av=bn.cruiseMemberAdultNo;var bq=bn.deckCount;var bC=bn.cruiseMemberCount;var b8=Ext.util.JSON.decode(bn.gridData);var P=[];if(typeof b8!="undefined"){P=b8.data;b8=b8.data}if(bB=="yesObstruction"){bB="Yes"}else{bB="no"}if(bu=="yesAcceptUpgrade"){bu="Yes"}else{bu="No"}if(bp=="yesStateroomGuarantee"){bp="Yes"}else{bp="No"}var bR=0;var bw=0;var Q=0;var a4=0;var ad=0;for(var bE=0;bE<P.length;bE++){var bO=P[bE].tourName;if(typeof P[bE].a!="undefined"&&P[bE].a!=""){bw+=parseInt(P[bE].a)}if(typeof P[bE].c!="undefined"&&P[bE].c!=""){Q+=parseInt(P[bE].c)}if(typeof P[bE].i!="undefined"&&P[bE].i!=""){a4+=parseInt(P[bE].i)}if(typeof P[bE].s!="undefined"&&P[bE].s!=""){ad+=parseInt(P[bE].s)}}var ab=0;var z=0;var aq=0;var bj=0;var a0=[];if(typeof w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){a0=ce.data}for(var bE=0;bE<a0.length;bE++){if(a0[bE].paxType=="AD"){ab=a0[bE].priceBaseSell}if(a0[bE].paxType=="CH"){z=a0[bE].priceBaseSell}if(a0[bE].paxType=="IN"){aq=a0[bE].priceBaseSell}if(a0[bE].paxType=="Senior"){bj=a0[bE].priceBaseSell}var v=a0[bE].status;if(v!="XX"){bR+=a0[bE].priceBaseSell}}}var L="";for(var bE=0;bE<P.length;bE++){var aJ=P[bE].cabin;var af=P[bE].cabinNo;var X=P[bE].category;var bK=P[bE].location;var cd=P[bE].roomType;var aa=P[bE].stateRoomType;var cd=P[bE].roomType;L=P[bE].extras;ao+="<tr>";ao+="<td >"+aa+"</td>";ao+="<td >"+X+"</td>";ao+="<td >"+bK+"</td>";ao+="<td >"+b5+"</td>";ao+="<td >"+K+"</td>";ao+="<td >"+bB+"</td>";ao+="<td >"+J+"</td>";ao+="</tr>"}var aY=0;var x=0;var a2=[];for(var bE=0;bE<P.length;bE++){var cd=P[bE].stateRoomType;if(a2.indexOf(cd)!=-1){continue}a2.push(cd);var L=P[bE].extras;aA+=" <table border=0 cellpadding = 1 cellspacing=1 >";aA+="<tr>";aA+="<th>Room Type:&nbsp;&nbsp;&nbsp;"+cd+"</th>";aA+="</tr>";if(typeof w=="undefined"||typeof w.extrasWithPricing=="undefined"||w.extrasWithPricing==""){if(L!=" "){L=L.split(",");for(var bD=0;bD<L.length;bD++){var cg=L[bD];if(cg!=" "){aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">AUD 0.00</td></table></td>';aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">QT</td></table></td>';aA+="</tr>"}}}}else{var bA=[];if(typeof w!="undefined"){bA=Ext.util.JSON.decode(w.extrasWithPricing).data}for(var bt=0;bt<bA.length;bt++){var aT=bA[bt].roomType;if(cd==aT){var cg=bA[bt].extras;var J=bA[bt].status;var N=bA[bt].priceBaseSell;if(!N||N==""){N=0}var r=bA[bt].taxBaseSell;if(!r||r==""){r=0}x+=N;aY+=(N+r);aA+="<tr >";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid;"><td height="12" width=500>'+cg+"</b></td></table></td>";aA+='<td height="12" align="right"><table style="border-width:1px; border-style:solid"><td width=150 height="12"  align="right">'+TDS.util.Price.formatPrice((N+r),bX)+"</td></table></td>";aA+='<td height="12" align="left"><table style="border-width:1px; border-style:solid"><td width=40 height="12">'+J+"</td></table></td>";aA+="</tr>"}}}aA+="</table>"}var U=TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay);var s=TDS.util.Format.dateSpecial(d.getComponentDetail("dateTo"),TDS.env.dateFormatDisplay);var aW="";if(U&&s){aW=U+" - "+s}else{if(s){aW=s}else{if(U){aW=U}}}var Y='<td height="0" >Destination: '+M+"</td>";ap="<tr>";ap+="<td >"+b6+"</td>";ap+="<td >"+d.getComponentDetail("locationFromString")+"</td>";ap+="<td >"+aW+"</td>";ap+="<td >"+d.getComponentDetail("locationToString")+"</td>";ap+="<td >"+d.getComponentDetail("duration")+"</td>";ap+="</tr>";an="";an+="<tr>";an+="<td >"+TDS.util.Price.formatPrice(bR,bX)+"</td>";an+="<td>"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td >"+TDS.util.Price.formatPrice(aY,bX)+"</td>";an+="<td >"+TDS.util.Price.formatPrice((bR+aY),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";an+="<td >"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>";n+="<br><br><table border=1 cellpadding = 1 cellspacing=0 width=100%>";n+="<tr>";n+='<td  align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+bm+"</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>";n+='<td  align="left"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+aS+"</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>";n+="</tr>";n+="</table>";n+="<br> <table border=0 cellpadding = 1 cellspacing=0 width=100%>";n+="<tr>";n+='<td  align="left">  Accept Upgrade&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;'+bu+"</td>";n+='<td  align="left">   Cabin Guarantee&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;'+bp+"</td>";n+="</tr>";n+="</table>";bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Ship</th><th style="padding: 2px; width: 14%;">Departs</th><th style="padding: 2px; width: 14%;">Date/Range</th><th style="padding: 2px; width: 14%;">Arrives</th><th style="padding: 2px; width: 14%;">Duration</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 20%;">Stateroom Type</th><th style="padding: 2px; width: 14%;">Category</th><th style="padding: 2px; width: 14%;">Location</th><th style="padding: 2px; width: 14%;">Deck</th><th style="padding: 2px; width: 18%;">Port/Starboard</th><th style="padding: 2px; width: 14%;">Obstruct</th><th style="padding: 2px; width: 10%;">Status</th></tr>'+ao+'</table> <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Price</th><th style="padding: 2px; width: 14%;">Gross/Net</th><th style="padding: 2px; width: 14%;"> Extras</th><th style="padding: 2px; width: 24%;">Total Price('+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+')</th><th style="padding: 2px; width: 14%;">Tax</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+an+'</table><br><div style="height:90px;"><div  style="height:94px; width:50%; border: solid 1px;  float:left; overflow-y: scroll; overflow-x: hidden;">Dinning Preference & Table Size:'+n+'</b></div><div  style="height:94px; width:50%; border: solid 1px;  float:center; overflow-y: scroll; overflow-x: hidden;">Extras:'+aA+"</b></div></div>"}else{if(bi==TDS.data.componentType.TYPE_SIGHTSEEING){var aR="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var P=[];if(typeof bn!="undefined"){var b8=Ext.util.JSON.decode(bn.gridData);P=b8.data}var aI=d.getComponentDetail("durationNights");if(typeof aI=="undefined"){aI=""}else{aI=aI+" Nights "}var T=d.getComponentDetail("durationDays");if(typeof T=="undefined"){T=""}else{T=T+" Days"}var ap="";var ao="";var bR=0;if(typeof P=="undefined"||P.length<1){ap="<tr>";ap+="<td  > </td>";ap+="<td >"+d.getComponentDetail("locationFromString")+"</td>";ap+="<td >"+TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay)+"</td>";ap+="<td >"+aI+T+"</td>";ap+="</tr>";ao+="<tr>";ao+="<td  >&nbsp;</td>";ao+="<td > </td>";ao+="<td > </td>";ao+="<td >  </td>";ao+="<td > </td>";ao+="</tr>"}else{var bw=0;var Q=0;var a4=0;for(var bE=0;bE<P.length;bE++){var bO=b8.data[bE].tourName;if(b8.data[bE].a!=""){bw+=parseInt(b8.data[bE].a)}if(b8.data[bE].c!=""){Q+=parseInt(b8.data[bE].c)}if(b8.data[bE].i!=""){a4+=parseInt(b8.data[bE].i)}ap+="<tr>";ap+="<td  >&nbsp;"+bO+"</td>";ap+="<td >"+b8.data[bE].departs+"</td>";ap+="<td >"+b8.data[bE].dateFrom+"</td>";ap+="<td >"+b8.data[bE].duration+"</td>";ap+="</tr>"}var ab=0;var z=0;var aq=0;var a0=[];if(typeof w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){a0=ce.data}for(var bE=0;bE<a0.length;bE++){var v=a0[bE].status;var bb=a0[bE].code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";if(a0[bE].paxType=="AD"){ab=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(a0[bE].paxType=="CH"){z=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(a0[bE].paxType=="IN"){aq=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Infant</b> </td>'}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(a0[bE].priceBaseSell,a0[bE].priceBaseCurrency)+"</b></td>";ao+='<td align="center"><b> '+v+"</td>";ao+="</tr>";if(v!="XX"){bR+=a0[bE].priceBaseSell}}}else{;for(var bE=0;bE<f.length;bE++){var bS=h[f[bE]];var bb=bS.code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";if(bS.type=="AD"){ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(bS.type=="CH"){ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(bS.type=="IN"){ao+='<td height="20" align="center"><b>Infant</b> </td>'}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(0,bX)+"</b></td>";ao+='<td align="center"><b> '+J+"</td>";ao+="</tr>"}}}var an="<tr>";var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}if(d.getComponentDetail("pricingPriceBaseSell")||d.getComponentDetail("pricingPriceBaseSell")==0){an+="<tr>";an+="<td >"+TDS.util.Price.formatPrice(bR,bX)+"</td>";an+="<td>"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td>"+TDS.util.Price.formatPrice((bR),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";an+="<td>"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>"}else{an+="<tr>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="</tr>"}bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 25%;">Tour Name</th><th style="padding: 2px; width: 18%;">City</th><th style="padding: 2px; width: 15%;">Dep Date</th><th style="padding: 2px; width: 15%;">Duration</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 20%;">Passenger Type</th><th style="padding: 2px; width: 14%;">No</th><th style="padding: 2px; width: 14%;">Price Per Person</th><th style="padding: 2px; width: 10%;">Status</th></tr>'+ao+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Tour Price</th><th style="padding: 2px; width: 14%;">Gross/Net</th><th style="padding: 2px; width: 24%;">Total Price ('+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+')</th><th style="padding: 2px; width: 10%;">Tax</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+an+"</table><br>"}else{if(bi==TDS.data.componentType.TYPE_TRANSFER){;var ca="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var al=bn.dropOffLocation;var bd=bn.dropOffLocationDetails;var a5=bn.pickUpLocation;var aF=bn.pickUpLocationDetails;var U=TDS.util.Format.dateSpecial(d.getComponentDetail("dateFrom"),TDS.env.dateFormatDisplay);var aC=bn.startTimeHrs;var be=bn.startTimeMin;var bH=TDS.util.Format.displayResourceName(bn.typeClassCategory);var cj=TDS.util.Format.displayResourceName(bn.mainRooms);var P=[];if(typeof cj!="undefined"){var b8=Ext.util.JSON.decode(cj);P=b8.data}var an="";if(P.length<1){an+="<tr>";an+="<td ></td>";an+="<td ></td>";an+="<td ></td>";an+="<td ></td>";an+="</tr>"}var ab=0;var z=0;var aq=0;var bR=0;var ab=0;var z=0;var aq=0;var a0=[];if(typeof w!="undefined"&&w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){a0=ce.data}for(var bE=0;bE<a0.length;bE++){var v=a0[bE].status;var bb=a0[bE].code;if(typeof bb=="undefined"){bb=""}an+="<tr>";if(a0[bE].paxType=="AD"){an+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(a0[bE].paxType=="CH"){an+='<td height="20" align="center"><b>Child</b> </td>'}else{if(a0[bE].paxType=="IN"){an+='<td height="20" align="center"><b>Infant</b> </td>'}}}an+='<td align="center"><b>'+bb+"</b></td>";an+='<td align="center"><b>'+TDS.util.Price.formatPrice(a0[bE].priceBaseSell,a0[bE].priceBaseCurrency)+"</b></td>";an+='<td align="center"><b> '+v+"</td>";an+="</tr>";bR+=a0[bE].priceBaseSell}}else{;for(var bE=0;bE<f.length;bE++){var bS=h[f[bE]];var bb=bS.code;if(typeof bb=="undefined"){bb=""}an+="<tr>";if(bS.type=="AD"){an+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(bS.type=="CH"){an+='<td height="20" align="center"><b>Child</b> </td>'}else{if(bS.type=="IN"){an+='<td height="20" align="center"><b>Infant</b> </td>'}}}an+='<td align="center"><b>'+bb+"</b></td>";an+='<td align="center"><b>'+TDS.util.Price.formatPrice(0,bX)+"</b></td>";an+='<td align="center"><b> '+J+"</td>";an+="</tr>"}}var ap="<tr>";ap+="<td > "+d.getComponentDetail("locationFromString")+"</td>";ap+="<td > "+a5+"</td>";ap+="<td >  "+al+"</td>";ap+="<td >  "+U+"</td>";ap+="<td >  "+aC+be+"</td>";ap+="<td >  "+bH+"</td>";ap+="</tr>";var ao="<tr>";ao+="<td  > "+aF+" </td>";ao+='<td style= "height:30px;" > '+bd+"</td>";ao+="</tr>";var am="";var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}if(d.getComponentDetail("pricingPriceBaseSell")||d.getComponentDetail("pricingPriceBaseSell")==0){am+="<tr>";am+="<td >"+TDS.util.Price.formatPrice(bR,bX)+"</td>";am+="<td>"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";am+="<td>"+TDS.util.Price.formatPrice((bR),bX)+"</td>";am+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";am+="<td>"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";am+="</tr>"}else{am+="<tr>";am+="<td > </td>";am+="<td > </td>";am+="<td > </td>";am+="<td > </td>";am+="</tr>"}bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 20%;">City </th><th style="padding: 2px; width: 20%;">Pick Up</th><th style="padding: 2px; width: 20%;">Drop off </th><th style="padding: 2px; width: 14%;">Date </th><th style="padding: 2px; width: 14%;">Time </th><th style="padding: 2px; width: 14%;">Mode </th></tr>'+ap+'</table> <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">P/U Details</th><th style="padding: 2px; width: 14%;">D/O Details</th></tr>'+ao+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Passenger Type</th><th style="padding: 2px; width: 14%;">Code</th><th style="padding: 2px; width: 14%;">Price Per Person</th><th style="padding: 2px; width: 14%;">Status</th></tr>'+an+'</table> <table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Price</th><th style="padding: 2px; width: 10%;">Gross/Net</th><th style="padding: 2px; width: 24%;">Total Price ('+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+')</th><th style="padding: 2px; width: 14%;">Tax</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+am+"</table><br>"}else{if(bi==TDS.data.componentType.TYPE_ATTRACTION){var ap="";var ao="";var an="";var bn=Ext.util.JSON.decode(d.getComponentDetail("parameters"));var J=d.getComponentDetail("status");var b8=Ext.util.JSON.decode(bn.gridData);var P=[];if(typeof b8!="undefined"){P=b8.data}var b7="";var ab=0;var z=0;var aq=0;var bR=0;var ab=0;var z=0;var aq=0;var a0=[];if(typeof w!="undefined"&&w!="undefined"){var ce=Ext.util.JSON.decode(w.roomTypesWithPrice);if(typeof ce!="undefined"){a0=ce.data}for(var bE=0;bE<a0.length;bE++){var v=a0[bE].status;var bb=a0[bE].code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";ao+='<td align="center"><b>'+d.getComponentDetail("name")+"</b></td>";if(a0[bE].paxType=="AD"){ab=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(a0[bE].paxType=="CH"){z=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(a0[bE].paxType=="IN"){aq=a0[bE].priceBaseSell;ao+='<td height="20" align="center"><b>Infant</b> </td>'}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(a0[bE].priceBaseSell,a0[bE].priceBaseCurrency)+"</b></td>";ao+='<td align="center"><b> '+v+"</td>";ao+="</tr>";bR+=a0[bE].priceBaseSell}}else{;for(var bE=0;bE<f.length;bE++){var bS=h[f[bE]];var bb=bS.code;if(typeof bb=="undefined"){bb=""}ao+="<tr>";ao+='<td align="center"><b>'+d.getComponentDetail("name")+"</b></td>";if(bS.type=="AD"){ao+='<td height="20" align="center"><b>Adult</b> </td>'}else{if(bS.type=="CH"){ao+='<td height="20" align="center"><b>Child</b> </td>'}else{if(bS.type=="IN"){ao+='<td height="20" align="center"><b>Infant</b> </td>'}}}ao+='<td align="center"><b>'+bb+"</b></td>";ao+='<td align="center"><b>'+TDS.util.Price.formatPrice(0,bX)+"</b></td>";ao+='<td align="center"><b> '+J+"</td>";ao+="</tr>"}}for(var bE=0;bE<P.length;bE++){var aX=P[bE].departs;var U=P[bE].dateFrom;var s=P[bE].dateTo;var bP=P[bE].duration;var aQ=P[bE].serviceType;b7=P[bE].serciceName;var aW="";if(U&&s){aW=U+" - "+s}else{if(s){aW=s}else{if(U){aW=U}}}ap="<tr>";ap+="<td >"+d.getComponentDetail("locationFromString")+"</td>";ap+="<td >"+aW+"</td>";ap+="<td >"+aQ+"</td>";ap+="<td >"+d.getComponentDetail("duration")+"</td>";ap+="</tr>"}var bY=d.getComponentDetail("pricingPriceCommission");if(typeof bY=="undefined"||bY==null||bY==""){bY=0}var ba=d.getComponentDetail("priceCommission$");if(typeof ba=="undefined"||ba==null||ba==""){ba=0}if(d.getComponentDetail("pricingPriceBaseSell")||d.getComponentDetail("pricingPriceBaseSell")==0){an+="<tr>";an+="<td >"+TDS.util.Price.formatPrice(bR,bX)+"</td>";an+="<td>"+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+"</td>";an+="<td>"+TDS.util.Price.formatPrice((bR),bX)+"</td>";an+="<td>"+(d.getComponentDetail("taxIncluded")?"Included":"Excluded")+"</td>";an+="<td>"+((ba==0)?(bY.toFixed(2)+"%"):TDS.util.Price.formatPrice(ba,""))+"</td>";an+="</tr>"}else{an+="<tr>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="<td > </td>";an+="</tr>"}bg='<table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 24%;">City</th><th style="padding: 2px; width: 24%;">Date/Range</th><th style="padding: 2px; width: 24%;">Service Type</th><th style="padding: 2px; width: 24%;">Duration</th></tr>'+ap+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 24%;">Service Name</th><th style="padding: 2px; width: 24%;">Passenger Type</th><th style="padding: 2px; width: 10%;">Code</th><th style="padding: 2px; width: 24%;">Price Per Person</th><th style="padding: 2px; width: 14%;">Status</th></tr>'+ao+'</table><table class="x-tds-dataview" style="width: 100%;" border=1 cellpadding = 1 cellspacing=0  ><tr style="background-color: #d0def0;"><th style="padding: 2px; width: 14%;">Price</th><th style="padding: 2px; width: 12%;">Gross/Net</th><th style="padding: 2px; width: 20%;">Total Price('+(d.getComponentDetail("pricingPriceIsNett")?"Nett":"Gross")+')</th><th style="padding: 2px; width: 14%;">Tax</th><th style="padding: 2px; width: 14%;">Comm</th></tr>'+an+"</table><br>"}}}}}}}}}var aB='<div style="height:270px; overflow-y: scroll; overflow-x: hidden;"><table  width="100%"><tr><td width="18%"><span style="font-size:12px"><b>Quote Ref :</b></span></td><td width="22%"><font color="red"><span style="font-size:12px"> '+d.getComponentDetail("quoteReferenceNumber")+'</b><span style="font-size:12px"></font></td><td></td><td><span style="font-size:12px"><b>Booking Ref :</b></span></td><td width="22%"><font color="red"><span style="font-size:12px"> <b>'+d.getComponentDetail("bookingReferenceNumber")+'</b><span style="font-size:12px"></font></td></tr></table>'+B+"<br/>"+bg+"</div>";;document.getElementById(a).innerHTML=aB}}}},{xtype:"panel",height:300,columnWidth:0.39,layout:"fit",items:[{columnWidth:1,xtype:"editorgrid",clicksToEdit:1,enableRowExpander:false,sessionExpandedRows:false,height:110,autoScroll:true,border:false,enableColumnHide:false,enableColumnMove:false,enableColumnResize:false,enableHdMenu:false,store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","displayName","code","dateOfBirth","addressString","phoneNumber1","emailAddress","gender","abstractRateId",,"paxAge","priceBaseSell","priceBaseCurrency","roomType","status"]}),columns:[{header:"Passenger",dataIndex:"displayName",width:200,sortable:true,renderer:function(e,d,a,f,c,b){return e}},{header:"Type",dataIndex:"code",width:40,fixed:true},{header:"Gender",dataIndex:"gender",renderer:TDS.util.Format.gender,width:50,fixed:true},{header:"Age",dataIndex:"paxAge",width:40,fixed:true,renderer:function(c,b,a){if(c){return c}else{return TDS.util.Format.age(a.get("dateOfBirth"))}}},{header:"Room Type",dataIndex:"roomType",width:70,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"dataURI",emptyText:"Type",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"accommodation/propertyclasstypes/collection",identifier:"accommodation/propertyclasstypes",fields:["name","displayName","dataURI"]})})},{header:"Seat/Cabin",hidden:true,dataIndex:"roomType",width:150,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"dataURI",emptyText:"Type",store:[]})},{header:"Price",dataIndex:"priceBaseSell",width:80,editor:new Ext.form.NumberField({}),renderer:function(c,b,a){return TDS.util.Price.formatPrice(c,a.get("priceBaseCurrency"))}},{header:"Status",dataIndex:"status",width:50,fixed:true,editor:new Ext.form.ComboBox({editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text",store:[["OK","OK"],["WL","Waitlist"],["FS","Freesale"],["RQ","Requested"],["XX","Cancelled"]]})}],viewConfig:{forceFit:true},listeners:{beforerender:function(b){var c=this.ownerCt.findParentByType("tabpanel");var a=c.getComponentDetail("type");cm=b.getColumnModel();if(typeof a!="undefined"&&a!="ACCOMMODATION"&&a!="TOUR"){cm.setHidden(4,true)}if(typeof a!="undefined"&&(a==TDS.data.componentType.TYPE_CRUISE||a==TDS.data.componentType.TYPE_RAIL||a==TDS.data.componentType.TYPE_AIR)){cm.setHidden(7,false)}},render:function(){this.getEl().swallowEvent(["columnmove","columnresize","headerclick","click","mouseout","rowclick","rowmousedown","rowblclick","cellblclick","sortchange","mouseup","mousedown"]);var b=this.ownerCt.findParentByType("tabpanel");var a=b.getComponentDetail("dataURI");Ext.Ajax.request({url:TDS.env.dataPath+a+"/passengers/collection/concise",method:"GET",callback:function(f,l,d){if(l){var j=Ext.util.JSON.decode(d.responseText);var h=j[a+"/passengers"];if(typeof h=="undefined"){return}var k=[];for(var g=0;g<h.length;g++){j[h[g]].dataURI=h[g];k.push(j[h[g]])}var e=this;var c=e.store;c.loadData(k);e.getView().refresh()}},scope:this})}}}]},{xtype:"panel",autoHeight:true,border:false,bodyStyle:"padding: 2px;",columnWidth:0.055,defaults:{minWidth:67},invokeWindow:function(b,c){if(!c){c={}}var g=this.ownerCt.findParentByType("tabpanel");var f=g.ownerCt;var e=g.getComponentDetail("noOfNights");var d=g.getComponentDetail("bookedDate");var a=g.getComponentDetail("dataURI");if(!a){return}Ext.apply(c,{title:"Edit",information:"You may edit the details of this component below.",interfaceURI:"fulfillment/manualQuote/edit.js",destinationDataURI:a,sourceDataURI:a,dataURI:{component:a,offering:g.getComponentDetail("offeringURI")},params:{status:b,noOfNights:e,bookedDate:d,componentName:g.getComponentDetail("name"),priceCurrency:g.getComponentDetail("pricingPriceCurrency")},callback:{fn:function(h){if(h){f.refreshGrid()}},scope:this}});TDS.window.setWindow(c)},invokeAltOffWindow:function(f,g){if(!g){g={}}var e=this.ownerCt.items.itemAt(2).items.itemAt(0);var c=e.selModel.selections;var i=this.ownerCt.findParentByType("tabpanel");var h=i.ownerCt;var d=i.getComponentDetail("dataURI");if(!d){return}Ext.apply(g,{title:"Alternative offer",information:"You may offer with new offering below.",interfaceURI:"fulfillment/accommodation/alternative.js",destinationDataURI:d+"/altOffering",dataURI:{component:d,offering:i.getComponentDetail("offeringURI")},params:{status:f,priceCurrency:i.getComponentDetail("pricingPriceCurrency")},callback:{fn:function(a){if(a){h.refreshGrid()}},scope:this}});TDS.window.setWindow(g)},items:[{xtype:"button",text:"Edit",handler:function(){var g=this.ownerCt.findParentByType("tabpanel");var b=g.getComponentDetail("status");var g=this.ownerCt.findParentByType("tabpanel");var e=g.ownerCt;var a=g.getComponentDetail("dataURI");if(!a){return}var f="";var d=e;var c=g.getComponentDetail("type");var h=TDS.util.firstWordCapital(c+" Manual Quote & Entry");if(c==TDS.data.componentType.TYPE_TOUR){h=TDS.util.firstWordCapital("PACKAGE TOUR Manual Quote & Entry")}if(c==TDS.data.componentType.TYPE_SIGHTSEEING){h=TDS.util.firstWordCapital("DAY TOUR Manual Quote & Entry")}else{if(c==TDS.data.componentType.TYPE_CAR){h=TDS.util.firstWordCapital("CAR RENTAL Manual Quote & Entry")}else{if(c==TDS.data.componentType.TYPE_CRUISE){h=TDS.util.firstWordCapital("CRUISES Manual Quote & Entry")}else{if(c==TDS.data.componentType.TYPE_ATTRACTION){h=TDS.util.firstWordCapital("SERVICES Manual Quote & Entry")}}}}TDS.window.setWindow({title:"<table width=100% border=0> <tr> <td width=240px>"+h+'</td> <td align=right><font size="2"  >'+f+"</b></font></td> </tr> </table>",information:"Please enter your required details.",interfaceURI:"fulfillment/manualQuote/"+c.toLowerCase()+"Edit.js",sourceDataURI:a,destinationDataURI:a+"/fulfillment",buttonOK:"Save",data:{type:c,pnrDataURI:a,MQ:true},callback:{fn:function(i){if(i){d.refreshGrid()}},scope:d.ownerCt.ownerCt}})}},{xtype:"button",text:"Alt offer",disabled:true,hidden:true,handler:function(){var c=this.ownerCt.findParentByType("tabpanel");var a=c.getComponentDetail("status");var b=this.ownerCt;b.invokeAltOffWindow(a)},listeners:{render:function(){var f=this.ownerCt.findParentByType("tabpanel");var e=f.getComponentDetail("status");var d=this.ownerCt.ownerCt.items.itemAt(2).items.itemAt(0);var c=d.selModel.selections;if(e.toLowerCase()==TDS.data.componentStatus.STATUS_REQUESTED.toLowerCase()){this.enable(true)}}}},{xtype:"button",text:"Note",handler:function(){var b=this.ownerCt.findParentByType("tabpanel");var a=b.getComponentDetail("dataURI");TDS.window.setWindow({title:"Send a note",information:"Please enter your note below.",interfaceURI:"note.js",postDataURI:a+"/note"})}},{xtype:"button",text:"Display",handler:function(c){var g=this.ownerCt.findParentByType("tabpanel");var e=g.ownerCt;var a=g.getComponentDetail("dataURI");if(!a){return}var f="";var d=e;var b=g.getComponentDetail("type");var h=TDS.util.firstWordCapital(b+" Manual Quote & Entry");if(b==TDS.data.componentType.TYPE_TOUR){h=TDS.util.firstWordCapital("PACKAGE TOUR Manual Quote & Entry")}if(b==TDS.data.componentType.TYPE_SIGHTSEEING){h=TDS.util.firstWordCapital("DAY TOUR Manual Quote & Entry")}else{if(b==TDS.data.componentType.TYPE_CAR){h=TDS.util.firstWordCapital("CAR RENTAL Manual Quote & Entry")}else{if(b==TDS.data.componentType.TYPE_CRUISE){h=TDS.util.firstWordCapital("CRUISES Manual Quote & Entry")}else{if(b==TDS.data.componentType.TYPE_ATTRACTION){h=TDS.util.firstWordCapital("SERVICES Manual Quote & Entry")}}}}TDS.window.setWindow({title:"<table width=100% border=0> <tr> <td width=240px>"+h+'</td> <td align=right><font size="2"  >'+f+"</b></font></td> </tr> </table>",information:"Please enter your required details.",interfaceURI:"fulfillment/manualQuote/"+b.toLowerCase()+"Display.js",sourceDataURI:a,destinationDataURI:a,buttonOK:false,data:{type:b,pnrDataURI:a,MQ:true},callback:{fn:function(i){if(i){d.refreshGrid()}},scope:d.ownerCt.ownerCt}})}}]}]}]}