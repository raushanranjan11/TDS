{xtype:"form",border:false,width:690,beforeSubmit:function(a){;var b=this.items.itemAt(0).items.itemAt(1).items.itemAt(0).getData();a.passengersWithStatus=b;a.status=this.items.itemAt(0).items.itemAt(0).items.itemAt(1).items.itemAt(1).getValue();a.applyAll=this.items.itemAt(0).items.itemAt(0).items.itemAt(1).items.itemAt(3).getValue();return a},items:[{xtype:"panel",activeTab:0,layoutOnTabChange:true,height:310,width:690,items:[{xtype:"panel",border:false,defaults:{border:false},style:"margin-top: 16px;",items:[{html:"<center><b>TOURS</b></center>"},{xtype:"panel",hidden:true,layout:"table",style:"margin-bottom: 22px;margin-top: 22px;",border:false,hideBorders:false,layoutConfig:{columns:9},defaults:{border:false},items:[{html:"&nbsp;&nbsp;&nbsp;&nbsp;Tours Status:",width:100},{xtype:"combo",store:[["NA","NA"],["QT","QT"],["OK","OK"],["RQ","RQ"],["WL","WL"],["XX","XX"]],editable:false,forceSelection:true,mode:"local",fieldLabel:"Tour Status",width:150,name:"status",triggerAction:"all",displayField:"text",valueField:"text"},{width:30},{xtype:"checkbox",name:"applyAll"},{html:"&nbsp;&nbsp;&nbsp;All Passengers"}]}]},{xtype:"panel",style:"padding-top:50px;",border:false,layout:"fit",height:213,width:687,items:[{xtype:"editorgrid",clicksToEdit:1,height:340,width:570,store:new Ext.data.JsonStore({url:"",identifier:"",fields:["type","code","nameFirst","nameLast","salutation","displayName","dateOfBirth","rateURI","paxAge","roomType","status"]}),viewConfig:{forceFit:true},getData:function(){var b=this.getStore().data;var c=[];for(var a=0;a<b.length;a++){c[a]=b.items[a].data}return c},sm:new Ext.grid.CheckboxSelectionModel(),columns:[new Ext.grid.CheckboxSelectionModel(),{header:"Room Type",dataIndex:"roomType",width:120,fixed:true,editor:new Ext.form.ComboBox({store:TDS.data.tourRoomTypeMQ,editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"name",valueField:"value"})},{header:"Type",dataIndex:"type",width:40,fixed:true},{header:"Name",dataIndex:"displayName",width:220},{header:"DOB",dataIndex:"dateOfBirth",width:100,fixed:true,renderer:TDS.util.Format.dateSpecialRenderer(TDS.env.dateBirthdayFormatDisplay)},{header:"Age",dataIndex:"paxAge",width:40,fixed:true,renderer:function(c,b,a){if(c){return c}else{return TDS.util.Format.age(a.get("dateOfBirth"))}}},{header:"Status",dataIndex:"status",width:60,fixed:true,editor:new Ext.form.ComboBox({store:[["NA","NA"],["QT","QT"],["OK","OK"],["RQ","RQ"],["WL","WL"],["XX","XX"]],editable:false,forceSelection:true,mode:"local",triggerAction:"all",displayField:"text",valueField:"text"})}],listeners:{render:function(){var b=this.ownerCt.findParentByType("awesomewindow");var a=b.aw.data.pnrDataURI;var c=this;Ext.Ajax.request({url:TDS.env.dataPath+b.aw.data.pnrDataURI+"/passengers/collection/concise",method:"GET",callback:function(l,e,g){if(e){var f=Ext.util.JSON.decode(g.responseText);var k=f[a+"/passengers"];if(typeof k=="undefined"){return}var j=[];for(var d=0;d<k.length;d++){f[k[d]].dataURI=k[d];j.push(f[k[d]])}var h=c.store;h.loadData(j);c.getView().refresh()}},scope:this})}}}]}]}]}