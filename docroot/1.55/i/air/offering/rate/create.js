{xtype:"form",border:false,markDataDirtyOnLoad:true,fieldMap:{rateClass:"rateClassURI",ratePer:"ratePerURI",rateOccupancy:"rateOccupancyURI",defaultMaxHoldTimeSeconds:["defaultMaxHoldTimeHours","defaultMaxHoldTimeMinutes"]},beforeSubmit:function(a){console.log("^^^^^^^^^^^^^^^^^^");console.log(a);a.defaultMaxHoldTimeSeconds=0;if(typeof a.defaultMaxHoldTimeHours==="number"){a.defaultMaxHoldTimeSeconds+=parseInt(a.defaultMaxHoldTimeHours)*60*60}if(typeof a.defaultMaxHoldTimeMinutes==="number"){a.defaultMaxHoldTimeSeconds+=parseInt(a.defaultMaxHoldTimeMinutes)*60}if(isNaN(a.defaultMaxHoldTimeSeconds)||a.defaultMaxHoldTimeSeconds==0){delete a.defaultMaxHoldTimeSeconds}return a},beforeDataLoad:function(a,d){var b=a.defaultMaxHoldTimeSeconds;a.defaultMaxHoldTimeHours=Math.floor(parseInt(a.defaultMaxHoldTimeSeconds)/60/60);if(a.defaultMaxHoldTimeHours>0){b-=a.defaultMaxHoldTimeHours*60*60}a.defaultMaxHoldTimeMinutes=b/60;if(a.agencyURI){a.rateAvailableForAgencyOnly=true}var c=d.getRequiredData("supplier");a.restrictions=c.data.defaultRateTermsAndConditions;return a},items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:350,defaults:{bodyStyle:"padding: 6px 4px 6px 4px;"},items:[{title:"Details",items:[{xtype:"panel",layout:"form",border:false,labelWidth:113,defaults:{style:"padding: 2px 4px 2px 4px;"},items:[{xtype:"textfield",name:"name",fieldLabel:"Rate name",width:225},{xtype:"panel",style:"padding: 0; margin-top: 4px;margin-bottom: 4px;",border:false,layout:"table",layoutConfig:{columns:4},defaults:{border:false},items:[{html:"Booking Class Code:",width:Ext.isIE?115:118},{xtype:"textfield",name:"bookingClassCode",fieldLabel:"Booking Class Code",width:75},{html:" ",width:Ext.isIE?7:10},{xtype:"combo",name:"bookingClass",fieldLabel:"Booking Class",mode:"local",width:140,triggerAction:"all",editable:false,displayField:"name",valueField:"dataURI",tpl:TDS.util.Templates.ComboNoLabel,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})}]},{xtype:"combo",name:"rateClassURI",fieldLabel:"Type",mode:"local",width:225,triggerAction:"all",editable:false,displayField:"name",valueField:"dataURI",tpl:TDS.util.Templates.ComboNoLabel,store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/classes/collection",identifier:"rate/classes",fields:["name","dataURI"]})},{xtype:"combo",name:"ratePerURI",fieldLabel:"Per",mode:"local",width:110,triggerAction:"all",editable:false,displayField:"name",valueField:"dataURI",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"rate/pers/collection",identifier:"rate/pers",fields:["name","dataURI"]})},{xtype:"hidden",forceSubmit:true,name:"rateOccupancyURI",value:"rate/occupancy/1"},{xtype:"panel",style:"padding: 0; margin-top: 4px; margin-bottom: 4px;",border:false,layout:"table",layoutConfig:{columns:4},defaults:{border:false},items:[{html:"Min Stay:",width:Ext.isIE?115:118},{xtype:"combo",name:"minStay",fieldLabel:"Min Stay",mode:"local",width:80,triggerAction:"all",editable:false,displayField:"numeric",valueField:"numeric",store:new Ext.data.SimpleStore({fields:["numeric","numeric"],expandData:true,data:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40"]})},{html:"Max Stay:",style:"padding: 0; margin-left: 10px;",width:Ext.isIE?52:55},{xtype:"combo",name:"maxStay",fieldLabel:"Max Stay",mode:"local",width:80,triggerAction:"all",editable:false,displayField:"numeric",valueField:"numeric",store:new Ext.data.SimpleStore({fields:["numeric","numeric"],expandData:true,data:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40"]})}]},{xtype:"textfield",name:"advancePurchaseReq",fieldLabel:"Advance Purchase Rq",width:105},{xtype:"panel",style:"padding: 0; margin-top: 4px; margin-bottom: 4px;",border:false,layout:"table",layoutConfig:{columns:4},defaults:{border:false},items:[{html:"Seasons:",width:Ext.isIE?115:118},{xtype:"datefield",name:"seasonsFromDate",enableKeyEvents:true,showToday:false,format:"dMy",fieldLabel:"Seasons",width:105},{html:"",style:"padding: 0; margin-left: 5px;",width:Ext.isIE?3:6},{xtype:"datefield",name:"seasonsToDate",enableKeyEvents:true,showToday:false,format:"dMy",fieldLabel:"Seasons",width:105}]},{xtype:"combo",name:"seasonalCode",fieldLabel:"",mode:"local",width:225,labelSeparator:"",triggerAction:"all",editable:false,displayField:"text",valueField:"value",store:TDS.data.seasonalCode,tpl:'<tpl for="."><div class="x-combo-list-item">{value} - {text}</div></tpl>'},{xtype:"combo",name:"globalIndicator",fieldLabel:"Global Indicator",mode:"local",width:225,triggerAction:"all",editable:false,displayField:"text",valueField:"value",store:TDS.data.globalIndicator,tpl:'<tpl for="."><div class="x-combo-list-item">{value} - {text}</div></tpl>'},{xtype:"panel",style:"padding: 0;",border:false,layout:"table",layoutConfig:{columns:5},defaults:{border:false},items:[{html:"Inventory Max. hold time:",width:Ext.isIE?140:138},{xtype:"omnicrementer",name:"defaultMaxHoldTimeHours",maxValue:23},{html:"hours",bodyStyle:"padding: 0 4px;"},{xtype:"omnicrementer",name:"defaultMaxHoldTimeMinutes",maxValue:59},{html:"minutes",bodyStyle:"padding: 0 4px;"}]},{xtype:"panel",style:"padding: 0; margin-top: 4px;",border:false,layout:"table",layoutConfig:{columns:5},defaults:{border:false},items:[{html:"Inventory Cut-off time:",width:Ext.isIE?140:138},{xtype:"omnicrementer",name:"defaultCutoffTimeDays",value:0,forceSubmit:true,maxValue:30},{html:"days",bodyStyle:"padding: 0 10px;"}]}]}]},{title:"Pricing",items:[{xtype:"panel",layout:"form",border:false,labelWidth:123,style:"padding: 2px 4px 2px 10px;",defaults:{border:false},items:[{html:"Date and Time of Last Update:",style:"padding: 0; margin-top: 4px; margin-bottom: 14px;",width:Ext.isIE?215:218},{xtype:"pricepanel"},{xtype:"panel",style:"padding: 0; margin-top: 4px; margin-bottom: 4px;",border:false,layout:"table",layoutConfig:{columns:5},defaults:{border:false},items:[{html:"",width:Ext.isIE?125:128},{xtype:"radio",name:"transportType",inputValue:false,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;this.setValue(!b.transportType)}}},{html:"One Way",style:"padding: 0; margin-left: 1px; margin-right: 15px;",width:Ext.isIE?43:45},{xtype:"radio",name:"transportType",inputValue:true,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;this.setValue(b.transportType)}}},{html:"Return",style:"padding: 0; margin-left: 1px; margin-right: 5px;",width:Ext.isIE?38:40}]},{xtype:"panel",style:"padding: 0; margin-top: 4px; margin-bottom: 4px;",border:false,layout:"table",layoutConfig:{columns:7},defaults:{border:false},items:[{html:"MPM:",width:Ext.isIE?125:128},{xtype:"textfield",name:"mpm",fieldLabel:"MPM",width:35},{html:"",width:Ext.isIE?7:11},{xtype:"radio",name:"comm",inputValue:false,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;this.setValue(!b.comm)}}},{html:"Mileage",style:"padding: 0; margin-left: 1px; margin-right: 15px;",width:Ext.isIE?43:45},{xtype:"radio",name:"comm",inputValue:true,listeners:{render:function(){var c=this.ownerCt.findParentByType("awesomewindow");var b=c.aw.data;this.setValue(b.comm)}}},{html:"Routing",style:"padding: 0; margin-left: 1px; margin-right: 5px;",width:Ext.isIE?38:40}]},{xtype:"combo",name:"dayOrTimeRestriction",fieldLabel:"Day Or Time Restriction",mode:"local",width:225,triggerAction:"all",editable:false,displayField:"text",valueField:"value",store:TDS.data.dayOrTimeRestriction},{xtype:"textfield",name:"miscCodes",fieldLabel:"Misc. Codes",width:225},{xtype:"combo",name:"fareLevelIdentifier",fieldLabel:"Fare Level Identifier",mode:"local",width:225,triggerAction:"all",editable:false,displayField:"numeric",valueField:"numeric",store:new Ext.data.SimpleStore({fields:["numeric","numeric"],expandData:true,data:["10"]})}]}]}]}]}