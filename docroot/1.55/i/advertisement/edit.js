{xtype:"form",border:false,width:490,markDataDirtyOnLoad:true,beforeSubmit:function(b){;var a=this.ownerCt;b.agencyDataURI=a.initialConfig.agencydatauri;return b},items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:420,width:480,defaults:{bodyStyle:"padding: 6px 4px 6px 4px;"},items:[{title:"Details",items:[{xtype:"panel",layout:"form",height:390,autoScroll:true,border:false,labelWidth:105,items:[{xtype:"textfield",fieldLabel:"Advertisement Text",name:"advertisementText",width:290},{xtype:"datefield",name:"dateStart",fieldLabel:"Start date",showToday:false,width:80,format:"dMy",minValue:"01/01/06"},{xtype:"datefield",name:"dateEnd",fieldLabel:"End date",showToday:false,width:80,format:"dMy",minValue:"01/01/06"},{xtype:"checkbox",fieldLabel:"Active",forceSubmit:true,name:"active",width:290},{xtype:"textfield",fieldLabel:"URL",name:"clickurl",width:290},{xtype:"combo",forceSubmit:true,fieldLabel:"Image Size",name:"location",mode:"local",width:60,triggerAction:"all",editable:false,store:[["false","Small"],["true","Large"]],listeners:{select:function(j,d,b){;var f=this.getValue();var e=this.ownerCt.items.itemAt(7);var g=this.ownerCt.items.itemAt(6);var a=this.ownerCt.ownerCt.ownerCt.ownerCt.ownerCt;var h=a.initialConfig.agencydatauri;if(h!=null&&h!=""){if(f){g.store.loadData([1,2,3,4])}else{g.store.loadData([1,2,3])}}else{g.store.loadData([1,2,3,4,5,6])}}}},{xtype:"combo",forceSubmit:true,fieldLabel:"Image Position",name:"position",width:60,triggerAction:"all",editable:false,store:[],listeners:{render:function(){;this.store.loadData([1,2,3,4])}}},{xtype:"label",forceSubmit:true,fieldLabel:"Image Size",name:"size",mode:"local",width:60,triggerAction:"all",editable:false,value:"false",store:[["false","357 x 103"],["true","363 x 289"]],listeners:{select:function(d,b,a){}}},{xtype:"textfield",id:"graphicImgPath",hidden:true,name:"graphicImgPath"},{html:"Image size: Small=355 x 123 pixels.<br>Image size: Large=361 x 227 pixels.",style:"padding: 5px 0px 5px 0px;",border:false},{html:"",style:"margin-left: 10px; ",border:false},{html:'<form action="fileUpload" enctype="multipart/form-data" method="post"><td width= "300"><input width= "300" name="fileUpLoad" id="fileUpLoad"type="file"  /></td></form>',width:300,border:false},{html:"",style:"margin-left: 10px; ",border:false},{xtype:"button",text:"Delete",style:"padding: 6px 0px 0px 245px;",handler:function(d){;document.images.image1.src="";Ext.getCmp("imagePanel").html='<img border="0" id="imageId" name="image1" src="" ><input type="hidden" id ="imgName"  name="imgName" value="">';var c=this.ownerCt.findParentByType("awesomewindow");var a=c.aw.sourceDataURI;var b=document.getElementById("imgName").value;if(b){var e={};if(b){e.removefile=b}if(b){e.imageStorePath=a}e.imageName=Ext.getCmp("graphicImgPath").getValue();Ext.Ajax.request({url:TDS.env.dataPath+"fileUpload",method:"POST",params:e,callback:function(i,g,h){if(g){Ext.Msg.alert("","Deleted succussefully.");document.images.image1.src="";document.getElementById("imgName").value="";document.getElementById("fileUpLoad").value="";var f={deletePath:true,imagePath:document.getElementById("imgName").value};Ext.Ajax.request({url:TDS.env.dataPath+a+"/graphicImage",method:"POST",jsonData:f,scope:this})}else{Ext.Msg.alert("","Error coocured..")}}})}}},{xtype:"button",text:"Upload",style:"padding: 6px 0px 0px 245px;",handler:function(b){;document.images.image1.src="";Ext.getCmp("imagePanel").html='<img border="0" id="imageId" name="image1" src="" ><input type="hidden" id ="imgName"  name="imgName" value="">';var h=this.ownerCt.findParentByType("awesomewindow");var a="advertisement";var g=document.getElementById("fileUpLoad").value;var d=document.getElementById("fileUpLoad").files[0];if(d){Ext.Msg.show({title:"Save Changes?",msg:"confirmclose",buttons:Ext.Msg.YESNO,fn:i,animEl:"elId",icon:Ext.MessageBox.QUESTION})}function i(){var k=new FormData();k.append("image",d);var l=new XMLHttpRequest();l.upload.addEventListener("progress",e,false);l.addEventListener("load",f,false);l.addEventListener("error",c,false);l.addEventListener("abort",j,false);l.open("POST",TDS.env.dataPath+"fileUpload?&imageName="+Ext.getCmp("graphicImgPath").getValue()+"&imageStorePath="+a);l.send(k);l.onreadystatechange=function(){if(l.readyState==4){var p=l.getAllResponseHeaders();var q=l.responseText;var o=a;var n="GraphicsImg/"+q;document.getElementById("imgName").value=n;var m={deletePath:false,imagePath:document.getElementById("imgName").value};Ext.getCmp("graphicImgPath").setValue(n);document.images.image1.src="../"+n;document.getElementById("imgName").value=n}}}function e(k){}function f(k){}function c(k){Ext.Msg.alert("","There was an error attempting to upload the file.")}function j(k){Ext.Msg.alert("","The upload has been canceled by the user or the browser dropped the connection.")}}},{html:"test",id:"imagePanel",border:false,autoScroll:true,height:"auto",width:"auto",listeners:{beforerender:function(){var b="";var c=Ext.getCmp("graphicImgPath").getValue();var a=c.substring(0,4);if(a=="http"){this.html='<img border="0" height ="300px" width="300px" id="imageId" name="image1" src='+c+' ><input type="hidden" id ="imgName"  name="imgName" value='+c+">"}else{b="../"+c;this.html='<img border="0" height ="300px" width="300px" id="imageId" name="image1" src='+b+' ><input type="hidden" id ="imgName"  name="imgName" value='+b+">"}}}}]}]}]}]}