{xtype:"form",border:false,beforeSubmit:function(a){var b=[];if(a.weeklyScheduleSunday){b.push(TDS.data.weeklyScheduleDays.SUNDAY);delete a.weeklyScheduleSunday}if(a.weeklyScheduleMonday){b.push(TDS.data.weeklyScheduleDays.MONDAY);delete a.weeklyScheduleMonday}if(a.weeklyScheduleTuesday){b.push(TDS.data.weeklyScheduleDays.TUESDAY);delete a.weeklyScheduleTuesday}if(a.weeklyScheduleWednesday){b.push(TDS.data.weeklyScheduleDays.WEDNESDAY);delete a.weeklyScheduleWednesday}if(a.weeklyScheduleThursday){b.push(TDS.data.weeklyScheduleDays.THURSDAY);delete a.weeklyScheduleThursday}if(a.weeklyScheduleFriday){b.push(TDS.data.weeklyScheduleDays.FRIDAY);delete a.weeklyScheduleFriday}if(a.weeklyScheduleSaturday){b.push(TDS.data.weeklyScheduleDays.SATURDAY);delete a.weeklyScheduleSaturday}if(b.length){a.weeklyScheduleDays=b}return a},beforeDataLoad:function(b){if(b.weeklyScheduleDays){var c=b.weeklyScheduleDays;for(var a=0;a<c.length;a++){if(c[a]==TDS.data.weeklyScheduleDays.SUNDAY){b.weeklyScheduleSunday=true}if(c[a]==TDS.data.weeklyScheduleDays.MONDAY){b.weeklyScheduleMonday=true}if(c[a]==TDS.data.weeklyScheduleDays.TUESDAY){b.weeklyScheduleTuesday=true}if(c[a]==TDS.data.weeklyScheduleDays.WEDNESDAY){b.weeklyScheduleWednesday=true}if(c[a]==TDS.data.weeklyScheduleDays.THURSDAY){b.weeklyScheduleThursday=true}if(c[a]==TDS.data.weeklyScheduleDays.FRIDAY){b.weeklyScheduleFriday=true}if(c[a]==TDS.data.weeklyScheduleDays.SATURDAY){b.weeklyScheduleSaturday=true}}}return b},items:[{xtype:"tabpanel",activeTab:0,layoutOnTabChange:true,height:300,defaults:{bodyStyle:"padding: 6px 4px 6px 4px;"},items:[{title:"Details",items:[{xtype:"panel",layout:"form",border:false,labelWidth:80,defaults:{style:"padding: 2px 4px 2px 4px;"},items:[{xtype:"textfield",name:"name",fieldLabel:"Service",bodyStyle:"padding: 2px 4px 2px 4px;",width:185},{xtype:"textfield",name:"codeSupplier",fieldLabel:"Service No.",bodyStyle:"padding: 2px 4px 2px 4px;",width:185},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;",border:false,hideBorders:true,layoutConfig:{columns:4},items:[{html:"Advertised rate:",width:Ext.isIE?88:85},{xtype:"textfield",allowBlank:false,name:"rackRatePriceSell",fieldLabel:"Advertised rate",name:"rackRatePriceSell",width:60},{html:" ",width:Ext.isIE?12:12},{xtype:"combo",forceSubmit:true,name:"pricingPriceIsNett",mode:"local",width:60,triggerAction:"all",editable:false,value:"false",store:[["false","Gross"],["true","Nett"]]}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;",border:false,hideBorders:true,layoutConfig:{columns:3},items:[{html:"From:",width:Ext.isIE?88:85},{xtype:"combo",name:"countryFrom",emptyText:"Type a country...",excludeSubmit:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"isoCode",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","isoCode"]}),appendData:[{name:"",dataURI:""}]},{xtype:"locationcombo",name:"locationFromURI",style:"margin-left: 2px;",listeners:{beforesearch:function(c){var b=this.ownerCt;var a=b.items.itemAt(1);if(a.getValue()==""){a.markInvalid("Please select a country.");return false}c.searchURI=TDS.env.dataPath+"country/"+a.getValue()+"/locations/collection";c.searchIdentifier="country/"+a.getValue()+"/locations"}}}]},{xtype:"panel",layout:"table",style:"padding: 0; margin-bottom: 4px;",border:false,hideBorders:true,layoutConfig:{columns:3},items:[{html:"To:",width:Ext.isIE?88:85},{xtype:"combo",name:"countryTo",emptyText:"Type a country...",excludeSubmit:true,tpl:TDS.util.Templates.ComboNoLabel,minChars:1,enableKeyEvents:true,mode:"local",width:120,typeAhead:true,triggerAction:"all",forceSelection:true,selectOnFocus:true,displayField:"name",valueField:"isoCode",store:TDS.data.getStore({dataURI:TDS.env.dataPath+"countries/collection",identifier:"countries",fields:["name","isoCode"]}),appendData:[{name:"",dataURI:""}]},{xtype:"locationcombo",name:"locationToURI",style:"margin-left: 2px;",listeners:{beforesearch:function(c){var b=this.ownerCt;var a=b.items.itemAt(1);if(a.getValue()==""){a.markInvalid("Please select a country.");return false}c.searchURI=TDS.env.dataPath+"country/"+a.getValue()+"/locations/collection";c.searchIdentifier="country/"+a.getValue()+"/locations"}}}]},{xtype:"textfield",name:"departureTime",fieldLabel:"Departure time",emptyText:"e.g. 1845",bodyStyle:"padding: 2px 4px 2px 4px;",width:80},{xtype:"textfield",name:"arrivalTime",fieldLabel:"Arrival time",emptyText:"e.g. 0630+1",bodyStyle:"padding: 2px 4px 2px 4px;",width:80},{xtype:"textfield",name:"duration",fieldLabel:"Trip time",emptyText:"e.g. 12h 15m",bodyStyle:"padding: 2px 4px 2px 4px;",width:120},{xtype:"panel",style:"padding: 0;",border:false,hideBorders:true,layout:"table",layoutConfig:{columns:15},items:[{html:"Schedule:",width:Ext.isIE?88:85},{xtype:"checkbox",name:"weeklyScheduleSunday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Sun"},{xtype:"checkbox",name:"weeklyScheduleMonday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Mon"},{xtype:"checkbox",name:"weeklyScheduleTuesday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Tue"},{xtype:"checkbox",name:"weeklyScheduleWednesday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Wed"},{xtype:"checkbox",name:"weeklyScheduleThursday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Thu"},{xtype:"checkbox",name:"weeklyScheduleFriday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Fri"},{xtype:"checkbox",name:"weeklyScheduleSaturday",forceSubmit:true},{style:"padding-left: 2px; padding-right: 6px;",html:"Sat"}]}]}]},{title:"Description",layout:"form",items:{xtype:"htmleditor",name:"description",height:200,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}},{title:"Notes",layout:"form",items:{xtype:"htmleditor",name:"notes",height:200,hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}},{title:"Localisation",layout:"form",items:[{html:"<p>Name:</p>",style:"margin-bottom: 2px;",border:false},{xtype:"textfield",name:"nameLocale",hideLabel:true,labelSeparator:"",anchor:"100%"},{html:"<p>Description:</p>",style:"margin-bottom: 2px;",border:false},{xtype:"htmleditor",name:"descriptionLocale",height:"auto",hideLabel:true,labelSeparator:"",anchor:"100%",enableLinks:false,enableLists:false,enableSourceEdit:false,enableFontSize:false,enableFont:false,enableColors:false,enableAlignments:false}]}]}]}