{xtype:"panel",layout:Ext.isIE?"fit":"",autoScroll:true,bodyStyle:"padding: 8px;",tbar:["","->",{xtype:"button",disabled:true}],listeners:{render:function(){var b=this.ownerCt.findParentByType("form");var a=b.getData("nameString");this.topToolbar.items.itemAt(0).td.innerHTML="<font color='#003399'><b>"+a+"</b></font>"}},items:{xtype:"awesomegrid",pinnable:false,enableRowExpander:false,tbar:["Status: ",{xtype:"combo",name:"statusType",mode:"local",width:100,triggerAction:"all",editable:false,displayField:"text",valueField:"value",store:TDS.data.historyStatusTypes},"-",{xtype:"checkbox",name:"archived",boxLabel:"Show only Archived",handler:function(){var a=this.ownerCt.ownerCt.topToolbar;a.items.itemAt(5).disable(true);if(this.checked){a.items.itemAt(5).setText("Restore")}else{a.items.itemAt(5).setText("Archive")}}},"->",{xtype:"button",text:"Archive",disabled:true,handler:function(){var e=this.ownerCt.ownerCt;var c=e.getSelections();var b=c[0].data.dataURI;var f=this.getText();var d=!(e.getTopToolbar().items.itemAt(3).checked);TDS.window.setWindow({title:f,message:"Are you sure you want to "+f+" selected History ?",destinationDataURI:b+"/archive?archive="+d,data:{archived:true},callback:{fn:function(a){if(a){e.submitQuery(true)}},scope:e}})}}],store:new Ext.data.JsonStore({url:"",id:"dataURI",fields:["dataURI","activityTime","changeDescription","userFullNameString","statusString","rateNames","recurrence","excludedDates","available","validity"]}),sm:new Ext.grid.RowSelectionModel(),cm:new Ext.grid.ColumnModel([{header:"Date",dataIndex:"activityTime",width:100,fixed:true,renderer:TDS.util.Format.dateSpecialRenderer(TDS.env.dateTimeFormatDisplay)},{header:"User",dataIndex:"userFullNameString",width:160,fixed:true},{header:"Status",dataIndex:"statusString",width:160,fixed:true},{header:"Rate",dataIndex:"rateNames",width:160,fixed:true},{header:"Available",dataIndex:"available",width:60,fixed:true},{header:"Validity",dataIndex:"validity"},{header:"Recurrence",dataIndex:"recurrence",width:160,fixed:true},{header:"Excluded Dates",dataIndex:"excludedDates"}]),viewConfig:{forceFit:true},listeners:{toolbarinit:function(){var a=this.ownerCt.findParentByType("ajaxpanel");this.searchURI=TDS.env.dataPath+a.baseDataURI+"/history"},render:function(){this.getSelectionModel().on("rowselect",function(){this.items.itemAt(5).setDisabled(false)},this.getTopToolbar());this.getSelectionModel().on("rowdeselect",function(){this.items.itemAt(5).setDisabled(true)},this.getTopToolbar())}}}}