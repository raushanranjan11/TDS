Ext.Timer=function(a){this.interval=1000;this.useServerTime=true;Ext.apply(this,a);this.addEvents("refresh","expired")};Ext.extend(Ext.Timer,Ext.util.Observable,{checkListeners:function(){if(!this.hasListener("refresh")&&!this.hasListener("expired")){this.stop()}},run:function(){this.checkListeners();var b=new Date();var e=this.expireDate.getTime();var c=b.getTime();if(this.useServerTime){var d=Ext.TimerMgr.getTimeOffset();c=c-d}if(c>=e||(e-c<=1000)){this.stop();this.fireEvent("expired",this)}else{this.timeRemaining=Ext.TimerMgr.getTimeRemaining(e-c);var a=this.timeRemaining.getInterval();if(a!==this.interval){this.interval=a}this.fireEvent("refresh",this,this.timeRemaining.display())}},init:function(){this.expireDate=new Date.parseDate(this.expireTime,TDS.env.dateFormat)},stop:function(){Ext.TimerMgr.stop(this)}});